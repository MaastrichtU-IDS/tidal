{"code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=323)}([function(e,t){e.exports=require(\"rdf-namespaces\")},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),process&&process.env.COMUNICA_DEBUG||(Error.stackTraceLimit=!1),n(r(42)),n(r(149)),n(r(150)),n(r(151)),n(r(44)),n(r(152))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(53)),n(r(55)),n(r(170)),n(r(54))},function(e,t,r){var n=r(142);e.exports=n},function(e,t){e.exports=require(\"tripledoc\")},function(e,t){e.exports=require(\"rdf-string\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(160))},function(e,t){e.exports=require(\"sparqlalgebrajs\")},function(e,t){e.exports=require(\"asynciterator\")},function(e,t){e.exports=require(\"ldflex\")},function(e,t){e.exports=require(\"stream\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(159))},function(e,t){e.exports=require(\"tweetnacl-util\")},function(e,t){e.exports=require(\"solid-auth-client\")},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(61)),n(r(179))},function(e,t){e.exports=require(\"rdf-terms\")},function(e,t){e.exports=require(\"asynciterator-promiseproxy\")},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(249)),n(r(250))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(155))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(132))},function(e){e.exports=JSON.parse('{\"@context\":{\"acl\":\"http://www.w3.org/ns/auth/acl#\",\"app\":\"http://www.w3.org/ns/solid/app#\",\"as\":\"https://www.w3.org/ns/activitystreams#\",\"cert\":\"http://www.w3.org/ns/auth/cert#\",\"dc\":\"http://purl.org/dc/elements/1.1/\",\"dct\":\"http://purl.org/dc/terms/\",\"foaf\":\"http://xmlns.com/foaf/0.1/\",\"ldp\":\"http://www.w3.org/ns/ldp#\",\"owl\":\"http://www.w3.org/2002/07/owl#\",\"pim\":\"http://www.w3.org/ns/pim/space#\",\"rdf\":\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\"rdfs\":\"http://www.w3.org/2000/01/rdf-schema#\",\"schema\":\"http://schema.org/\",\"sioc\":\"http://rdfs.org/sioc/ns#\",\"solid\":\"http://www.w3.org/ns/solid/terms#\",\"stat\":\"http://www.w3.org/ns/posix/stat#\",\"ui\":\"http://www.w3.org/ns/ui#\",\"vcard\":\"http://www.w3.org/2006/vcard/ns#\",\"xsd\":\"http://www.w3.org/2001/XMLSchema#\",\"accessControl\":\"acl:accessControl\",\"accessTo\":\"acl:accessTo\",\"accessToClass\":\"acl:accessToClass\",\"agent\":\"acl:agent\",\"agents\":\"acl:agent\",\"agentClass\":\"acl:agentClass\",\"agentClasses\":\"acl:agentClass\",\"agentGroup\":\"acl:agentGroup\",\"agentGroups\":\"acl:agentGroup\",\"defaultAcl\":\"acl:default\",\"defaultAclForNew\":\"acl:defaultForNew\",\"delegates\":\"acl:delegates\",\"mode\":\"acl:mode\",\"modes\":\"acl:mode\",\"origin\":\"acl:origin\",\"origins\":\"acl:origin\",\"actor\":\"as:actor\",\"attachment\":\"as:attachment\",\"attributedTo\":\"as:attributedTo\",\"author\":\"as:author\",\"bcc\":\"as:bcc\",\"bto\":\"as:bto\",\"cc\":\"as:cc\",\"inReplyTo\":\"as:inReplyTo\",\"object\":\"as:object\",\"publicationDate\":\"as:published\",\"subject\":\"as:subject\",\"summary\":\"as:summary\",\"target\":\"as:target\",\"to\":\"as:to\",\"abstract\":\"dc:abstract\",\"abstracts\":\"dc:abstract\",\"created\":\"dc:created\",\"license\":\"dc:license\",\"modified\":\"dc:modified\",\"title\":\"dc:title\",\"titles\":\"dc:title\",\"account\":\"foaf:account\",\"accounts\":\"foaf:account\",\"age\":\"foaf:age\",\"basedNear\":\"foaf:based_near\",\"birthday\":\"foaf:birthday\",\"blog\":\"foaf:weblog\",\"depiction\":\"foaf:depiction\",\"depicts\":\"foaf:depicts\",\"email\":\"foaf:mbox\",\"familyName\":\"foaf:familyName\",\"firstName\":\"foaf:givenName\",\"friend\":\"foaf:knows\",\"friends\":\"foaf:knows\",\"gender\":\"foaf:gender\",\"givenName\":\"foaf:givenName\",\"homepage\":\"foaf:homepage\",\"image\":\"foaf:img\",\"images\":\"foaf:img\",\"interest\":\"foaf:topic_interest\",\"interests\":\"foaf:topic_interest\",\"knows\":\"foaf:knows\",\"lastName\":\"foaf:familyName\",\"logo\":\"foaf:logo\",\"made\":\"foaf:made\",\"maker\":\"foaf:maker\",\"member\":\"foaf:member\",\"name\":\"foaf:name\",\"nick\":\"foaf:nick\",\"page\":\"foaf:page\",\"pages\":\"foaf:page\",\"primaryTopic\":\"foaf:primaryTopic\",\"primaryTopicOf\":\"foaf:primaryTopicOf\",\"publication\":\"foaf:publications\",\"publications\":\"foaf:publications\",\"thumbnail\":\"foaf:thumbnail\",\"thumbnails\":\"foaf:thumbnail\",\"topic\":\"foaf:topic\",\"topics\":\"foaf:topic\",\"inbox\":\"ldp:inbox\",\"inboxes\":\"ldp:inbox\",\"storage\":\"pim:storage\",\"preferences\":\"pim:preferencesFile\",\"workspace\":\"pim:workspace\",\"type\":\"rdf:type\",\"types\":\"rdf:type\",\"comment\":\"rdfs:comment\",\"comments\":\"rdfs:comment\",\"label\":\"rdfs:label\",\"labels\":\"rdfs:label\",\"seeAlso\":\"rdfs:seeAlso\",\"definedBy\":\"rdfs:isDefinedBy\",\"oidcIssuer\":\"solid:oidcIssuer\",\"publicTypeIndex\":\"solid:publicTypeIndex\",\"publicTypeIndexes\":\"solid:publicTypeIndex\",\"privateTypeIndex\":\"solid:privateTypeIndex\",\"privateTypeIndexes\":\"solid:privateTypeIndex\"}}')},function(e,t){e.exports=require(\"lodash.assign\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(158))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(47)),n(r(163))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(162)),n(r(165))},function(e,t){e.exports=require(\"sparqlee\")},function(e,t){e.exports=require(\"tweetnacl\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(200))},function(e,t){e.exports=require(\"asynciterator-union\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(171))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(67)),n(r(184)),n(r(69))},function(e,t){e.exports=require(\"relative-to-absolute-iri\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(190))},function(e,t){e.exports=require(\"lru-cache\")},function(e,t,r){\"use strict\";(function(e){function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(232)),n(r(243));var a=r(248);t.newEngine=a.newEngine,t.evaluateQuery=a.evaluateQuery;const s=r(318);t.newEngineDynamic=function(t){return s.newEngineDynamicArged(t||{},e,e+\"/config/config-default.json\")}}).call(this,\"/\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(240),a=r(2),s=r(14),o=r(1),i=r(104),c=r(7);class d extends n.ActorInit{constructor(e){super(e)}async test(e){return!0}async query(e,r){r=r||{};for(const e in r)if(this.contextKeyShortcuts[e]){const t=r[e];r[this.contextKeyShortcuts[e]]=t,delete r[e]}r[o.KEY_CONTEXT_LOG]||(r[o.KEY_CONTEXT_LOG]=this.logger),r[a.KEY_CONTEXT_QUERY_TIMESTAMP]||(r[a.KEY_CONTEXT_QUERY_TIMESTAMP]=new Date),Array.isArray(r[s.KEY_CONTEXT_SOURCES])&&(r[s.KEY_CONTEXT_SOURCES].map(e=>{\"string\"==typeof e||\"auto\"!==e.type&&\"hypermedia\"!==e.type||delete e.type}),r[s.KEY_CONTEXT_SOURCES]=i.AsyncReiterableArray.fromFixedData(r[s.KEY_CONTEXT_SOURCES]));let n,c,d=\"sparql\";if((r=o.ActionContext(r))&&r.has(t.KEY_CONTEXT_QUERYFORMAT)&&(d=r.get(t.KEY_CONTEXT_QUERYFORMAT),r=r.delete(t.KEY_CONTEXT_QUERYFORMAT),\"graphql\"!==d||r.has(t.KEY_CONTEXT_GRAPHQL_SINGULARIZEVARIABLES)||(r=r.set(t.KEY_CONTEXT_GRAPHQL_SINGULARIZEVARIABLES,{}))),r&&r.has(a.KEY_CONTEXT_BASEIRI)&&(n=r.get(a.KEY_CONTEXT_BASEIRI)),r=(await this.mediatorContextPreprocess.mediate({context:r})).context,\"string\"==typeof e){const t=await this.mediatorSparqlParse.mediate({context:r,query:e,queryFormat:d,baseIRI:n});c=t.operation,t.baseIRI&&(r=r.set(a.KEY_CONTEXT_BASEIRI,t.baseIRI))}else c=e;if(r.has(t.KEY_CONTEXT_INITIALBINDINGS)){const e=r.get(t.KEY_CONTEXT_INITIALBINDINGS);c=a.materializeOperation(c,a.ensureBindings(e))}c=(await this.mediatorOptimizeQueryOperation.mediate({context:r,operation:c})).operation;const u={context:r,operation:c},p=await this.mediatorQueryOperation.mediate(u);return p.context=r,p}async getResultMediaTypes(e){return(await this.mediatorSparqlSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(e){return(await this.mediatorSparqlSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(e,t,r){if(r=o.ActionContext(r),!t)switch(e.type){case\"bindings\":t=\"application/json\";break;case\"quads\":t=\"application/trig\";break;default:t=\"simple\"}const n=e;return n.context=r,(await this.mediatorSparqlSerialize.mediate({context:r,handle:n,handleMediaType:t})).handle}invalidateHttpCache(e){return this.mediatorHttpInvalidate.mediate({url:e})}async run(e){throw new Error(\"ActorInitSparql#run is not supported in the browser.\")}}t.ActorInitSparql=d,d.ALGEBRA_TYPES=Object.keys(c.Algebra.types).reduce((e,t)=>(e[c.Algebra.types[t]]=!0,e),{}),t.KEY_CONTEXT_INITIALBINDINGS=\"@comunica/actor-init-sparql:initialBindings\",t.KEY_CONTEXT_QUERYFORMAT=\"@comunica/actor-init-sparql:queryFormat\",t.KEY_CONTEXT_GRAPHQL_SINGULARIZEVARIABLES=\"@comunica/actor-init-sparql:singularizeVariables\",t.KEY_CONTEXT_LENIENT=\"@comunica/actor-init-sparql:lenient\"},function(e,t){e.exports=require(\"streamify-string\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(291))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(293)),n(r(120))},function(e,t){function r(){this.value=\"\"}r.prototype.equals=function(e){return!!e&&e.termType===this.termType},r.prototype.termType=\"DefaultGraph\",e.exports=r},function(e,t){function r(e){this.value=e}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType=\"NamedNode\",e.exports=r},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(148))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.Bus=class{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map,r(21)(this,e)}subscribe(e){this.actors.push(e),this.reorderForDependencies()}subscribeObserver(e){this.observers.push(e)}unsubscribe(e){const t=this.actors.indexOf(e);return t>=0&&(this.actors.splice(t,1),!0)}unsubscribeObserver(e){const t=this.observers.indexOf(e);return t>=0&&(this.observers.splice(t,1),!0)}publish(e){return this.actors.map(t=>({actor:t,reply:t.test(e)}))}onRun(e,t,r){for(const n of this.observers)n.onRun(e,t,r)}addDependencies(e,t){for(const r of t){let t=this.dependencyLinks.get(r);t||(t=[],this.dependencyLinks.set(r,t)),t.push(e)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const e=[];for(const t of this.dependencyLinks.keys()){const r=this.actors.indexOf(t);r>=0&&(this.actors.splice(r,1),e.push(t))}for(;e.length>0;){let t=-1;for(let r=0;r<e.length;r++){let n=!0;for(const t of this.dependencyLinks.get(e[r]))if(this.actors.indexOf(t)<0&&e.indexOf(t)>=0){n=!1;break}if(n){t=r;break}}if(t<0)throw new Error(\"Cyclic dependency links detected in bus \"+this.name);const r=e.splice(t,1)[0];this.actors.push(r)}}}}},function(e,t){e.exports=require(\"immutable\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});class n{static getLevelOrdinal(e){return n.LEVELS[e]}}t.Logger=n,n.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},t.KEY_CONTEXT_LOG=\"@comunica/core:log\"},function(e,t){e.exports=require(\"lodash.defaults\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(161))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}async run(e){if(\"handle\"in e){const t=e;return{handle:await this.runHandle(t.handle,t.handleMediaType,e.context)}}if(\"mediaTypes\"in e)return{mediaTypes:await this.getMediaTypes(e.context)};if(\"mediaTypeFormats\"in e)return{mediaTypeFormats:await this.getMediaTypeFormats(e.context)};throw new Error(\"Either a handle, mediaTypes or mediaTypeFormats action needs to be provided\")}async test(e){if(\"handle\"in e){const t=e;return{handle:await this.testHandle(t.handle,t.handleMediaType,e.context)}}if(\"mediaTypes\"in e)return{mediaTypes:await this.testMediaType(e.context)};if(\"mediaTypeFormats\"in e)return{mediaTypeFormats:await this.testMediaTypeFormats(e.context)};throw new Error(\"Either a handle, mediaTypes or mediaTypeFormats action needs to be provided\")}}t.ActorAbstractMediaTyped=a},function(e,t){e.exports=require(\"n3\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(166))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(168))},function(e,t){e.exports=require(\"rdfa-streaming-parser\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(169))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1),a=r(54);class s extends n.Actor{constructor(e){super(e)}static getSafeBindings(e){return s.validateQueryOutput(e,\"bindings\"),e}static getSafeQuads(e){return s.validateQueryOutput(e,\"quads\"),e}static getSafeBoolean(e){return s.validateQueryOutput(e,\"boolean\"),e}static cachifyMetadata(e){let t;return e&&(()=>t||(t=e()))}static validateQueryOutput(e,t){if(e.type!==t)throw new Error(\"Invalid query output type: Expected '\"+t+\"' but got '\"+e.type+\"'\")}static getExpressionContext(e,r){if(e){const n=e.get(t.KEY_CONTEXT_QUERY_TIMESTAMP),a=e.get(t.KEY_CONTEXT_BASEIRI);return Object.assign({now:n,baseIRI:a},r?{exists:s.createExistenceResolver(e,r)}:{})}return{}}static createExistenceResolver(e,t){return async(r,n)=>{const o=a.materializeOperation(r.input,n),i=await t.mediate({operation:o,context:e}),c=s.getSafeBindings(i);return new Promise((e,t)=>{c.bindingsStream.on(\"end\",()=>{e(!1)}),c.bindingsStream.on(\"error\",t),c.bindingsStream.on(\"data\",()=>{c.bindingsStream.close(),e(!0)})}).then(e=>r.not?!e:e)}}}t.ActorQueryOperation=s,t.getMetadata=function(e){return e.metadata?e.metadata():Promise.resolve({})},t.KEY_CONTEXT_BGP_CURRENTMETADATA=\"@comunica/bus-query-operation:bgpCurrentMetadata\",t.KEY_CONTEXT_BGP_PARENTMETADATA=\"@comunica/bus-query-operation:bgpParentMetadata\",t.KEY_CONTEXT_BGP_PATTERNBINDINGS=\"@comunica/bus-query-operation:bgpPatternBindings\",t.KEY_CONTEXT_PATTERN_PARENTMETADATA=\"@comunica/bus-query-operation:patternParentMetadata\",t.KEY_CONTEXT_BASEIRI=\"@comunica/actor-init-sparql:baseIRI\",t.KEY_CONTEXT_QUERY_TIMESTAMP=\"@comunica/actor-init-sparql:queryTimestamp\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(43),a=r(7),s=r(5);function o(e){return n.Map(e)}function i(e){return n.Map.isMap(e)}function c(e,t){if(\"Variable\"===e.termType){const r=t.get(s.termToString(e));if(r)return r}return e}t.Bindings=o,t.isBindings=i,t.ensureBindings=function(e){return i(e)?e:o(e)},t.materializeOperation=function e(t,r,n=!1){return a.Util.mapOperation(t,{path:(e,t)=>({recurse:!1,result:t.createPath(c(e.subject,r),e.predicate,c(e.object,r),c(e.graph,r))}),pattern:(e,t)=>({recurse:!1,result:t.createPattern(c(e.subject,r),c(e.predicate,r),c(e.object,r),c(e.graph,r))}),extend:t=>{if(r.has(s.termToString(t.variable))){if(n)throw new Error(`Tried to bind variable ${s.termToString(t.variable)} in a BIND operator.`);return{recurse:!0,result:e(t.input,r,n)}}return{recurse:!0,result:t}},group:(e,t)=>{if(n){for(const t of e.variables)if(r.has(s.termToString(t)))throw new Error(`Tried to bind variable ${s.termToString(t)} in a GROUP BY operator.`);return{recurse:!0,result:e}}{const n=e.variables.filter(e=>!r.has(s.termToString(e)));return{recurse:!0,result:t.createGroup(e.input,n,e.aggregates)}}},project:(e,t)=>{if(n){for(const t of e.variables)if(r.has(s.termToString(t)))throw new Error(`Tried to bind variable ${s.termToString(t)} in a SELECT operator.`);return{recurse:!0,result:e}}{const n=e.variables.filter(e=>!r.has(s.termToString(e)));return{recurse:!0,result:t.createProject(e.input,n)}}},values:(e,t)=>{if(!n){const n=e.variables.filter(e=>!r.has(s.termToString(e))),a=e.bindings.map(e=>{const t=Object.assign({},e);return r.forEach((e,r)=>delete t[r]),t});return{recurse:!0,result:t.createValues(n,a)}}for(const t of e.variables)if(r.has(s.termToString(t)))throw new Error(`Tried to bind variable ${s.termToString(t)} in a VALUES operator.`);return{recurse:!1,result:e}},expression:(e,t)=>{if(\"term\"===e.expressionType)return{recurse:!1,result:t.createTermExpression(c(e.term,r))};if(\"aggregate\"===e.expressionType&&\"variable\"in e&&r.has(s.termToString(e.variable))){if(n)throw new Error(`Tried to bind ${s.termToString(e.variable)} in a ${e.aggregator} aggregate.`);return{recurse:!0,result:e}}return{recurse:!0,result:e}}})},t.materializeTerm=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(53);class a extends n.ActorQueryOperation{constructor(e,t){if(super(Object.assign(Object.assign({},e),{operationName:t})),!this.operationName)throw new Error('A valid \"operationName\" argument must be provided.')}async test(e){if(!e.operation)throw new Error(\"Missing field 'operation' in a query operation action.\");if(e.operation.type!==this.operationName)throw new Error(\"Actor \"+this.name+\" only supports \"+this.operationName+\" operations, but got \"+e.operation.type);const t=e.operation;return this.testOperation(t,e.context)}async run(e){const r=e.operation,a=e.context&&e.context.set(t.KEY_CONTEXT_QUERYOPERATION,r),s=await this.runOperation(r,a);return s.metadata&&(s.metadata=n.ActorQueryOperation.cachifyMetadata(s.metadata)),s}}t.ActorQueryOperationTyped=a,t.KEY_CONTEXT_QUERYOPERATION=\"@comunica/bus-query-operation:operation\"},function(e,t){e.exports=require(\"lodash.union\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(174))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(176))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(177))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(178))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}getContextSources(e){return e?e.get(t.KEY_CONTEXT_SOURCES):void 0}getContextSource(e){return e?e.get(t.KEY_CONTEXT_SOURCE):void 0}getContextSourceUrl(e){if(e){let t=o(e);const r=t.indexOf(\"#\");return r>=0&&(t=t.substr(0,r)),t}}hasContextSingleSource(e){const t=this.getContextSource(e);return!(!t||\"string\"!=typeof t&&!t.value)}hasContextSingleSourceOfType(e,t){const r=this.getContextSource(t);return!(!r||s(r)!==e||!o(r))}}function s(e){return\"string\"==typeof e?\"\":e.type}function o(e){return\"string\"==typeof e?e:e.value}t.ActorRdfResolveQuadPattern=a,t.getDataSourceType=s,t.getDataSourceValue=o,t.KEY_CONTEXT_SOURCES=\"@comunica/bus-rdf-resolve-quad-pattern:sources\",t.KEY_CONTEXT_SOURCE=\"@comunica/bus-rdf-resolve-quad-pattern:source\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(180))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(64)),n(r(181))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorRdfMetadata=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(182))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(183))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorRdfMetadataExtract=a},function(e,t){e.exports=require(\"rdf-store-stream\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(70);t.GraphQlQueryEngine=class{constructor(e){this.comunicaEngine=e}async query(e,t){const{data:r}=await this.comunicaEngine.resultToString(await this.comunicaEngine.query(e,t),\"application/sparql-results+json\");return JSON.parse(await n(r))}}},function(e,t){e.exports=require(\"stream-to-string\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(187))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(188))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(189))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(192))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(76)),n(r(195))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorHttpInvalidate=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(196))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(197))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(201))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(202))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(204))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(205))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(206))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(210))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(213))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(87)),n(r(220))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(18),a=r(218),s=r(31);class o extends a.ActorRdfDereferenceMediaMappings{constructor(e){super(e)}async test(e){if(!/^https?:/.test(e.url))throw new Error(`Cannot retrieve ${e.url} because it is not an HTTP(S) URL.`);return!0}async run(e){const t=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes,r=this.mediaTypesToAcceptString(t,this.getMaxAcceptHeaderLength()),a=new Headers;a.append(\"Accept\",r);for(const t in e.headers)a.append(t,e.headers[t]);const i={context:e.context,init:{headers:a,method:e.method},input:e.url};let c;try{c=await this.mediatorHttp.mediate(i)}catch(t){return this.handleDereferenceError(e,t)}const d=s.resolve(c.url,e.url),u={};c.headers.forEach((e,t)=>u[t]=e);const p=n.ActorHttp.toNodeReadable(c.body);if(200!==c.status){const t=new Error(`Could not retrieve ${e.url} (${c.status}: ${c.statusText||\"unknown error\"})`);return this.handleDereferenceError(e,t)}let l=o.REGEX_MEDIATYPE.exec(c.headers.get(\"content-type\")||\"\")[0];l&&\"text/plain\"!==l||(l=this.getMediaTypeFromExtension(c.url));const m={baseIRI:d,headers:c.headers,input:p};let f;try{f=(await this.mediatorRdfParseHandle.mediate({context:e.context,handle:m,handleMediaType:l})).handle}catch(t){return this.handleDereferenceError(e,t)}return{url:d,quads:this.handleDereferenceStreamErrors(e,f.quads),triples:f.triples,headers:u}}mediaTypesToAcceptString(e,t){t-=10;const r=[],n=Object.keys(e).map(t=>({mediaType:t,priority:e[t]})).sort((e,t)=>t.priority-e.priority);let a=0;for(const e of n){const n=e.mediaType+(1!==e.priority?\";q=\"+e.priority.toFixed(3).replace(/0*$/,\"\"):\"\");if(a+n.length>t){r.push(\"*/*;q=0.1\");break}r.push(n),a+=n.length}return r.length?r.join(\",\"):\"*/*\"}}t.ActorRdfDereferenceHttpParseBase=o,o.REGEX_MEDIATYPE=/^[^ ;]*/},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1),a=r(10);class s extends n.Actor{constructor(e){super(e)}isHardError(e){return!e.context||!e.context.get(t.KEY_CONTEXT_LENIENT)}handleDereferenceStreamErrors(e,t){return this.isHardError(e)||(t.on(\"error\",r=>{this.logError(e.context,r.message,{url:e.url}),t.push(null)}),t=t.pipe(new a.PassThrough({objectMode:!0}))),t}async handleDereferenceError(e,t){if(this.isHardError(e))throw t;{this.logError(e.context,t.message);const r=new a.Readable;return r.push(null),{url:e.url,quads:r}}}}t.ActorRdfDereference=s,t.KEY_CONTEXT_LENIENT=\"@comunica/actor-init-sparql:lenient\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(221))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(223))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(224)),n(r(92))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(14),a=r(93),s=r(3),o=r(8),i=r(16),c=r(28),d=r(15),u=r(7);class p{constructor(e,t,r,a){this.mediatorResolveQuadPattern=e,this.sources=t.get(n.KEY_CONTEXT_SOURCES),this.contextDefault=t.delete(n.KEY_CONTEXT_SOURCES),this.emptyPatterns=r,this.sourceIds=new Map,this.skipEmptyPatterns=a,this.algebraFactory=new u.Factory,this.skipEmptyPatterns&&this.sources.iterator().on(\"data\",e=>{this.emptyPatterns.has(e)||this.emptyPatterns.set(e,[])})}static isTermBound(e){return\"Variable\"!==e.termType}static isSubPatternOf(e,t){return(!p.isTermBound(t.subject)||t.subject.equals(e.subject))&&(!p.isTermBound(t.predicate)||t.predicate.equals(e.predicate))&&(!p.isTermBound(t.object)||t.object.equals(e.object))&&(!p.isTermBound(t.graph)||t.graph.equals(e.graph))}static skolemizeTerm(e,t){return\"BlankNode\"===e.termType?new a.BlankNodeScoped(`bc_${t}_${e.value}`,s.namedNode(`${p.SKOLEM_PREFIX}${t}:${e.value}`)):e}static skolemizeQuad(e,t){return d.mapTerms(e,e=>p.skolemizeTerm(e,t))}static deskolemizeTerm(e,t){if(\"BlankNode\"===e.termType&&\"skolemized\"in e&&(e=e.skolemized),\"NamedNode\"===e.termType&&e.value.startsWith(p.SKOLEM_PREFIX)){const r=e.value.indexOf(\":\",p.SKOLEM_PREFIX.length);if(e.value.substr(p.SKOLEM_PREFIX.length,r-p.SKOLEM_PREFIX.length)===t){const t=e.value.substr(r+1,e.value.length);return s.blankNode(t)}return null}return e}isSourceEmpty(e,t){if(!this.skipEmptyPatterns)return!1;const r=this.emptyPatterns.get(e);if(r)for(const e of r)if(p.isSubPatternOf(t,e))return!0;return!1}getSourceId(e){let t=this.sourceIds.get(e);return void 0===t&&(t=\"\"+this.sourceIds.size,this.sourceIds.set(e,t)),t}matchLazy(e,t,r,a){if(e instanceof RegExp||t instanceof RegExp||r instanceof RegExp||a instanceof RegExp)throw new Error(\"FederatedQuadSource does not support matching by regular expressions.\");const d={totalItems:0};let u=1,l=0;const m=(e,t,r,n)=>{this.skipEmptyPatterns&&!e&&r&&!this.isSourceEmpty(t,r)&&this.emptyPatterns.get(t).push(r),u||(n&&1===l?y.emit(\"metadata\",n):y.emit(\"metadata\",d))},f=this.sources.iterator(),h=f.map(c=>{const f=this.getSourceId(c);return u++,l++,new i.PromiseProxyIterator(async()=>{const i=e?p.deskolemizeTerm(e,f):s.variable(\"vs\"),l=t?p.deskolemizeTerm(t,f):s.variable(\"vp\"),h=r?p.deskolemizeTerm(r,f):s.variable(\"vo\"),y=a?p.deskolemizeTerm(a,f):s.variable(\"vg\");let g;const b=this.contextDefault.set(n.KEY_CONTEXT_SOURCE,{type:n.getDataSourceType(c),value:n.getDataSourceValue(c)});let w;return w=i&&l&&h&&y&&!this.isSourceEmpty(c,g=this.algebraFactory.createPattern(i,l,h,y))?await this.mediatorResolveQuadPattern.mediate({pattern:g,context:b}):{data:new o.EmptyIterator,metadata:()=>Promise.resolve({totalItems:0})},w.metadata?w.metadata().then(e=>{!e.totalItems&&0!==e.totalItems||!isFinite(e.totalItems)?(d.totalItems=1/0,u=0,m(1/0,c,g,e)):(d.totalItems+=e.totalItems,u--,m(e.totalItems,c,g,e))}):(d.totalItems=1/0,u=0,m(1/0,c,g)),w.data.map(e=>p.skolemizeQuad(e,f))})}),y=new c.RoundRobinUnionIterator(h.clone());return y.on(\"newListener\",e=>{\"metadata\"===e&&setImmediate(()=>h.clone().each(e=>e.loadSource()))}),f.on(\"end\",()=>{--u||y.emit(\"metadata\",d)}),y}match(e,t,r,n){return this.matchLazy(e,t,r,n)}}t.FederatedQuadSource=p,p.SKOLEM_PREFIX=\"urn:comunica_skolem:source_\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(225))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(226))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(227))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(229)),n(r(97))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(230);t.MediatedQuadSource=class{constructor(e,t,r,n,a){this.cacheSize=e,this.context=t,this.firstUrl=r,this.forceSourceType=n,this.mediators=a}matchLazy(e,t,r,a){if(e instanceof RegExp||t instanceof RegExp||r instanceof RegExp||a instanceof RegExp)throw new Error(\"MediatedQuadSource does not support matching by regular expressions.\");const s=new n.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,this.context,this.forceSourceType,e,t,r,a,this.firstUrl,this.mediators);return this.sourcesState?s.setSourcesState(this.sourcesState):(s.setSourcesState(),this.sourcesState=s.sourcesState),s}match(e,t,r,n){return this.matchLazy(e,t,r,n)}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(233))},function(e,t){e.exports=require(\"isomorphic-fetch\")},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(235)),n(r(236))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(237))},function(e,t){e.exports=require(\"fs\")},function(e,t){e.exports=require(\"minimist\")},function(e,t){e.exports=require(\"asyncreiterable\")},function(e,t){e.exports=require(\"url\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(107));const n=r(107).ActorSparqlSerializeTree.bindingsStreamToGraphQl;t.bindingsStreamToGraphQl=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17),a=r(1),s=r(251),o=r(10);class i extends n.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e)}static bindingsStreamToGraphQl(e,t,r){const n=a.ensureActionContext(t);return new Promise((t,a)=>{const o=[],i=new s.Converter(r),c={singularizeVariables:n.get(\"@comunica/actor-init-sparql:singularizeVariables\")||{}};e.on(\"error\",a),e.on(\"data\",e=>{const t=e.toJS(),r={};for(const e in t)r[e.substr(1)]=t[e];o.push(r)}),e.on(\"end\",()=>{t(i.bindingsToTree(o,c))})})}async testHandleChecked(e){if(\"bindings\"!==e.type)throw new Error(\"This actor can only handle bindings streams.\");return!0}async runHandle(e,t){const r=new o.Readable;r._read=()=>{};const n=e.bindingsStream;return n.on(\"error\",e=>r.emit(\"error\",e)),i.bindingsStreamToGraphQl(n,e.context,{materializeRdfJsTerms:!0}).then(e=>{r.push(JSON.stringify(e,null,\"  \")),r.push(null)}).catch(e=>r.emit(\"error\",e)),{data:r}}}t.ActorSparqlSerializeTree=i},function(e,t){e.exports=require(\"follow-redirects\")},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(258)),n(r(259))},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(262)),n(r(263))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(283))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(284))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(285))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(286))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(287))},function(e,t){e.exports=require(\"lodash.uniq\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(288))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(290))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(292))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(294),s=r(5);class o extends n.ActorQueryOperationTypedMediated{constructor(e,t){if(super(e,t),!o.doesHashAlgorithmExist(this.hashAlgorithm))throw new Error(\"The given hash algorithm is not present in this version of Node: \"+this.hashAlgorithm);if(!o.doesDigestAlgorithmExist(this.digestAlgorithm))throw new Error(\"The given digest algorithm is not present in this version of Node: \"+this.digestAlgorithm)}static doesHashAlgorithmExist(e){return a.getHashes().indexOf(e)>=0}static doesDigestAlgorithmExist(e){return[\"latin1\",\"hex\",\"base64\"].indexOf(e)>=0}static hash(e,t,n){const o=a.createHash(e);return o.update(r(295)(n.map(s.termToString))),o.digest(t)}}t.AbstractFilterHash=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(296))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(297))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(298))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(299))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(301))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(303))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(304))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(305))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(307))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(308))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(310))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(3),s=r(8),o=r(5),i=r(7);class c extends n.ActorQueryOperationTypedMediated{constructor(e,t){super(e,\"path\"),this.predicateType=t}async testOperation(e,t){if(e.predicate.type!==this.predicateType)throw new Error(\"This Actor only supports \"+this.predicateType+\" Path operations.\");return!0}generateBlankNode(e,t){return t?!e||e.subject.value!==t&&e.object.value!==t?a.blankNode(t):this.generateBlankNode(e,t+\"b\"):this.generateBlankNode(e,\"b\")}async ALPeval(e,t,r){const n=new s.BufferedIterator;return await this.ALP(e,t,r,{},n,{count:0}),n}async ALP(e,t,r,a,s,i){const d=o.termToString(e);if(a[d])return;s._push(e),a[d]=e;const u=this.generateBlankNode(),p=o.termToString(u),l=c.FACTORY.createPath(e,t,u),m=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:l,context:r}));i.count++,m.bindingsStream.on(\"data\",async e=>{const n=e.get(p);await this.ALP(n,t,r,a,s,i)}),m.bindingsStream.on(\"end\",()=>{0==--i.count&&s.close()})}}t.ActorAbstractPath=c,c.FACTORY=new i.Factory},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(311))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(312))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(313))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(314))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(315))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(316))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(317))},function(e,t){e.exports=require(\"uuid\")},function(e,t,r){const n=new(r(41).LoggerVoid)({}),a=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/Bus/Init\"}),s=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/Bus/Http\"}),o=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/Bus/RdfParse\"}),i=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-dereference/Bus/RdfDereference\"}),c=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/Bus/RdfJoin\"}),d=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/Bus/RdfParseHtml\"}),u=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/Bus/RdfResolveQuadPattern\"}),p=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/Bus/RdfMetadata\"}),l=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/Bus/RdfMetadataExtract\"}),m=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia/Bus/RdfResolveHypermedia\"}),f=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/Bus/RdfResolveHypermediaLinks\"}),h=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/Bus/HttpInvalidate\"}),y=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/Bus/OptimizeQueryOperation\"}),g=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-sparql-parse/Bus/SparqlParse\"}),b=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-sparql-serialize/Bus/SparqlSerialize\"}),w=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/Bus/ContextPreprocess\"}),O=new(r(1).BusIndexed)({actorIdentifierFields:[\"operationName\"],actionIdentifierFields:[\"operation\",\"type\"],name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/Bus/QueryOperation\"}),v=new(r(153).ActorHttpSolidAuthFetch)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#myHttpFetcher\",bus:s}),S=new(r(22).MediatorNumber)({field:\"time\",type:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin\",ignoreErrors:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#mediatorHttp\",bus:s}),x=new(r(11).MediatorCombineUnion)({field:\"mediaTypes\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#mediatorRdfParseMediatypes\",bus:o}),q=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#mediatorRdfParseHandle\",bus:o}),T=new(r(46).ActorRdfParseN3)({mediaTypes:{\"application/n-quads\":\"1.0\",\"application/trig\":\"0.95\",\"application/n-triples\":\"0.8\",\"text/turtle\":\"0.5\",\"text/n3\":\"0.35\"},mediaTypeFormats:{\"application/n-quads\":\"http://www.w3.org/ns/formats/N-Quads\",\"application/trig\":\"http://www.w3.org/ns/formats/TriG\",\"application/n-triples\":\"http://www.w3.org/ns/formats/N-Triples\",\"text/turtle\":\"http://www.w3.org/ns/formats/Turtle\",\"text/n3\":\"http://www.w3.org/ns/formats/N3\"},priorityScale:\"1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserN3\",bus:o}),P=new(r(49).ActorRdfParseRdfXml)({mediaTypes:{\"application/rdf+xml\":\"1.0\"},mediaTypeFormats:{\"application/rdf+xml\":\"http://www.w3.org/ns/formats/RDF_XML\"},priorityScale:\"5.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserRdfXml\",bus:o}),A=new(r(50).ActorRdfParseXmlRdfa)({mediaTypes:{\"application/xml\":\"1.0\",\"text/xml\":\"1.0\",\"image/svg+xml\":\"1.0\"},mediaTypeFormats:{\"application/xml\":\"http://www.w3.org/ns/formats/RDFa\",\"text/xml\":\"http://www.w3.org/ns/formats/RDFa\",\"image/svg+xml\":\"http://www.w3.org/ns/formats/RDFa\"},priorityScale:\"3.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserXmlRdfa\",bus:o}),j=new(r(11).MediatorCombineUnion)({field:\"mediaTypes\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#mediatorRdfParseMediatypes\",bus:o}),_=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#mediatorRdfParseHandle\",bus:o}),R=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfDereference\",bus:i}),E=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorRdfJoin\",bus:c}),M=new(r(52).ActorRdfJoinSymmetricHash)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/join.json#myRdfJoinActor\",bus:c}),I=new(r(57).ActorRdfParseHtml)({busRdfParseHtml:d,mediaTypes:{\"text/html\":\"1.0\",\"application/xhtml+xml\":\"0.9\"},mediaTypeFormats:{\"text/html\":\"http://www.w3.org/ns/formats/HTML\",\"application/xhtml+xml\":\"http://www.w3.org/ns/formats/HTML\"},priorityScale:\"2.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtml\",bus:o}),C=new(r(58).ActorRdfParseHtmlRdfa)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtmlRdfa\",bus:d}),Q=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorResolveQuadPattern\",bus:u}),k=new(r(60).ActorRdfResolveQuadPatternRdfJsSource)({name:\"config-sets:resolve-file.json#myRdfRdfJsSourceQuadPatternResolver\",bus:u}),N=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorMetadata\",bus:p}),B=new(r(62).ActorRdfMetadataPrimaryTopic)({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataPrimaryTopic\",bus:p}),D=new(r(65).ActorRdfMetadataAll)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataAll\",bus:p}),H=new(r(11).MediatorCombineUnion)({field:\"metadata\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorMetadataExtract\",bus:l}),L=new(r(66).ActorRdfMetadataExtractHydraControls)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataExtractHydraControls\",bus:l}),F=new(r(71).ActorRdfMetadataExtractHydraCount)({predicates:[\"http://www.w3.org/ns/hydra/core#totalItems\",\"http://rdfs.org/ns/void#triples\"],name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataExtractHydraCount\",bus:l}),z=new(r(72).ActorRdfMetadataExtractSparqlService)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#myRdfMetadataExtractSparqlService\",bus:l}),U=new(r(73).ActorRdfResolveHypermediaNone)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaNoneResolver\",bus:m}),Y=new(r(22).MediatorNumber)({field:\"filterFactor\",type:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMax\",ignoreErrors:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfResolveHypermedia\",bus:m}),J=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfResolveHypermediaLinks\",bus:f}),X=new(r(74).ActorRdfResolveHypermediaLinksNext)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaLinksNext\",bus:f}),G=new(r(75).ActorHttpInvalidateListenable)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-resolve-quad-pattern-hypermedia/Actor/RdfResolveQuadPattern/Hypermedia/httpInvalidator#default\",bus:h}),$=new(r(77).MediatorAll)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorHttpInvalidate\",bus:h}),K=new(r(78).ActorOptimizeQueryOperationJoinBgp)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-optimize.json#myJoinBgpOptimizer\",bus:y}),V=new(r(27).MediatorCombinePipeline)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorOptimizeQueryOperation\",bus:y}),W=new(r(79).ActorSparqlParseAlgebra)({prefixes:{rdf:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",rdfs:\"http://www.w3.org/2000/01/rdf-schema#\",owl:\"http://www.w3.org/2002/07/owl#\",xsd:\"http://www.w3.org/2001/XMLSchema#\",dc:\"http://purl.org/dc/terms/\",dcterms:\"http://purl.org/dc/terms/\",dc11:\"http://purl.org/dc/elements/1.1/\",foaf:\"http://xmlns.com/foaf/0.1/\",geo:\"http://www.w3.org/2003/01/geo/wgs84_pos#\",dbpedia:\"http://dbpedia.org/resource/\",\"dbpedia-owl\":\"http://dbpedia.org/ontology/\",dbpprop:\"http://dbpedia.org/property/\",schema:\"http://schema.org/\",skos:\"http://www.w3.org/2008/05/skos#\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-parsers.json#mySparqlParser\",bus:g}),Z=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorSparqlParse\",bus:g}),ee=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorSparqlSerialize\",bus:b}),te=new(r(11).MediatorCombineUnion)({field:\"mediaTypes\",name:\"_:b0bnode251\",bus:b}),re=new(r(11).MediatorCombineUnion)({field:\"mediaTypeFormats\",name:\"_:b1bnode251\",bus:b}),ne=new(r(27).MediatorCombinePipeline)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorContextPreprocess\",bus:w}),ae=new(r(22).MediatorNumber)({field:\"httpRequests\",type:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin\",ignoreErrors:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorQueryOperation\",bus:O}),se=new(r(81).ActorQueryOperationBgpEmpty)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myEmptyBgpQueryOperator\",bus:O}),oe=new(r(82).ActorQueryOperationValues)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myValuesQueryOperator\",bus:O}),ie=new(r(83).ActorRdfParseJsonLd)({mediatorHttp:S,mediaTypes:{\"application/ld+json\":\"1.0\",\"application/json\":\"0.5\"},mediaTypeFormats:{\"application/ld+json\":\"http://www.w3.org/ns/formats/JSON-LD\",\"application/json\":\"http://www.w3.org/ns/formats/JSON-LD\"},priorityScale:\"9.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserJsonLd\",bus:o}),ce=new(r(84).ActorRdfResolveHypermediaSparql)({mediatorHttp:S,checkUrlSuffix:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#mySparqlQuadPatternResolver\",bus:m}),de=new(r(85).ActorQueryOperationSparqlEndpoint)({mediatorHttp:S,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#mySparqlEndpointResolver\",bus:O}),ue=new(r(86).ActorRdfDereferenceHttpParse)({mediatorHttp:S,mediatorRdfParseMediatypes:x,mediatorRdfParseHandle:q,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,mediaMappings:{ttl:\"text/turtle\",turtle:\"text/turtle\",nt:\"application/n-triples\",ntriples:\"application/n-triples\",nq:\"application/n-quads\",nquads:\"application/n-quads\",rdf:\"application/rdf+xml\",rdfxml:\"application/rdf+xml\",owl:\"application/rdf+xml\",n3:\"text/n3\",trig:\"application/trig\",jsonld:\"application/ld+json\",json:\"application/json\",html:\"text/html\",htm:\"text/html\",xhtml:\"application/xhtml+xml\",xht:\"application/xhtml+xml\",xml:\"application/xml\",svg:\"image/svg+xml\",svgz:\"image/svg+xml\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#myRdfDereferencer\",bus:i}),pe=new(r(89).ActorRdfParseHtmlScript)({mediatorRdfParseMediatypes:j,mediatorRdfParseHandle:_,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtmlScript\",bus:d}),le=new(r(90).ActorRdfJoinMultiSmallest)({mediatorJoin:E,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/join.json#myRdfJoinMultiActor\",bus:c}),me=new(r(91).ActorRdfResolveQuadPatternFederated)({mediatorResolveQuadPattern:Q,skipEmptyPatterns:!1,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-federated.json#myFederatedQuadPatternResolver\",bus:u}),fe=new(r(94).ActorQueryOperationQuadpattern)({mediatorResolveQuadPattern:Q,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myQuadPatternQueryOperator\",bus:O}),he=new(r(95).ActorRdfResolveHypermediaQpf)({mediatorMetadata:N,mediatorMetadataExtract:H,mediatorRdfDereference:R,subjectUri:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject\",predicateUri:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate\",objectUri:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#object\",graphUri:\"http://www.w3.org/ns/sparql-service-description#graph\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaQpfResolver\",bus:m}),ye=new(r(96).ActorRdfResolveQuadPatternHypermedia)({mediatorRdfDereference:R,mediatorMetadata:N,mediatorMetadataExtract:H,mediatorRdfResolveHypermedia:Y,mediatorRdfResolveHypermediaLinks:J,cacheSize:100,httpInvalidator:G,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myQuadPatternHypermediaResolver\",bus:u}),ge=new(r(34).ActorInitSparql)({mediatorOptimizeQueryOperation:V,mediatorQueryOperation:ae,mediatorSparqlParse:Z,mediatorSparqlSerialize:ee,mediatorSparqlSerializeMediaTypeCombiner:te,mediatorSparqlSerializeMediaTypeFormatCombiner:re,mediatorContextPreprocess:ne,mediatorHttpInvalidate:$,logger:n,contextKeyShortcuts:{source:\"@comunica/bus-rdf-resolve-quad-pattern:source\",sources:\"@comunica/bus-rdf-resolve-quad-pattern:sources\",initialBindings:\"@comunica/actor-init-sparql:initialBindings\",queryFormat:\"@comunica/actor-init-sparql:queryFormat\",baseIRI:\"@comunica/actor-init-sparql:baseIRI\",log:\"@comunica/core:log\",datetime:\"@comunica/actor-http-memento:datetime\",queryTimestamp:\"@comunica/actor-init-sparql:queryTimestamp\",httpProxyHandler:\"@comunica/actor-http-proxy:httpProxyHandler\",lenient:\"@comunica/actor-init-sparql:lenient\"},name:\"urn:comunica:sparqlinit\",bus:a});new(r(111).ActorQueryOperationAsk)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myAskQueryOperator\",bus:O}),new(r(112).ActorQueryOperationService)({forceSparqlEndpoint:!1,mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myServiceQueryOperator\",bus:O}),new(r(113).ActorQueryOperationSlice)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mySliceQueryOperator\",bus:O}),new(r(114).ActorQueryOperationBgpSingle)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mySingleBgpQueryOperator\",bus:O}),new(r(115).ActorQueryOperationBgpLeftDeepSmallest)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myLeftDeepSmallestBgpQueryOperator\",bus:O}),new(r(117).ActorQueryOperationConstruct)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myConstructQueryOperator\",bus:O}),new(r(118).ActorQueryOperationDescribeSubject)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myDescribeQueryOperator\",bus:O}),new(r(119).ActorQueryOperationDistinctHash)({hashAlgorithm:\"sha1\",digestAlgorithm:\"base64\",mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myDistinctQueryOperator\",bus:O}),new(r(121).ActorQueryOperationExtend)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myExtendQueryOperator\",bus:O}),new(r(122).ActorQueryOperationReducedHash)({hashAlgorithm:\"sha1\",digestAlgorithm:\"base64\",cacheSize:100,mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myReducedQueryOperator\",bus:O}),new(r(123).ActorQueryOperationFilterSparqlee)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myFilterQueryOperator\",bus:O}),new(r(124).ActorQueryOperationFromQuad)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myFromQueryOperator\",bus:O}),new(r(125).ActorQueryOperationGroup)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myGroupQueryOperator\",bus:O}),new(r(126).ActorQueryOperationJoin)({mediatorJoin:E,mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myJoinQueryOperator\",bus:O}),new(r(127).ActorQueryOperationLeftJoinLeftDeep)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myLeftJoinQueryOperator\",bus:O}),new(r(128).ActorQueryOperationOrderBySparqlee)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myOrderByQueryOperator\",bus:O}),new(r(129).ActorQueryOperationProject)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myProjectQueryOperator\",bus:O}),new(r(37).ActorQueryOperationUnion)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myUnionQueryOperator\",bus:O}),new(r(130).ActorQueryOperationMinus)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myMinusQueryOperator\",bus:O}),new(r(131).ActorQueryOperationPathAlt)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myAltPathOperator\",bus:O}),new(r(133).ActorQueryOperationPathInv)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myInvPathOperator\",bus:O}),new(r(134).ActorQueryOperationPathLink)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myLinkPathOperator\",bus:O}),new(r(135).ActorQueryOperationPathNps)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myNpsPathOperator\",bus:O}),new(r(136).ActorQueryOperationPathOneOrMore)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myOneOrMorePathOperator\",bus:O}),new(r(137).ActorQueryOperationPathSeq)({mediatorJoin:E,mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#mySeqPathOperator\",bus:O}),new(r(138).ActorQueryOperationPathZeroOrMore)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myZeroOrMorePathOperator\",bus:O}),new(r(139).ActorQueryOperationPathZeroOrOne)({mediatorQueryOperation:ae,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myZeroOrOnePathOperator\",bus:O});e.exports=ge},function(e,t,r){var n=r(143),a=r(39),s=r(144),o=r(40),i=r(145),c=r(146);function d(){}d.namedNode=function(e){return new o(e)},d.blankNode=function(e){return new n(e)},d.literal=function(e,t){return\"string\"==typeof t?-1===t.indexOf(\":\")?new s(e,t):new s(e,null,d.namedNode(t)):new s(e,null,t)},d.defaultGraph=function(){return d.defaultGraphInstance},d.variable=function(e){return new c(e)},d.triple=function(e,t,r){return d.quad(e,t,r)},d.quad=function(e,t,r,n){return new i(e,t,r,n||d.defaultGraphInstance)},d.defaultGraphInstance=new a,e.exports=d},function(e,t){function r(e){this.value=e||\"b\"+ ++r.nextId}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType=\"BlankNode\",r.nextId=0,e.exports=r},function(e,t,r){var n=r(40);function a(e,t,r){this.value=e,this.datatype=a.stringDatatype,this.language=\"\",t?(this.language=t,this.datatype=a.langStringDatatype):r&&(this.datatype=r)}a.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)},a.prototype.termType=\"Literal\",a.langStringDatatype=new n(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString\"),a.stringDatatype=new n(\"http://www.w3.org/2001/XMLSchema#string\"),e.exports=a},function(e,t,r){var n=r(39);function a(e,t,r,a){this.subject=e,this.predicate=t,this.object=r,this.graph=a||new n}a.prototype.equals=function(e){return!!e&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)},e.exports=a},function(e,t){function r(e){this.value=e}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType=\"Variable\",e.exports=r},function(e,t){e.exports=require(\"node-docker-api\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Logger{debug(e,t){}error(e,t){}fatal(e,t){}info(e,t){}trace(e,t){}warn(e,t){}}t.LoggerVoid=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(42);class a extends n.Bus{constructor(e){super(e),this.actorsIndex={}}subscribe(e){const t=this.getActorIdentifier(e)||\"_undefined_\";let r=this.actorsIndex[t];r||(r=this.actorsIndex[t]=[]),r.push(e),super.subscribe(e)}unsubscribe(e){const t=this.getActorIdentifier(e)||\"_undefined_\",r=this.actorsIndex[t];if(r){const n=r.indexOf(e);n>=0&&r.splice(n,1),0===r.length&&delete this.actorsIndex[t]}return super.unsubscribe(e)}publish(e){const t=this.getActionIdentifier(e);if(t){return(this.actorsIndex[t]||[]).concat(this.actorsIndex._undefined_||[]).map(t=>({actor:t,reply:t.test(e)}))}return super.publish(e)}getActorIdentifier(e){return this.actorIdentifierFields.reduce((e,t)=>e[t],e)}getActionIdentifier(e){return this.actionIdentifierFields.reduce((e,t)=>e[t],e)}}t.BusIndexed=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.ActionObserver=class{constructor(e){r(21)(this,e)}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(43),a=r(44);class s{constructor(e){this.beforeActors=[],r(21)(this,e),this.bus.subscribe(this),this.beforeActors.length&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(e){return e&&e.get(a.KEY_CONTEXT_LOG)}runObservable(e){const t=this.run(e);return this.bus.onRun(this,e,t),t}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(e,t){return t||(t={}),t.actor=this.name,t}logTrace(e,t,r){const n=s.getContextLogger(e);n&&n.trace(t,this.getDefaultLogData(e,r))}logDebug(e,t,r){const n=s.getContextLogger(e);n&&n.debug(t,this.getDefaultLogData(e,r))}logInfo(e,t,r){const n=s.getContextLogger(e);n&&n.info(t,this.getDefaultLogData(e,r))}logWarn(e,t,r){const n=s.getContextLogger(e);n&&n.warn(t,this.getDefaultLogData(e,r))}logError(e,t,r){const n=s.getContextLogger(e);n&&n.error(t,this.getDefaultLogData(e,r))}logFatal(e,t,r){const n=s.getContextLogger(e);n&&n.fatal(t,this.getDefaultLogData(e,r))}}function o(e){return n.Map(e)}t.Actor=s,t.ActionContext=o,t.ensureActionContext=function(e){return n.Map.isMap(e)?e:o(e)}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.Mediator=class{constructor(e){r(21)(this,e)}publish(e){const t=this.bus.publish(e);if(!t.length)throw new Error(\"No actors are able to reply to a message in the bus \"+this.bus.name);return t}async mediateActor(e){return await this.mediateWith(e,this.publish(e))}async mediate(e){return(await this.mediateActor(e)).runObservable(e)}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(154))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(18),a=r(13);class s extends n.ActorHttp{constructor(e){super(e)}async test(e){return{time:1/0}}run(e){return a.fetch(e.input,e.init)}}t.ActorHttpSolidAuthFetch=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}static toNodeReadable(e){return r(156)(e)?e:r(157).toNodeReadable(e)}}t.ActorHttp=a},function(e,t){e.exports=require(\"is-stream\")},function(e,t){e.exports=require(\"web-streams-node\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Mediator{constructor(e){super(e),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case a.MIN:return e=>e.reduce((e,t,r)=>{const n=this.getOrDefault(t[this.field],1/0);return null!==n&&(isNaN(e[0])||e[0]>n)?[n,r]:e},[NaN,-1])[1];case a.MAX:return e=>e.reduce((e,t,r)=>{const n=this.getOrDefault(t[this.field],-1/0);return null!==n&&(isNaN(e[0])||e[0]<n)?[n,r]:e},[NaN,-1])[1]}throw new Error('No valid \"type\" value was given, must be either '+a.MIN+\" or \"+a.MAX+\", but got: \"+this.type)}getOrDefault(e,t){return void 0===e?t:e}async mediateWith(e,t){let r=t.map(({reply:e})=>e);const n=[];if(this.ignoreErrors){const e={};e[this.field]=null,r=r.map(t=>t.catch(t=>(n.push(t),e)))}const a=await Promise.all(r),s=this.indexPicker(a);if(s<0)throw new Error(\"All actors rejected their test in \"+this.name+\"\\n\"+n.map(e=>e.toString()).join(\"\\n\"));return t[s].actor}}t.MediatorNumber=a,a.MIN=\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin\",a.MAX=\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMax\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let t;try{t=this.publish(e)}catch(e){t=[]}await Promise.all(t.map(({reply:e})=>e));const r=await Promise.all(t.map(t=>t.actor.runObservable(e)));return this.combiner(r)}mediateWith(e,t){throw new Error(\"Method not supported.\")}createCombiner(){return e=>{const t={};return t[this.field]=r(45).apply({},[{}].concat(e.map(e=>e[this.field]))),t}}}t.MediatorCombineUnion=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Mediator{constructor(e){super(e)}mediateWith(e,t){return new Promise((e,r)=>{const n=[];for(const a of t)a.reply.then(()=>{e(a.actor)}).catch(e=>{n.push(e),n.length===t.length&&r(new Error(this.name+\" mediated over all rejecting actors:\\n\"+n.map(e=>e.toString()).join(\"\\n\")))})})}}t.MediatorRace=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(24),a=r(48);class s extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){e.input.on(\"error\",e=>n.emit(\"error\",e));const n=e.input.pipe(new a.StreamParser({baseIRI:e.baseIRI}));return{quads:n,triples:\"text/turtle\"===t||\"application/n-triples\"===t||\"text/n3\"===t}}}t.ActorRdfParseN3=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(23);class a extends n.ActorAbstractMediaTyped{constructor(e){super(e)}}t.ActorRdfParse=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(47);class a extends n.ActorAbstractMediaTyped{constructor(e){super(e);const t=this.priorityScale||0===this.priorityScale?this.priorityScale:1;this.mediaTypes=r(164)(this.mediaTypes,e=>e*t),this.mediaTypes=Object.freeze(this.mediaTypes),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(e,t,r){if(!(t in this.mediaTypes))throw new Error(\"Unrecognized media type: \"+t);return await this.testHandleChecked(e,r)}async testMediaType(e){return!0}async getMediaTypes(e){return this.mediaTypes}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return this.mediaTypeFormats}}t.ActorAbstractMediaTypedFixed=a},function(e,t){e.exports=require(\"lodash.mapvalues\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(23);class a extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}t.ActorRdfParseFixedMediaTypes=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(24),a=r(167);class s extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){e.input.on(\"error\",e=>n.emit(\"error\",e));const n=e.input.pipe(new a.RdfXmlParser({baseIRI:e.baseIRI}));return{quads:n,triples:!0}}}t.ActorRdfParseRdfXml=s},function(e,t){e.exports=require(\"rdfxml-streaming-parser\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(24),a=r(51);class s extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){const n=e.headers&&e.headers.get(\"content-language\")||void 0;e.input.on(\"error\",e=>s.emit(\"error\",e));const s=e.input.pipe(new a.RdfaParser({baseIRI:e.baseIRI,profile:\"xml\",language:n}));return{quads:s,triples:!0}}}t.ActorRdfParseXmlRdfa=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(29),s=r(173);class o extends a.ActorRdfJoin{constructor(e){super(e,2)}static hash(e,t){return t.map(t=>e.get(t)).join(\"\")}async getOutput(e){const t=a.ActorRdfJoin.overlappingVariables(e);return{type:\"bindings\",bindingsStream:new s.SymmetricHashJoin(e.entries[0].bindingsStream,e.entries[1].bindingsStream,e=>o.hash(e,t),a.ActorRdfJoin.join),variables:a.ActorRdfJoin.joinVariables(e)}}async getIterations(e){return(await n.getMetadata(e.entries[0])).totalItems+(await n.getMetadata(e.entries[1])).totalItems}}t.ActorRdfJoinSymmetricHash=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(55);class a extends n.ActorQueryOperationTyped{constructor(e,t){super(e,t)}}t.ActorQueryOperationTypedMediated=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1),a=r(8);class s extends n.Actor{constructor(e,t,r){super(e),this.limitEntries=t||1/0,this.limitEntriesMin=r||!1}static overlappingVariables(e){return r(172).apply(this,e.entries.map(e=>e.variables))}static joinVariables(e){return r(56).apply(this,e.entries.map(e=>e.variables))}static join(...e){try{return e.reduce((e,t)=>e.mergeWith((e,t)=>{if(!e.equals(t))throw new Error;return e},t))}catch(e){return null}}static async iteratorsHaveMetadata(e,t){return Promise.all(e.entries.map(async e=>{if(!e.metadata)throw new Error;if(!(await e.metadata()).hasOwnProperty(t))throw new Error})).then(()=>!0).catch(()=>!1)}async test(e){if(e.entries.length<=1)return{iterations:0};if(this.limitEntriesMin?e.entries.length<this.limitEntries:e.entries.length>this.limitEntries)throw new Error(this.name+\" requires \"+this.limitEntries+\" sources at \"+(this.limitEntriesMin?\"least\":\"most\")+\". The input contained \"+e.entries.length+\".\");for(const t of e.entries)if(\"bindings\"!==t.type)throw new Error(\"Invalid type of a join entry: Expected 'bindings' but got '\"+t.type+\"'\");return await s.iteratorsHaveMetadata(e,\"totalItems\")?{iterations:await this.getIterations(e)}:{iterations:1/0}}async run(e){if(0===e.entries.length)return{bindingsStream:new a.EmptyIterator,metadata:()=>Promise.resolve({totalItems:0}),type:\"bindings\",variables:[]};if(1===e.entries.length)return e.entries[0];const t=this.getOutput(e);if(await s.iteratorsHaveMetadata(e,\"totalItems\")){const r=()=>Promise.all(e.entries.map(e=>e.metadata())).then(e=>e.reduce((e,t)=>e*t.totalItems,1)),n=await t;if(n.metadata){const e=n.metadata;n.metadata=()=>e().then(async e=>(e.hasOwnProperty(\"totalItems\")||(e.totalItems=await r()),e))}else n.metadata=()=>r().then(e=>({totalItems:e}));return n}return t}}t.ActorRdfJoin=s},function(e,t){e.exports=require(\"lodash.intersection\")},function(e,t){e.exports=require(\"asyncjoin\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(24),a=r(175),s=r(10);class o extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){const n=new s.Readable({objectMode:!0});return n._read=async()=>{n._read=()=>{};let t=1;const s=e=>n.emit(\"error\",e),o=()=>{0==--t&&n.push(null)},i={baseIRI:e.baseIRI,context:r,emit:e=>n.emit(\"data\",e),end:o,error:s,headers:e.headers};Promise.all(this.busRdfParseHtml.publish(i)).then(async r=>{t+=r.length;const n=[];for(const e of r){const{htmlParseListener:t}=await e.actor.run(i);n.push(t)}const c=new a.Parser({onclosetag:()=>{try{for(const e of n)e.onTagClose()}catch(e){s(e)}},onend:()=>{try{for(const e of n)e.onEnd()}catch(e){s(e)}o()},onopentag:(e,t)=>{try{for(const r of n)r.onTagOpen(e,t)}catch(e){s(e)}},ontext:e=>{try{for(const t of n)t.onText(e)}catch(e){s(e)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1});e.input.on(\"error\",s),e.input.pipe(c)})},{quads:n}}}t.ActorRdfParseHtml=o},function(e,t){e.exports=require(\"htmlparser2\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(59),a=r(51);class s extends n.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const t=e.headers?e.headers.get(\"content-type\"):null,r=e.headers&&e.headers.get(\"content-language\")||void 0,n=t&&t.indexOf(\"xml\")>=0?\"xhtml\":\"html\",s=new a.RdfaParser({baseIRI:e.baseIRI,profile:n,language:r});s.on(\"error\",e.error),s.on(\"data\",e.emit);const o=s.onEnd;return s.onEnd=()=>{o.call(s),e.end()},{htmlParseListener:s}}}t.ActorRdfParseHtmlRdfa=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorRdfParseHtml=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(14);class a extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e)}async test(e){if(!this.hasContextSingleSourceOfType(\"rdfjsSource\",e.context))throw new Error(this.name+\" requires a single source with an rdfjsSource to be present in the context.\");const t=this.getContextSource(e.context);if(!t||\"string\"==typeof t||!t.value.match)throw new Error(this.name+\" received an invalid rdfjsSource.\");return!0}getMetadata(e,t,r,n){return()=>Promise.resolve({})}async getSource(e){return this.getContextSource(e).value}}t.ActorRdfResolveQuadPatternRdfJsSource=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(8),a=r(61);class s extends a.ActorRdfResolveQuadPattern{constructor(e){super(e)}static variableToUndefined(e){if(!e||\"Variable\"!==e.termType)return e}static cachifyMetadata(e){let t;return()=>t||(t=e())}async test(e){return!0}async run(e){const t=await this.getSource(e.context,e.pattern);return await this.getOutput(t,e.pattern,e.context)}getMetadata(e,t,r,n){return()=>new Promise((e,t)=>{n.on(\"error\",t),n.on(\"end\",()=>e({})),n.on(\"metadata\",t=>{e(t)})})}async getOutput(e,t,r){let a;a=e.matchLazy?e.matchLazy(s.variableToUndefined(t.subject),s.variableToUndefined(t.predicate),s.variableToUndefined(t.object),s.variableToUndefined(t.graph)):n.AsyncIterator.wrap(e.match(s.variableToUndefined(t.subject),s.variableToUndefined(t.predicate),s.variableToUndefined(t.object),s.variableToUndefined(t.graph)));return{data:a,metadata:s.cachifyMetadata(this.getMetadata(e,t,r,a))}}}t.ActorRdfResolveQuadPatternSource=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(63),a=r(10);class s extends n.ActorRdfMetadata{constructor(e){super(e)}async test(e){if(e.triples)throw new Error(\"This actor only supports non-triple quad streams.\");return!0}async run(e){const t=new a.Readable({objectMode:!0}),r=new a.Readable({objectMode:!0}),n=()=>{t._read=r._read=()=>{},e.quads.on(\"error\",e=>{t.emit(\"error\",e),r.emit(\"error\",e)});const n={};let a;const s={};e.quads.on(\"data\",t=>{\"http://rdfs.org/ns/void#subset\"===t.predicate.value&&t.object.value===e.url?a=t.subject.value:\"http://xmlns.com/foaf/0.1/primaryTopic\"===t.predicate.value&&(s[t.object.value]=t.subject.value);let r=n[t.graph.value];r||(r=n[t.graph.value]=[]),r.push(t)}),e.quads.on(\"end\",()=>{const e=a?s[a]:void 0;for(const a in n)if(a===e){for(const e of n[a])r.push(e);if(this.metadataToData)for(const e of n[a])t.push(e)}else{for(const e of n[a])t.push(e);if(!e&&this.dataToMetadataOnInvalidMetadataGraph)for(const e of n[a])r.push(e)}t.push(null),r.push(null)})};return t._read=r._read=()=>{n()},{data:t,metadata:r}}}t.ActorRdfMetadataPrimaryTopic=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(10),a=r(64);class s extends a.ActorRdfMetadata{constructor(e){super(e)}async run(e){const t=new n.Readable({objectMode:!0}),r=new n.Readable({objectMode:!0}),a=()=>{t._read=r._read=()=>{},e.quads.on(\"error\",e=>{t.emit(\"error\",e),r.emit(\"error\",e)});const n={};e.quads.on(\"data\",a=>{this.isMetadata(a,e.url,n)?r.push(a):t.push(a)}),e.quads.on(\"end\",()=>{t.push(null),r.push(null)})};return t._read=r._read=()=>{a()},{data:t,metadata:r}}}t.ActorRdfMetadataQuadPredicate=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(63),a=r(10);class s extends n.ActorRdfMetadata{constructor(e){super(e)}async test(e){return!0}async run(e){const t=new a.Readable({objectMode:!0}),r=new a.Readable({objectMode:!0});return t._read=r._read=()=>{t._read=r._read=()=>{},e.quads.on(\"error\",e=>{t.emit(\"error\",e),r.emit(\"error\",e)}),e.quads.on(\"data\",e=>{t.push(e),r.push(e)}),e.quads.on(\"end\",()=>{t.push(null),r.push(null)})},{data:t,metadata:r}}}t.ActorRdfMetadataAll=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(30),a=r(186);class s extends n.ActorRdfMetadataExtract{constructor(e){super(e),this.parsedUriTemplateCache={}}async test(e){return!0}getLinks(e,t){return s.LINK_TYPES.reduce((r,n)=>{const a=t[n]||t[n+\"Page\"],s=a&&a[e];return r[n]=s&&s.length>0?s[0]:null,r},{})}parseUriTemplateCached(e){const t=this.parsedUriTemplateCache[e];return t||(this.parsedUriTemplateCache[e]=a.parse(e))}getSearchForms(e){const t=e.search,r=[];if(t)for(const n in t)for(const a of t[n]){const t=(e.template||{})[a]||[];if(1!==t.length)throw new Error(\"Expected 1 hydra:template for \"+a);const s=t[0],o=this.parseUriTemplateCached(s),i=((e.mapping||{})[a]||[]).reduce((t,r)=>{const n=((e.variable||{})[r]||[])[0],a=((e.property||{})[r]||[])[0];if(!n)throw new Error(\"Expected a hydra:variable for \"+r);if(!a)throw new Error(\"Expected a hydra:property for \"+r);return t[a]=n,t},{}),c=e=>o.expand(Object.keys(e).reduce((t,r)=>(t[i[r]]=e[r],t),{}));r.push({dataset:n,template:s,mappings:i,getUri:c})}return{values:r}}getHydraProperties(e){return new Promise((t,r)=>{e.on(\"error\",r);const n={};e.on(\"data\",e=>{if(e.predicate.value.startsWith(s.HYDRA)){const t=e.predicate.value.substr(s.HYDRA.length),r=n[t]||(n[t]={});(r[e.subject.value]||(r[e.subject.value]=[])).push(e.object.value)}}),e.on(\"end\",()=>t(n))})}async run(e){const t={},n=await this.getHydraProperties(e.metadata);return r(21)(t,this.getLinks(e.url,n)),t.searchForms=this.getSearchForms(n),{metadata:t}}}t.ActorRdfMetadataExtractHydraControls=s,s.HYDRA=\"http://www.w3.org/ns/hydra/core#\",s.LINK_TYPES=[\"first\",\"next\",\"previous\",\"last\"]},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(185),a=r(68),s=r(67),o=r(69);class i extends s.ActorRdfMetadataExtract{constructor(e,t,r){super(r),this.graphqlClient=new n.Client({context:e,queryEngine:new o.GraphQlQueryEngine(this.queryEngine)}),this.sparqlOperation=this.graphqlClient.graphQlToSparql({query:t})}async queryData(e,t){const r=await a.storeStream(e),{data:n}=await this.graphqlClient.query(Object.assign(Object.assign({},await this.sparqlOperation),{queryEngineOptions:{source:{type:\"rdfjsSource\",value:r},initialBindings:t}}));return n}}t.ActorRdfMetadataExtractQuery=i},function(e,t){e.exports=require(\"graphql-ld\")},function(e,t){e.exports=require(\"uritemplate\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(30);class a extends n.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}run(e){return new Promise((t,r)=>{e.metadata.on(\"error\",r),e.metadata.on(\"data\",e=>{this.predicates.indexOf(e.predicate.value)>=0&&t({metadata:{totalItems:parseInt(e.object.value,10)}})}),e.metadata.on(\"end\",()=>{t({metadata:{totalItems:1/0}})})})}}t.ActorRdfMetadataExtractHydraCount=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(30),a=r(31);class s extends n.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){return new Promise((t,r)=>{e.metadata.on(\"error\",r);const n={};e.metadata.on(\"data\",t=>{\"http://www.w3.org/ns/sparql-service-description#endpoint\"!==t.predicate.value||\"BlankNode\"!==t.subject.termType&&t.subject.value!==e.url?\"http://www.w3.org/ns/sparql-service-description#defaultGraph\"===t.predicate.value&&(n.defaultGraph=t.object.value):n.sparqlService=\"Literal\"===t.object.termType?a.resolve(t.object.value,e.url):t.object.value}),e.metadata.on(\"end\",()=>{t({metadata:n})})})}}t.ActorRdfMetadataExtractSparqlService=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(32),a=r(68),s=r(191);class o extends n.ActorRdfResolveHypermedia{constructor(e){super(e,\"file\")}async testMetadata(e){return{filterFactor:0}}async run(e){return this.logInfo(e.context,\"Identified as file source: \"+e.url),{source:new s.RdfSourceMetadata(await a.storeStream(e.quads))}}}t.ActorRdfResolveHypermediaNone=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e,t){super(e),this.sourceType=t}async test(e){if(e.forceSourceType&&this.sourceType!==e.forceSourceType)throw new Error(`Actor ${this.name} is not able to handle source type ${e.forceSourceType}.`);return this.testMetadata(e)}}t.ActorRdfResolveHypermedia=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(10);t.RdfSourceMetadata=class{constructor(e){this.source=e}match(e,t,r,a){const s=new n.Readable({objectMode:!0});return s._read=()=>{s._read=()=>{};const n=this.source.match(e,t,r,a);let o=0;n.on(\"error\",e=>{s.emit(\"error\",e)}),n.on(\"data\",e=>{o++,s.push(e)}),n.on(\"end\",()=>{s.emit(\"metadata\",{totalItems:o}),s.push(null)})},s}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(193);class a extends n.ActorRdfResolveHypermediaLinks{constructor(e){super(e)}async test(e){if(!e.metadata.next)throw new Error(`Actor ${this.name} requires a 'next' metadata entry.`);return!0}async run(e){return{urls:[e.metadata.next]}}}t.ActorRdfResolveHypermediaLinksNext=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(194))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorRdfResolveHypermediaLinks=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(76);class a extends n.ActorHttpInvalidate{constructor(e){super(e),this.invalidateListeners=[]}addInvalidateListener(e){this.invalidateListeners.push(e)}async test(e){return!0}async run(e){for(const t of this.invalidateListeners)t(e);return!0}}t.ActorHttpInvalidateListenable=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Mediator{constructor(e){super(e)}async mediate(e){const t=[];let r;try{r=this.publish(e)}catch(e){r=[]}for(const e of r)try{await e.reply,t.push(e.actor)}catch(e){}return(await Promise.all(t.map(t=>t.runObservable(e))))[0]}async mediateWith(e,t){throw new Error(\"Unsupported operation: MediatorAll#mediateWith\")}}t.MediatorAll=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(198),a=r(7);class s extends n.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return!0}async run(e){return{operation:a.Util.mapOperation(e.operation,{join:(e,t)=>\"bgp\"===e.left.type&&\"bgp\"===e.right.type?{recurse:!1,result:t.createBgp(e.left.patterns.concat(e.right.patterns))}:{recurse:!1,result:e}})}}}t.ActorOptimizeQueryOperationJoinBgp=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(199))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorOptimizeQueryOperation=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Mediator{constructor(e){super(e)}async mediate(e){let t;try{t=this.publish(e)}catch(t){return e}await Promise.all(t.map(({reply:e})=>e));let r=e;for(const e of t.map(e=>e.actor))r=await e.runObservable(r);return r}mediateWith(e,t){throw new Error(\"Method not supported.\")}}t.MediatorCombinePipeline=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(80),a=r(7),s=r(203);class o extends n.ActorSparqlParse{constructor(e){super(e),this.prefixes=Object.freeze(this.prefixes)}async test(e){if(e.queryFormat&&\"sparql\"!==e.queryFormat)throw new Error(\"This actor can only parse SPARQL queries\");return!0}async run(e){const t=new s.Parser({prefixes:this.prefixes,baseIRI:e.baseIRI});t._resetBlanks();const r=t.parse(e.query);return{baseIRI:\"query\"===r.type?r.base:void 0,operation:a.translate(r,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:e.baseIRI})}}}t.ActorSparqlParseAlgebra=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorSparqlParse=a},function(e,t){e.exports=require(\"sparqljs\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(8),s=r(15),o=r(5);class i extends n.ActorQueryOperationTyped{constructor(e){super(e,\"bgp\")}static getVariables(e){return s.uniqTerms(e.map(e=>s.getTerms(e).filter(e=>\"Variable\"===e.termType)).reduce((e,t)=>e.concat(t),[])).map(o.termToString)}async testOperation(e,t){if(0!==e.patterns.length)throw new Error(\"Actor \"+this.name+\" can only operate on empty BGPs.\");return!0}async runOperation(e,t){return{bindingsStream:new a.SingletonIterator(n.Bindings({})),metadata:()=>Promise.resolve({totalItems:1}),type:\"bindings\",variables:i.getVariables(e.patterns)}}}t.ActorQueryOperationBgpEmpty=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(8),s=r(5);class o extends n.ActorQueryOperationTyped{constructor(e){super(e,\"values\")}async testOperation(e,t){return!0}async runOperation(e,t){return{type:\"bindings\",bindingsStream:new a.ArrayIterator(e.bindings.map(n.Bindings)),metadata:()=>Promise.resolve({totalItems:e.bindings.length}),variables:e.variables.map(s.termToString)}}}t.ActorQueryOperationValues=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(24),a=r(207),s=r(208);class o extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async testHandle(e,t,r){if(!(t in this.mediaTypes)&&!t.endsWith(\"+json\"))throw new Error(\"Unrecognized media type: \"+t);return await this.testHandleChecked(e)}async runHandle(e,t,r){return{quads:a.JsonLdParser.fromHttpResponse(e.baseIRI,t,e.headers,{documentLoader:new s.DocumentLoaderMediated(this.mediatorHttp,r)}).import(e.input)}}}t.ActorRdfParseJsonLd=o},function(e,t){e.exports=require(\"jsonld-streaming-parser\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(18),a=r(209),s=r(70);class o extends a.FetchDocumentLoader{constructor(e,t){super(o.createFetcher(e,t)),this.mediatorHttp=e,this.context=t}static createFetcher(e,t){return async(r,a)=>{const o=await e.mediate({input:r,init:a,context:t});return o.json=async()=>JSON.parse(await s(n.ActorHttp.toNodeReadable(o.body))),o}}}t.DocumentLoaderMediated=o},function(e,t){e.exports=require(\"jsonld-context-parser\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(32),a=r(211);class s extends n.ActorRdfResolveHypermedia{constructor(e){super(e,\"sparql\")}async testMetadata(e){if(!(e.forceSourceType||e.metadata.sparqlService||this.checkUrlSuffix&&e.url.endsWith(\"/sparql\")))throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`);return{filterFactor:1}}async run(e){this.logInfo(e.context,\"Identified as sparql source: \"+e.url);return{source:new a.RdfSourceSparql(e.metadata.sparqlService||e.url,e.context,this.mediatorHttp)}}}t.ActorRdfResolveHypermediaSparql=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(18),a=r(2),s=r(3),o=r(8),i=r(16),c=r(15),d=r(7),u=r(212);class p{constructor(e,t,r){this.url=e,this.context=t,this.mediatorHttp=r}static replaceBlankNodes(e){const t=c.getVariables(c.getTerms(e)).map(e=>e.value),r={};let n=!1;const a=c.mapTerms(e,e=>{if(\"BlankNode\"===e.termType){let a=e.value;if(r[a])a=r[a];else{if(t.indexOf(a)>=0){let e=0;for(;t.indexOf(a+e)>=0;)++e;a+=e}r[e.value]=a,t.push(a)}return n=!0,s.variable(a)}return e});return n?a:e}static patternToBgp(e){return p.FACTORY.createBgp([p.FACTORY.createPattern(e.subject,e.predicate,e.object,e.graph)])}static patternToSelectQuery(e){const t=c.getVariables(c.getTerms(e));return d.toSparql(p.FACTORY.createProject(p.patternToBgp(e),t))}static patternToCountQuery(e){return d.toSparql(p.FACTORY.createProject(p.FACTORY.createExtend(p.FACTORY.createGroup(p.patternToBgp(e),[],[p.FACTORY.createBoundAggregate(s.variable(\"var0\"),\"count\",p.FACTORY.createWildcardExpression(),!1)]),s.variable(\"count\"),p.FACTORY.createTermExpression(s.variable(\"var0\"))),[s.variable(\"count\")]))}static materializeOptionalTerm(e,t){return e||s.variable(t)}async fetchBindingsStream(e,t,r){const a=e+\"?query=\"+encodeURIComponent(t),s=new Headers;s.append(\"Accept\",\"application/sparql-results+json\");const o={context:r,input:a,init:{headers:s}},i=await this.mediatorHttp.mediate(o),c=n.ActorHttp.toNodeReadable(i.body);return i.ok||setImmediate(()=>c.emit(\"error\",new Error(`Invalid SPARQL endpoint (${e}) response: ${i.statusText} (${i.status})`))),c}async queryBindings(e,t,r){const n=new o.BufferedIterator({autoStart:!1,maxBufferSize:1/0});let s=!1;const i=n._read;return n._read=(o,c)=>{s?i(o,c):(s=!0,this.fetchBindingsStream(e,t,r).then(e=>{const t=new u.SparqlJsonParser({prefixVariableQuestionMark:!0}).parseJsonResultsStream(e);e.on(\"error\",e=>t.emit(\"error\",e)),t.on(\"error\",e=>n.emit(\"error\",e)),t.on(\"data\",e=>n._push(a.Bindings(e))),t.on(\"end\",()=>{n.close()}),i(o,c)}))},n}match(e,t,r,n){if(e instanceof RegExp||t instanceof RegExp||r instanceof RegExp||n instanceof RegExp)throw new Error(\"RdfSourceSparql does not support matching by regular expressions.\");const a=p.replaceBlankNodes(p.FACTORY.createPattern(p.materializeOptionalTerm(e,\"s\"),p.materializeOptionalTerm(t,\"p\"),p.materializeOptionalTerm(r,\"o\"),p.materializeOptionalTerm(n,\"g\"))),s=p.patternToCountQuery(a),o=p.patternToSelectQuery(a);this.queryBindings(this.url,s,this.context).then(e=>new Promise(t=>{e.on(\"data\",e=>{const r=e.get(\"?count\");if(r){const e=parseInt(r.value,10);return isNaN(e)?t({totalItems:1/0}):t({totalItems:e})}return t({totalItems:1/0})}),e.on(\"error\",()=>t({totalItems:1/0})),e.on(\"end\",()=>t({totalItems:1/0}))})).then(e=>d.emit(\"metadata\",e));const d=new i.PromiseProxyIterator(async()=>(await this.queryBindings(this.url,o,this.context)).map(e=>c.mapTerms(a,t=>{if(\"Variable\"===t.termType){const r=e.get(\"?\"+t.value);return r||d.emit(\"error\",new Error(`The endpoint ${this.url} failed to provide a binding for ${t.value}.`)),r}return t})));return d}}t.RdfSourceSparql=p,p.FACTORY=new d.Factory},function(e,t){e.exports=require(\"sparqljson-parse\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(14),s=r(214),o=r(8),i=r(217),c=r(5),d=r(7);class u extends n.ActorQueryOperation{constructor(e){super(e),this.endpointFetcher=new i.SparqlEndpointFetcher({fetch:(e,t)=>this.mediatorHttp.mediate({input:e,init:t,context:this.lastContext}),prefixVariableQuestionMark:!0})}async test(e){if(!e.operation)throw new Error(\"Missing field 'operation' in a query operation action.\");const t=await s.DataSourceUtils.getSingleSource(e.context);if(t&&\"sparql\"===a.getDataSourceType(t))return{httpRequests:1};throw new Error(this.name+\" requires a single source with a 'sparql' endpoint to be present in the context.\")}async run(e){const t=await s.DataSourceUtils.getSingleSource(e.context);if(!t)throw new Error(\"Illegal state: undefined sparql endpoint source.\");const r=a.getDataSourceValue(t);let n,o,i;this.lastContext=e.context;try{n=d.toSparql(e.operation),o=this.endpointFetcher.getQueryType(n)}catch(e){}switch(o&&\"UNKNOWN\"!==o||(i=d.Util.inScopeVariables(e.operation),n=d.toSparql(u.FACTORY.createProject(e.operation,i)),o=\"SELECT\"),o){case\"SELECT\":return i||(i=d.Util.inScopeVariables(e.operation)),this.executeQuery(r,n,!1,i);case\"CONSTRUCT\":return this.executeQuery(r,n,!0);case\"ASK\":return{type:\"boolean\",booleanResult:this.endpointFetcher.fetchAsk(r,n)}}}executeQuery(e,t,r,a){const s=new o.BufferedIterator({autoStart:!1,maxBufferSize:1/0});(r?this.endpointFetcher.fetchTriples(e,t):this.endpointFetcher.fetchBindings(e,t)).then(e=>{let t=0;e.on(\"error\",e=>s.emit(\"error\",e)),e.on(\"data\",e=>{t++,s._push(r?e:n.Bindings(e))}),e.on(\"end\",()=>{s.emit(\"metadata\",{totalItems:t}),s.close()})}).catch(e=>s.emit(\"error\",e));const i=u.cachifyMetadata(()=>new Promise((e,t)=>{s._fillBuffer(),s.on(\"error\",t),s.on(\"end\",()=>t(new Error(\"No metadata was found\"))),s.on(\"metadata\",e)}));return r?{type:\"quads\",quadStream:s,metadata:i}:{type:\"bindings\",bindingsStream:s,metadata:i,variables:a.map(c.termToString)}}}t.ActorQueryOperationSparqlEndpoint=u,u.FACTORY=new d.Factory},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(215))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(14);t.DataSourceUtils=class{static async getSingleSource(e){if(e&&e.has(n.KEY_CONTEXT_SOURCE))return e.get(n.KEY_CONTEXT_SOURCE);if(e&&e.has(n.KEY_CONTEXT_SOURCES)){const t=e.get(n.KEY_CONTEXT_SOURCES);if(t.isEnded()){const e=await r(216)(t.iterator());if(1===e.length)return e[0]}}}static async getSingleSourceType(e){const t=await this.getSingleSource(e);return t?n.getDataSourceType(t):void 0}static async singleSourceHasType(e,t){const r=await this.getSingleSourceType(e);return!!r&&r===t}}},function(e,t){e.exports=require(\"arrayify-stream\")},function(e,t){e.exports=require(\"fetch-sparql-endpoint\")},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(88)),n(r(219))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(88);class a extends n.ActorRdfDereference{constructor(e){super(e)}getMediaTypeFromExtension(e){const t=e.lastIndexOf(\".\");if(t>=0){const r=e.substr(t);return this.mediaMappings[r.substring(1)]||\"\"}return\"\"}}t.ActorRdfDereferenceMediaMappings=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(87);class a extends n.ActorRdfDereferenceHttpParseBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLength}}t.ActorRdfDereferenceHttpParse=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(59),a=r(222);class s extends n.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const t=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new a.HtmlScriptListener(this.mediatorRdfParseHandle,e.emit,e.error,e.end,t,e.context,e.baseIRI,e.headers)}}}t.ActorRdfParseHtmlScript=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(10),a=r(31);class s{constructor(e,t,r,n,a,s,o,i){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=t,this.cbError=r,this.cbEnd=n,this.supportedTypes=a,this.context=s,this.baseIRI=o,this.headers=i,this.onlyFirstScript=s&&!1===s.get(\"extractAllScripts\")||!1;const c=this.baseIRI.indexOf(\"#\");this.targetScriptId=c>0?this.baseIRI.substr(c+1,this.baseIRI.length):null}static newErrorCoded(e,t){const r=new Error(e);return r.code=t,r}onEnd(){0==--this.endBarrier&&(this.textChunksJsonLd.length>0?(this.handleMediaType=\"application/ld+json\",this.textChunks=this.textChunksJsonLd,this.textChunks.push(\"]\"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(0===this.passedScripts&&this.targetScriptId&&this.cbError(s.newErrorCoded(`Failed to find targeted script id \"${this.targetScriptId}\"`,\"loading document failed\")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const e=new n.Readable({objectMode:!0});e._read=()=>{};const t=this.textChunks,r={context:this.context,handle:{baseIRI:this.baseIRI,input:e,headers:this.headers},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(r).then(({handle:r})=>{r.quads.on(\"error\",e=>this.cbError(s.newErrorCoded(e.message,\"invalid script element\"))).on(\"data\",this.cbQuad).on(\"end\",()=>this.onEnd());for(const r of t)e.push(r);e.push(null)}).catch(this.cbError),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(e,t){\"base\"===e&&t.href&&(this.baseIRI=a.resolve(t.href,this.baseIRI)),\"script\"!==e||this.targetScriptId&&t.id!==this.targetScriptId?this.handleMediaType=void 0:this.supportedTypes[t.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=t.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(0===this.textChunks.length?\"[\":\",\")):this.textChunks=[]):this.targetScriptId&&this.cbError(s.newErrorCoded(`Targeted script \"${this.targetScriptId}\" does not have a supported type`,\"loading document failed\"))}onText(e){this.handleMediaType&&this.textChunks.push(e)}requiresCustomJsonLdHandling(e){return!this.onlyFirstScript&&!this.targetScriptId&&\"application/ld+json\"===e}}t.HtmlScriptListener=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(29);class s extends a.ActorRdfJoin{constructor(e){super(e,3,!0)}static getSmallestPatternId(e){let t=-1,r=1/0;for(let n=0;n<e.length;n++){const a=e[n];a<=r&&(r=a,t=n)}return t}async getOutput(e){const t=e.entries.slice(),r=(await Promise.all(e.entries.map(n.getMetadata))).map(e=>\"totalItems\"in e?e.totalItems:1/0),a=s.getSmallestPatternId(r),o=t.splice(a,1)[0],i=(r.splice(a,1),s.getSmallestPatternId(r)),c=t.splice(i,1)[0],d=(r.splice(i,1),await this.mediatorJoin.mediate({entries:[o,c]}));return t.push(d),await this.mediatorJoin.mediate({entries:t})}async getIterations(e){return(await Promise.all(e.entries.map(n.getMetadata))).reduce((e,t)=>e*t.totalItems,1)}}t.ActorRdfJoinMultiSmallest=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(14),a=r(92);class s extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.emptyPatterns=new Map}async test(e){if(!this.getContextSources(e.context))throw new Error(\"Actor \"+this.name+\" can only resolve quad pattern queries against a sources array.\");return!0}async getSource(e){return new a.FederatedQuadSource(this.mediatorResolveQuadPattern,e,this.emptyPatterns,this.skipEmptyPatterns)}}t.ActorRdfResolveQuadPatternFederated=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.BlankNodeScoped=class{constructor(e,t){this.termType=\"BlankNode\",this.value=e,this.skolemized=t}equals(e){return!!e&&\"BlankNode\"===e.termType&&e.value===this.value}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(16),s=r(5),o=r(15);class i extends n.ActorQueryOperationTyped{constructor(e){super(e,\"pattern\")}static isTermVariable(e){return\"Variable\"===e.termType}static getVariables(e){return o.uniqTerms(o.getTerms(e).filter(i.isTermVariable)).map(s.termToString)}static getDuplicateElementLinks(e){const t={};let r=!1;for(const n of o.QUAD_TERM_NAMES)if(\"Variable\"===e[n].termType){const a=s.termToString(e[n]),o=(t[a]||(t[a]=[])).push(n);r=r||o>1}if(!r)return;const n={};for(const e in t){const r=t[e],a=r.slice(1);a.length&&(n[r[0]]=a)}return n}async testOperation(e,t){return!0}async runOperation(e,t){e.context&&(t=t?t.merge(e.context):e.context);const r=await this.mediatorResolveQuadPattern.mediate({pattern:e,context:t}),c=i.getVariables(e),d=o.reduceTerms(e,(e,t,r)=>(i.isTermVariable(t)&&(e[r]=s.termToString(t)),e),{}),u=(e,t,r)=>{const n=d[r];return n&&(e[n]=t),e};return{type:\"bindings\",bindingsStream:new a.PromiseProxyIterator(async()=>{let t=r.data;const a=i.getDuplicateElementLinks(e);return a&&(t=t.filter(e=>{for(const t of o.TRIPLE_TERM_NAMES)for(const r of a[t]||[])if(!e[t].equals(e[r]))return!1;return!0})),t.map(e=>n.Bindings(o.reduceTerms(e,u,{})),{autoStart:!0,maxBufferSize:128})}),variables:c,metadata:r.metadata}}}t.ActorQueryOperationQuadpattern=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(32),a=r(228);class s extends n.ActorRdfResolveHypermedia{constructor(e){super(e,\"qpf\")}async testMetadata(e){const t=this.createSource(e.metadata,e.context).searchForm;if(e.handledDatasets&&e.handledDatasets[t.dataset])throw new Error(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`);return{filterFactor:1}}async run(e){this.logInfo(e.context,\"Identified as qpf source: \"+e.url);const t=this.createSource(e.metadata,e.context,e.quads);return{source:t,dataset:t.searchForm.dataset}}createSource(e,t,r){return new a.RdfSourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorRdfDereference,this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,e,t,r)}}t.ActorRdfResolveHypermediaQpf=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(8),a=r(16),s=r(5),o=r(15),i=r(3);t.RdfSourceQpf=class{constructor(e,t,r,a,s,o,c,d,u,p){this.mediatorMetadata=e,this.mediatorMetadataExtract=t,this.mediatorRdfDereference=r,this.subjectUri=a,this.predicateUri=s,this.objectUri=o,this.graphUri=c,this.context=u,this.cachedQuads={};const l=this.getSearchForm(d);if(!l)throw new Error(\"Illegal state: found no TPF/QPF search form anymore in metadata.\");if(this.searchForm=l,this.defaultGraph=d.defaultGraph?i.namedNode(d.defaultGraph):void 0,p){let e=n.AsyncIterator.wrap(p);this.defaultGraph&&(e=this.reverseMapQuadsToDefaultGraph(e)),e.setProperty(\"metadata\",d),this.cacheQuads(e)}}getSearchForm(e){if(!e.searchForms||!e.searchForms.values)return;const t=e.searchForms;for(const e of t.values){if(this.graphUri&&this.subjectUri in e.mappings&&this.predicateUri in e.mappings&&this.objectUri in e.mappings&&this.graphUri in e.mappings&&4===Object.keys(e.mappings).length)return e;if(this.subjectUri in e.mappings&&this.predicateUri in e.mappings&&this.objectUri in e.mappings&&3===Object.keys(e.mappings).length)return e}}createFragmentUri(e,t,r,n,a){const o={},i=[{uri:this.subjectUri,term:t},{uri:this.predicateUri,term:r},{uri:this.objectUri,term:n},{uri:this.graphUri,term:a}];for(const e of i)e.uri&&e.term&&(o[e.uri]=s.termToString(e.term));return e.getUri(o)}match(e,t,r,s){if(e instanceof RegExp||t instanceof RegExp||r instanceof RegExp||s instanceof RegExp)throw new Error(\"RdfSourceQpf does not support matching by regular expressions.\");let c=!1;this.defaultGraph&&s&&\"DefaultGraph\"===s.termType&&(c=!0,s=this.defaultGraph);const d=this.getCachedQuads(e,t,r,s);if(d)return d;const u=new a.PromiseProxyIterator(async()=>{let a=await this.createFragmentUri(this.searchForm,e,t,r,s);const d=await this.mediatorRdfDereference.mediate({context:this.context,url:a});a=d.url;const p=await this.mediatorMetadata.mediate({context:this.context,url:a,quads:d.quads,triples:d.triples});this.mediatorMetadataExtract.mediate({context:this.context,url:a,metadata:p.metadata}).then(({metadata:e})=>{u.setProperty(\"metadata\",e),u.emit(\"metadata\",e)});const l=i.defaultGraph();let m=n.AsyncIterator.wrap(p.data).filter(n=>!!o.matchPattern(n,e,t,r,s)||c&&o.matchPattern(n,e,t,r,l));return!c&&s||(m=this.reverseMapQuadsToDefaultGraph(m)),m});return this.cacheQuads(u,e,t,r,s),this.getCachedQuads(e,t,r,s)}reverseMapQuadsToDefaultGraph(e){const t=i.defaultGraph();return e.map(e=>o.mapTerms(e,(e,r)=>\"graph\"===r&&e.equals(this.defaultGraph)?t:e))}getPatternId(e,t,r,n){return JSON.stringify({s:s.termToString(e),p:s.termToString(t),o:s.termToString(r),g:s.termToString(n)})}cacheQuads(e,t,r,n,a){const s=this.getPatternId(t,r,n,a);this.cachedQuads[s]=e.clone()}getCachedQuads(e,t,r,n){const s=this.getPatternId(e,t,r,n);let o=this.cachedQuads[s];if(o){const e=o;return o=new a.PromiseProxyIterator(async()=>e.clone()),e.getProperty(\"metadata\",e=>o.emit(\"metadata\",e)),o}}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(14),a=r(33),s=r(97);class o extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.cache=this.cacheSize?new a({max:this.cacheSize}):void 0;const t=this.cache;t&&this.httpInvalidator.addInvalidateListener(({url:e})=>e?t.del(e):t.reset())}async test(e){if(!this.hasContextSingleSource(e.context))throw new Error(\"Actor \"+this.name+\" can only resolve quad pattern queries against a single source.\");return!0}getSource(e,t){const r=this.getContextSource(e),a=this.getContextSourceUrl(r);let o;return this.cache&&this.cache.has(a)?o=this.cache.get(a):(o=new s.MediatedQuadSource(this.cacheSize,e,a,n.getDataSourceType(r),{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorRdfDereference:this.mediatorRdfDereference,mediatorRdfResolveHypermedia:this.mediatorRdfResolveHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks}),this.cache&&this.cache.set(a,o)),Promise.resolve(o)}}t.ActorRdfResolveQuadPatternHypermedia=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(231);class a extends n.LinkedRdfSourcesAsyncRdfIterator{constructor(e,t,r,n,a,s,o,i,c){super(e,n,a,s,o,i,{autoStart:!1}),this.context=t,this.forceSourceType=r,this.mediatorRdfDereference=c.mediatorRdfDereference,this.mediatorMetadata=c.mediatorMetadata,this.mediatorMetadataExtract=c.mediatorMetadataExtract,this.mediatorRdfResolveHypermedia=c.mediatorRdfResolveHypermedia,this.mediatorRdfResolveHypermediaLinks=c.mediatorRdfResolveHypermediaLinks,this.handledUrls={}}async getNextUrls(e){try{const{urls:t}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:e});return t.filter(e=>!this.handledUrls[e]&&(this.handledUrls[e]=!0,!0))}catch(e){return[]}}async getNextSource(e,t){const r=this.context,n=await this.mediatorRdfDereference.mediate({context:r,url:e});e=n.url;const a=await this.mediatorMetadata.mediate({context:r,url:e,quads:n.quads,triples:n.triples}),{metadata:s}=await this.mediatorMetadataExtract.mediate({context:r,url:e,metadata:a.metadata}),{source:o,dataset:i}=await this.mediatorRdfResolveHypermedia.mediate({context:r,forceSourceType:this.forceSourceType,handledDatasets:t,metadata:s,quads:a.data,url:e});return i&&(t[i]=!0),{source:o,metadata:s,handledDatasets:t}}}t.MediatedLinkedRdfSourcesAsyncRdfIterator=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(8),a=r(33);class s extends n.BufferedIterator{constructor(e,t,r,n,a,s,o){super(o),this.cacheSize=e,this.subject=t,this.predicate=r,this.object=n,this.graph=a,this.nextUrls=[],this.firstUrl=s,this.started=!1,this.iterating=!1}setSourcesState(e){e?this.sourcesState=e:(this.sourcesState={sources:new a({max:this.cacheSize})},this.getNextSourceCached(this.firstUrl,{}))}_read(e,t){if(this.started)if(!this.iterating&&this.nextSource){const e=this.nextSource;this.nextSource=void 0,this.getNextUrls(e.metadata).then(e=>Promise.all(e)).then(async r=>{if(0===r.length&&0===this.nextUrls.length)this.close();else{for(const e of r)this.nextUrls.push(e);const t=await this.getNextSourceCached(this.nextUrls[0],e.handledDatasets);this.startIterator(t,!1),this.nextUrls.splice(0,1)}t()}).catch(e=>this.emit(\"error\",e))}else t();else this.started=!0,this.sourcesState||this.setSourcesState(),this.sourcesState.sources.get(this.firstUrl).then(e=>{this.startIterator(e,!0),t()}).catch(e=>this.emit(\"error\",e))}getNextSourceCached(e,t){let r=this.sourcesState.sources.get(e);return r||(r=this.getNextSource(e,t),this.sourcesState.sources.set(e,r),r)}startIterator(e,t){this.iterating=!0;const r=e.source.match(this.subject,this.predicate,this.object,this.graph);let n=e.metadata,a=!1;r.on(\"metadata\",e=>{a&&this.destroy(new Error(\"Received metadata AFTER the source iterator was ended.\")),n=Object.assign(Object.assign({},n),e)}),r.on(\"data\",e=>{this._push(e),this.readable=!0}),r.on(\"error\",e=>this.destroy(e)),r.on(\"end\",()=>{a=!0,t&&this.emit(\"metadata\",n),this.nextSource={handledDatasets:Object.assign({},e.handledDatasets),metadata:n,source:void 0},this.iterating=!1,this.readable=!0})}}t.LinkedRdfSourcesAsyncRdfIterator=s},function(e,t,r){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(98),a=r(100),s=r(2),o=r(14),i=r(101),c=r(238),d=r(102),u=r(103),p=r(239),l=r(35);var m=r(35);t.KEY_CONTEXT_INITIALBINDINGS=m.KEY_CONTEXT_INITIALBINDINGS,t.KEY_CONTEXT_QUERYFORMAT=m.KEY_CONTEXT_QUERYFORMAT,t.KEY_CONTEXT_LENIENT=m.KEY_CONTEXT_LENIENT;class f extends l.ActorInitSparql{constructor(e){super(e)}async run(e){const t=u(e.argv);if(!t.listformats&&!this.queryString&&(!t.q&&!t.f&&t._.length<(t.c?1:2)||t._.length<(t.c?0:1)||t.h||t.help||t.v||t.version)){if(t.v||t.version){const e=r(242).version,t=this.isDevelopmentEnvironment()?\"(dev)\":\"\",n=process.version,a=await this.getScriptOutput(\"npm -v\",\"_NPM is unavailable_\"),s=await this.getScriptOutput(\"yarn -v\",\"_Yarn is unavailable_\"),o=`${p.platform()} (${p.type()} ${p.release()})`;return{stderr:r(36)(`| software            | version\\n| ------------------- | -------\\n| Comunica Init Actor | ${e} ${t}\\n| node                | ${n}\\n| npm                 | ${a}\\n| yarn                | ${s}\\n| Operating System    | ${o}\\n`)}}return{stderr:r(36)(\"comunica-sparql evaluates SPARQL queries\\n\\nUsage:\\n  comunica-sparql http://fragments.dbpedia.org/2016-04/en [-q] 'SELECT * WHERE { ?s ?p ?o }'\\n  comunica-sparql http://fragments.dbpedia.org/2016-04/en [-q] '{ hero { name friends { name } } }' -i graphql\\n  comunica-sparql http://fragments.dbpedia.org/2016-04/en [-f] query.sparql'\\n  comunica-sparql http://fragments.dbpedia.org/2016-04/en https://query.wikidata.org/sparql ...\\n  comunica-sparql hypermedia@http://fragments.dbpedia.org/2016-04/en sparql@https://query.wikidata.org/sparql ...\\n\\nOptions:\\n  -q            evaluate the given SPARQL query string\\n  -f            evaluate the SPARQL query in the given file\\n  -c            use the given JSON configuration file (e.g., config.json)\\n  -t            the MIME type of the output (e.g., application/json)\\n  -i            the query input format (e.g., graphql, defaults to sparql)\\n  -b            base IRI for the query (e.g., http://example.org/)\\n  -l            sets the log level (e.g., debug, info, warn, ... defaults to warn)\\n  -d            sets a datetime for querying Memento-enabled archives\\n  -p            delegates all HTTP traffic through the given proxy (e.g. http://myproxy.org/?uri=)\\n  --lenient     if failing requests and parsing errors should be logged instead of causing a hard crash\\n  --help        print this help message\\n  --listformats prints the supported MIME types\\n  --version     prints version information\\n\")}}if(t.listformats){const e=await this.getResultMediaTypes();return{stdout:r(36)(Object.keys(e).join(\"\\n\"))}}let c;if(t.q){if(\"string\"!=typeof t.q)throw new Error(\"The query option must be a string\");c=t.q}else t.f?c=d.readFileSync(t.f,{encoding:\"utf8\"}):(c=t._.pop(),c||(c=this.queryString));let m=null;m=t.c?JSON.parse(d.readFileSync(t.c,{encoding:\"utf8\"})):this.context?JSON.parse(this.context):{},m[l.KEY_CONTEXT_QUERYFORMAT]=this.defaultQueryInputFormat,t.i&&(m[l.KEY_CONTEXT_QUERYFORMAT]=t.i),t.b&&(m[s.KEY_CONTEXT_BASEIRI]=t.b),m.log=new i.LoggerPretty({level:t.l||\"warn\"}),t.d&&(m[n.KEY_CONTEXT_DATETIME]=new Date(t.d)),t.p&&(m[a.KEY_CONTEXT_HTTPPROXYHANDLER]=new a.ProxyHandlerStatic(t.p)),t._.length>0&&(m[o.KEY_CONTEXT_SOURCES]=m[o.KEY_CONTEXT_SOURCES]||[],t._.forEach(e=>{const t={},r=e.split(\"@\",2);r.length>1&&(t.type=r[0]),t.value=r[r.length-1],m[o.KEY_CONTEXT_SOURCES].push(t)})),t.lenient&&(m[l.KEY_CONTEXT_LENIENT]=!0);const f=await this.query(c,m);return{stdout:(await this.resultToString(f,t.t,f.context)).data}}getScriptOutput(e,t){return new Promise((r,n)=>{c.exec(e,(e,n,a)=>{e&&r(t),r((n||a).trimRight())})})}isDevelopmentEnvironment(){return d.existsSync(e+\"/../test\")}}t.ActorInitSparql=f}).call(this,\"/\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(18);r(99);const a=r(234);class s extends n.ActorHttp{constructor(e){super(e)}async test(e){if(!(e.context&&e.context.has(t.KEY_CONTEXT_DATETIME)&&e.context.get(t.KEY_CONTEXT_DATETIME)instanceof Date))throw new Error(\"This actor only handles request with a set valid datetime.\");if(e.init&&new Headers(e.init.headers||{}).has(\"accept-datetime\"))throw new Error(\"The request already has a set datetime.\");return!0}async run(e){const r=e.init?Object.assign({},e.init):{},n=r.headers=new Headers(r.headers||{});e.context&&e.context.has(t.KEY_CONTEXT_DATETIME)&&n.append(\"accept-datetime\",e.context.get(t.KEY_CONTEXT_DATETIME).toUTCString());const s={context:e.context,input:e.input,init:r},o=await this.mediatorHttp.mediate(s);if(n.has(\"accept-datetime\")&&o.headers&&!o.headers.has(\"memento-datetime\")){const t=o.headers.has(\"link\")&&a(o.headers.get(\"link\"));if(t&&t.timegate){o.body&&o.body.cancel();const n={context:e.context,input:t.timegate.url,init:r};return this.mediatorHttp.mediate(n)}}return o}}t.ActorHttpMemento=s,t.KEY_CONTEXT_DATETIME=\"@comunica/actor-http-memento:datetime\"},function(e,t){e.exports=require(\"parse-link-header\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(18);class a extends n.ActorHttp{constructor(e){super(e)}async test(e){if(!e.context)throw new Error(`Actor ${this.name} could not find a context.`);const r=e.context.get(t.KEY_CONTEXT_HTTPPROXYHANDLER);if(!r)throw new Error(`Actor ${this.name} could not find a proxy handler in the context.`);if(!await r.getProxy(e))throw new Error(`Actor ${this.name} could not determine a proxy for the given request.`);return{time:1/0}}async run(e){const r=\"string\"==typeof e.input?e.input:e.input.url;if(!e.context)throw new Error(\"Illegal state: missing context\");const n=e.context.get(t.KEY_CONTEXT_HTTPPROXYHANDLER),a=await this.mediatorHttp.mediate(Object.assign(Object.assign({},await n.getProxy(e)),{context:e.context.delete(t.KEY_CONTEXT_HTTPPROXYHANDLER)}));return a.url=a.headers.get(\"x-final-url\")||r,a}}t.ActorHttpProxy=a,t.KEY_CONTEXT_HTTPPROXYHANDLER=\"@comunica/actor-http-proxy:httpProxyHandler\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.ProxyHandlerStatic=class{constructor(e){this.prefixUrl=e}async getProxy(e){return{init:e.init,input:this.modifyInput(e.input)}}modifyInput(e){return\"string\"==typeof e?this.prefixUrl+e:new Request(this.prefixUrl+e.url,e)}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Logger{constructor(e){super(),this.level=e.level,this.levelOrdinal=n.Logger.getLevelOrdinal(this.level)}debug(e,t){this.log(\"debug\",e,t)}error(e,t){this.log(\"error\",e,t)}fatal(e,t){this.log(\"fatal\",e,t)}info(e,t){this.log(\"info\",e,t)}trace(e,t){this.log(\"trace\",e,t)}warn(e,t){this.log(\"warn\",e,t)}log(e,t,r){n.Logger.getLevelOrdinal(e)>=this.levelOrdinal&&console.error(`[${(new Date).toISOString()}]  ${e.toUpperCase()}: ${t}`,r)}}t.LoggerPretty=a},function(e,t){e.exports=require(\"child_process\")},function(e,t){e.exports=require(\"os\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(241))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.Actor{constructor(e){super(e)}}t.ActorInit=a},function(e){e.exports=JSON.parse('{\"_from\":\"@comunica/actor-init-sparql@^1.12.1\",\"_id\":\"@comunica/actor-init-sparql@1.13.1\",\"_inBundle\":false,\"_integrity\":\"sha512-TjFA1RbTYciAcs5SGC84UHPga0GxXLhTjlUrY2wG/jwXumweLeqSf+ob6wJf595Z4Sg8yCPJbd16rBRhrcs7Wg==\",\"_location\":\"/@comunica/actor-init-sparql\",\"_phantomChildren\":{},\"_requested\":{\"type\":\"range\",\"registry\":true,\"raw\":\"@comunica/actor-init-sparql@^1.12.1\",\"name\":\"@comunica/actor-init-sparql\",\"escapedName\":\"@comunica%2factor-init-sparql\",\"scope\":\"@comunica\",\"rawSpec\":\"^1.12.1\",\"saveSpec\":null,\"fetchSpec\":\"^1.12.1\"},\"_requiredBy\":[\"/@ldflex/comunica\"],\"_resolved\":\"https://registry.npmjs.org/@comunica/actor-init-sparql/-/actor-init-sparql-1.13.1.tgz\",\"_shasum\":\"b4a0b87c3732d5417f318ed73536ffa9efe13a82\",\"_spec\":\"@comunica/actor-init-sparql@^1.12.1\",\"_where\":\"/Users/changsun/surfdrive/GitHub/sunchang0124.github.io/node_modules/@ldflex/comunica\",\"bin\":{\"comunica-sparql\":\"bin/query.js\",\"comunica-sparql-http\":\"bin/http.js\",\"comunica-dynamic-sparql\":\"bin/query-dynamic.js\"},\"browser\":{\"./index.js\":\"./index-browser.js\"},\"bugs\":{\"url\":\"https://github.com/comunica/comunica/issues\"},\"bundleDependencies\":false,\"dependencies\":{\"@comunica/actor-abstract-bindings-hash\":\"^1.13.0\",\"@comunica/actor-abstract-mediatyped\":\"^1.13.0\",\"@comunica/actor-http-memento\":\"^1.13.0\",\"@comunica/actor-http-native\":\"^1.13.0\",\"@comunica/actor-http-proxy\":\"^1.13.0\",\"@comunica/actor-optimize-query-operation-join-bgp\":\"^1.13.0\",\"@comunica/actor-query-operation-ask\":\"^1.13.0\",\"@comunica/actor-query-operation-bgp-empty\":\"^1.13.1\",\"@comunica/actor-query-operation-bgp-left-deep-smallest\":\"^1.13.1\",\"@comunica/actor-query-operation-bgp-single\":\"^1.13.0\",\"@comunica/actor-query-operation-construct\":\"^1.13.0\",\"@comunica/actor-query-operation-describe-subject\":\"^1.13.0\",\"@comunica/actor-query-operation-distinct-hash\":\"^1.13.0\",\"@comunica/actor-query-operation-extend\":\"^1.13.0\",\"@comunica/actor-query-operation-filter-sparqlee\":\"^1.13.0\",\"@comunica/actor-query-operation-from-quad\":\"^1.13.0\",\"@comunica/actor-query-operation-group\":\"^1.13.0\",\"@comunica/actor-query-operation-join\":\"^1.13.0\",\"@comunica/actor-query-operation-leftjoin-left-deep\":\"^1.13.0\",\"@comunica/actor-query-operation-leftjoin-nestedloop\":\"^1.13.0\",\"@comunica/actor-query-operation-minus\":\"^1.13.0\",\"@comunica/actor-query-operation-orderby-sparqlee\":\"^1.13.0\",\"@comunica/actor-query-operation-path-alt\":\"^1.13.0\",\"@comunica/actor-query-operation-path-inv\":\"^1.13.0\",\"@comunica/actor-query-operation-path-link\":\"^1.13.0\",\"@comunica/actor-query-operation-path-nps\":\"^1.13.0\",\"@comunica/actor-query-operation-path-one-or-more\":\"^1.13.0\",\"@comunica/actor-query-operation-path-seq\":\"^1.13.0\",\"@comunica/actor-query-operation-path-zero-or-more\":\"^1.13.0\",\"@comunica/actor-query-operation-path-zero-or-one\":\"^1.13.0\",\"@comunica/actor-query-operation-project\":\"^1.13.0\",\"@comunica/actor-query-operation-quadpattern\":\"^1.13.1\",\"@comunica/actor-query-operation-reduced-hash\":\"^1.13.0\",\"@comunica/actor-query-operation-service\":\"^1.13.0\",\"@comunica/actor-query-operation-slice\":\"^1.13.0\",\"@comunica/actor-query-operation-sparql-endpoint\":\"^1.13.0\",\"@comunica/actor-query-operation-union\":\"^1.13.0\",\"@comunica/actor-query-operation-values\":\"^1.13.0\",\"@comunica/actor-rdf-dereference-http-parse\":\"^1.13.0\",\"@comunica/actor-rdf-join-multi-smallest\":\"^1.13.0\",\"@comunica/actor-rdf-join-symmetrichash\":\"^1.13.0\",\"@comunica/actor-rdf-metadata-all\":\"^1.13.0\",\"@comunica/actor-rdf-metadata-extract-hydra-controls\":\"^1.13.0\",\"@comunica/actor-rdf-metadata-extract-hydra-count\":\"^1.13.0\",\"@comunica/actor-rdf-metadata-extract-sparql-service\":\"^1.13.0\",\"@comunica/actor-rdf-metadata-primary-topic\":\"^1.13.0\",\"@comunica/actor-rdf-parse-html\":\"^1.13.0\",\"@comunica/actor-rdf-parse-html-rdfa\":\"^1.13.0\",\"@comunica/actor-rdf-parse-html-script\":\"^1.13.0\",\"@comunica/actor-rdf-parse-jsonld\":\"^1.13.0\",\"@comunica/actor-rdf-parse-n3\":\"^1.13.0\",\"@comunica/actor-rdf-parse-rdfxml\":\"^1.13.0\",\"@comunica/actor-rdf-parse-xml-rdfa\":\"^1.13.0\",\"@comunica/actor-rdf-resolve-hypermedia-links-next\":\"^1.13.0\",\"@comunica/actor-rdf-resolve-hypermedia-none\":\"^1.13.0\",\"@comunica/actor-rdf-resolve-hypermedia-qpf\":\"^1.13.0\",\"@comunica/actor-rdf-resolve-hypermedia-sparql\":\"^1.13.0\",\"@comunica/actor-rdf-resolve-quad-pattern-federated\":\"^1.13.0\",\"@comunica/actor-rdf-resolve-quad-pattern-hypermedia\":\"^1.13.0\",\"@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source\":\"^1.13.0\",\"@comunica/actor-rdf-serialize-jsonld\":\"^1.13.1\",\"@comunica/actor-rdf-serialize-n3\":\"^1.13.1\",\"@comunica/actor-sparql-parse-algebra\":\"^1.13.0\",\"@comunica/actor-sparql-parse-graphql\":\"^1.13.0\",\"@comunica/actor-sparql-serialize-json\":\"^1.13.0\",\"@comunica/actor-sparql-serialize-rdf\":\"^1.13.1\",\"@comunica/actor-sparql-serialize-simple\":\"^1.13.0\",\"@comunica/actor-sparql-serialize-sparql-json\":\"^1.13.0\",\"@comunica/actor-sparql-serialize-sparql-xml\":\"^1.13.0\",\"@comunica/actor-sparql-serialize-stats\":\"^1.13.0\",\"@comunica/actor-sparql-serialize-table\":\"^1.13.0\",\"@comunica/actor-sparql-serialize-tree\":\"^1.13.0\",\"@comunica/bus-context-preprocess\":\"^1.13.0\",\"@comunica/bus-http\":\"^1.13.0\",\"@comunica/bus-http-invalidate\":\"^1.13.0\",\"@comunica/bus-init\":\"^1.13.0\",\"@comunica/bus-optimize-query-operation\":\"^1.13.0\",\"@comunica/bus-query-operation\":\"^1.13.0\",\"@comunica/bus-rdf-dereference\":\"^1.13.0\",\"@comunica/bus-rdf-dereference-paged\":\"^1.13.0\",\"@comunica/bus-rdf-join\":\"^1.13.0\",\"@comunica/bus-rdf-metadata\":\"^1.13.0\",\"@comunica/bus-rdf-metadata-extract\":\"^1.13.0\",\"@comunica/bus-rdf-parse\":\"^1.13.0\",\"@comunica/bus-rdf-parse-html\":\"^1.13.0\",\"@comunica/bus-rdf-resolve-hypermedia\":\"^1.13.0\",\"@comunica/bus-rdf-resolve-hypermedia-links\":\"^1.13.0\",\"@comunica/bus-rdf-resolve-quad-pattern\":\"^1.13.0\",\"@comunica/bus-rdf-serialize\":\"^1.13.1\",\"@comunica/bus-sparql-parse\":\"^1.13.0\",\"@comunica/bus-sparql-serialize\":\"^1.13.0\",\"@comunica/core\":\"^1.13.0\",\"@comunica/logger-pretty\":\"^1.13.0\",\"@comunica/logger-void\":\"^1.13.0\",\"@comunica/mediator-all\":\"^1.13.0\",\"@comunica/mediator-combine-pipeline\":\"^1.13.0\",\"@comunica/mediator-combine-union\":\"^1.13.0\",\"@comunica/mediator-number\":\"^1.13.0\",\"@comunica/mediator-race\":\"^1.13.0\",\"@comunica/runner\":\"^1.13.0\",\"@comunica/runner-cli\":\"^1.13.0\",\"asynciterator\":\"^2.0.1\",\"asyncreiterable\":\"^1.2.0\",\"minimist\":\"^1.2.0\",\"negotiate\":\"^1.0.1\",\"rdf-quad\":\"^1.4.0\",\"rdf-string\":\"^1.4.2\",\"rdf-terms\":\"^1.4.0\",\"streamify-string\":\"^1.0.1\"},\"deprecated\":false,\"description\":\"A Comunica engine for SPARQL query evaluation over heterogeneous interfaces\",\"devDependencies\":{\"@comunica/actor-query-operation-bgp-left-deep-smallest-sort\":\"^1.13.0\"},\"files\":[\"components\",\"config\",\"lib/**/*.d.ts\",\"lib/**/*.js\",\"bin/**/*.d.ts\",\"bin/**/*.js\",\"index.d.ts\",\"index.js\",\"index-browser.d.ts\",\"index-browser.js\",\"engine-default.js\"],\"gitHead\":\"416de36f0e3a7212ed7faadd8eae9424d0f3830f\",\"homepage\":\"https://github.com/comunica/comunica#readme\",\"jest\":{\"globals\":{\"ts-jest\":{\"tsConfig\":\"test/tsconfig.json\"}},\"transform\":{\"^.+\\\\\\\\.ts$\":\"ts-jest\"},\"testRegex\":\"(/test/.*|(\\\\\\\\.|/)(test|spec))\\\\\\\\.ts$\",\"moduleFileExtensions\":[\"ts\",\"js\"],\"collectCoverage\":true},\"keywords\":[\"comunica\",\"actor\",\"init\",\"sparql\"],\"license\":\"MIT\",\"lsd:components\":\"components/components.jsonld\",\"lsd:contexts\":{\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/components/context.jsonld\":\"components/context.jsonld\"},\"lsd:importPaths\":{\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/components/\":\"components/\",\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/\":\"config/\"},\"lsd:module\":\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql\",\"main\":\"index.js\",\"name\":\"@comunica/actor-init-sparql\",\"publishConfig\":{\"access\":\"public\"},\"repository\":{\"type\":\"git\",\"url\":\"https://github.com/comunica/comunica/tree/master/packages/actor-init-sparql\"},\"scripts\":{\"browser\":\"npm run prepare && \\\\\"../../node_modules/webpack/bin/webpack.js\\\\\" --config webpack.config.js --mode production\",\"browser-profile\":\"\\\\\"../../node_modules/webpack/bin/webpack.js\\\\\" --config webpack.config.js --profile --mode production --json > stats.json && webpack-bundle-analyzer stats.json && rm stats.json\",\"build\":\"node \\\\\"../../node_modules/typescript/bin/tsc\\\\\"\",\"integration\":\"rdf-test-suite-ldf spec/sparql-engine.js https://comunica.github.io/manifest-ldf-tests/sparql/sparql-manifest.ttl -d 200000 -c ../../.rdf-test-suite-ldf-cache/\",\"lint\":\"node \\\\\"../../node_modules/tslint/bin/tslint\\\\\" lib/**/*.ts test/**/*.ts --exclude \\'**/*.d.ts\\'\",\"prepare\":\"comunica-compile-config config/config-default.json > engine-default.js\",\"spec\":\"yarn run spec-base -o summary -e\",\"spec-base\":\"node ../../node_modules/rdf-test-suite/bin/Runner.js spec/sparql-engine.js http://w3c.github.io/rdf-tests/sparql11/data-sparql11/manifest-all.ttl -s http://www.w3.org/TR/sparql11-query/ -c ../../.rdf-test-suite-cache/\",\"spec-earl\":\"yarn run spec-base -o earl -p spec/earl-meta.json -e > earl.ttl\",\"spec-file\":\"yarn run spec-base -t\",\"test\":\"node \\\\\"../../node_modules/jest/bin/jest.js\\\\\" ${1}\",\"test-watch\":\"node \\\\\"../../node_modules/jest/bin/jest.js\\\\\" ${1} --watch\",\"validate\":\"npm ls\"},\"typings\":\"index\",\"version\":\"1.13.1\"}')},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(101),a=r(102),s=r(244),o=r(103),i=r(245),c=r(105),d=r(34),u=r(8),p=r(1),l=r(246);class m{constructor(e){e=e||{},this.context=e.context||{},this.timeout=e.timeout||6e4,this.port=e.port||3e3,this.invalidateCacheBeforeQuery=!!e.invalidateCacheBeforeQuery,this.engine=d.newEngineDynamic(e)}static runArgsInProcess(e,t,r,n,a,s,i){const c=o(e);(1!==c._.length||c.h||c.help)&&(r.write(m.HELP_MESSAGE),i(1));const d=m.generateConstructorArguments(c,n,a,s);return new Promise(e=>{new m(d).run(t,r).then(e).catch(t=>{r.write(t),i(1),e()})})}static generateConstructorArguments(e,t,r,s){const o=JSON.parse(a.existsSync(e._[0])?a.readFileSync(e._[0],\"utf8\"):e._[0]),i=e.i,c=parseInt(e.p,10)||3e3,d=1e3*(parseInt(e.t,10)||60);o.log||(o.log=new n.LoggerPretty({level:e.l||\"warn\"}));return{configResourceUrl:r.COMUNICA_CONFIG?r.COMUNICA_CONFIG:s,context:o,invalidateCacheBeforeQuery:i,mainModulePath:t,port:c,timeout:d}}async run(e,t){const r=await this.engine,n=await r.getResultMediaTypes(),a=[];for(const e of Object.keys(n))a.push({type:e,quality:n[e]});const o=s.createServer(this.handleRequest.bind(this,r,a,e,t));o.listen(this.port),o.setTimeout(2*this.timeout),t.write(\"Server running on http://localhost:\"+this.port+\"/\\n\")}async handleRequest(e,t,n,a,s,o){const i=s.headers.accept&&\"*/*\"!==s.headers.accept?r(247).choose(t,s)[0].type:null,d=c.parse(s.url||\"\",!0);if(\"/sparql\"!==d.pathname)return n.write(\"[404] Resource not found\\n\"),o.writeHead(404,{\"content-type\":m.MIME_JSON,\"Access-Control-Allow-Origin\":\"*\"}),void o.end(JSON.stringify({message:\"Resource not found\"}));let u;switch(this.invalidateCacheBeforeQuery&&await e.invalidateHttpCache(),s.method){case\"POST\":u=await this.parseBody(s),this.writeQueryResult(e,n,a,s,o,u,i,!1);break;case\"HEAD\":case\"GET\":u=d.query.query||\"\",this.writeQueryResult(e,n,a,s,o,u,i,\"HEAD\"===s.method);break;default:n.write(\"[405] \"+s.method+\" to \"+d+\"\\n\"),o.writeHead(405,{\"content-type\":m.MIME_JSON,\"Access-Control-Allow-Origin\":\"*\"}),o.end(JSON.stringify({message:\"Incorrect HTTP method\"}))}}async writeQueryResult(e,t,r,n,a,s,o,i){if(!s)return this.writeServiceDescription(e,t,r,n,a,o,i);let c,d;try{c=await e.query(s,this.context)}catch(e){return t.write(\"[400] Bad request\\n\"),a.writeHead(400,{\"content-type\":m.MIME_PLAIN,\"Access-Control-Allow-Origin\":\"*\"}),void a.end(e.toString())}if(t.write(\"[200] \"+n.method+\" to \"+n.url+\"\\n\"),t.write(\"      Requested media type: \"+o+\"\\n\"),t.write(\"      Received query: \"+s+\"\\n\"),a.writeHead(200,{\"content-type\":o,\"Access-Control-Allow-Origin\":\"*\"}),i)a.end();else{try{const r=(await e.resultToString(c,o)).data;r.on(\"error\",e=>{t.write(\"[500] Server error in results: \"+e+\" \\n\"),a.end(\"An internal server error occurred.\\n\")}),r.pipe(a),d=r}catch(e){t.write(\"[400] Bad request, invalid media type\\n\"),a.writeHead(400,{\"content-type\":m.MIME_PLAIN,\"Access-Control-Allow-Origin\":\"*\"}),a.end(\"The response for the given query could not be serialized for the requested media type\\n\")}this.stopResponse(a,d)}}async writeServiceDescription(e,t,r,n,a,s,o){if(t.write(\"[200] \"+n.method+\" to \"+n.url+\"\\n\"),t.write(\"      Requested media type: \"+s+\"\\n\"),t.write(\"      Received query for service description. \\n\"),a.writeHead(200,{\"content-type\":s,\"Access-Control-Allow-Origin\":\"*\"}),o)return void a.end();const i=n.url,c=\"http://www.w3.org/ns/sparql-service-description#\",d=[l(i,\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\",c+\"Service\"),l(i,c+\"endpoint\",\"/sparql\"),l(i,c+\"url\",\"/sparql\"),l(i,c+\"feature\",c+\"BasicFederatedQuery\"),l(i,c+\"supportedLanguage\",c+\"SPARQL10Query\"),l(i,c+\"supportedLanguage\",c+\"SPARQL11Query\")];let f;try{const r=await e.getResultMediaTypeFormats(p.ActionContext(this.context));for(const e in r)d.push(l(i,c+\"resultFormat\",r[e]));const n=(await e.resultToString({type:\"quads\",quadStream:new u.ArrayIterator(d)},s)).data;n.on(\"error\",e=>{t.write(\"[500] Server error in results: \"+e+\" \\n\"),a.end(\"An internal server error occurred.\\n\")}),n.pipe(a),f=n}catch(e){return t.write(\"[400] Bad request, invalid media type\\n\"),a.writeHead(400,{\"content-type\":m.MIME_PLAIN,\"Access-Control-Allow-Origin\":\"*\"}),void a.end(\"The response for the given query could not be serialized for the requested media type\\n\")}this.stopResponse(a,f)}stopResponse(e,t){const r=setTimeout(n,this.timeout);function n(){t&&(t.removeAllListeners(),t.emit(\"end\"));try{e.end()}catch(e){}clearTimeout(r)}e.on(\"close\",n)}parseBody(e){return new Promise((t,r)=>{let n=\"\";e.setEncoding(\"utf8\"),e.on(\"error\",r),e.on(\"data\",e=>{n+=e}),e.on(\"end\",()=>{const r=e.headers[\"content-type\"];return r&&r.indexOf(\"application/sparql-query\")>=0?t(n):r&&r.indexOf(\"application/x-www-form-urlencoded\")>=0?t(i.parse(n).query||\"\"):t(n)})})}}t.HttpServiceSparqlEndpoint=m,m.MIME_PLAIN=\"text/plain\",m.MIME_JSON=\"application/json\",m.HELP_MESSAGE='comunica-sparql-http exposes a Comunica engine as SPARQL endpoint\\n\\ncontext should be a JSON object or the path to such a JSON file.\\n\\nUsage:\\n  comunica-sparql-http context.json [-p port] [-t timeout] [-l log-level] [-i] [--help]\\n  comunica-sparql-http \"{ \\\\\"sources\\\\\": [{ \\\\\"type\\\\\": \\\\\"hypermedia\\\\\", \\\\\"value\\\\\" : \\\\\"http://fragments.dbpedia.org/2015/en\\\\\" }]}\" [-p port] [-t timeout] [-l log-level] [-i] [--help]\\n\\nOptions:\\n  -p            The HTTP port to run on (default: 3000)\\n  -t            The query execution timeout in seconds (default: 60)\\n  -l            Sets the log level (e.g., debug, info, warn, ... defaults to warn)\\n  -i            A flag that enables cache invalidation before each query execution.\\n  --help        print this help message\\n'},function(e,t){e.exports=require(\"http\")},function(e,t){e.exports=require(\"querystring\")},function(e,t){e.exports=require(\"rdf-quad\")},function(e,t){e.exports=require(\"negotiate\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(35));var n=r(106);function a(){return r(252)}t.bindingsStreamToGraphQl=n.bindingsStreamToGraphQl,t.newEngine=a,t.evaluateQuery=function(e,t){return a().query(e,t)}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(23);class a extends n.ActorAbstractMediaTyped{constructor(e){super(e)}}t.ActorSparqlSerialize=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(23);class a extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e,t){return!0}}t.ActorSparqlSerializeFixedMediaTypes=a},function(e,t){e.exports=require(\"sparqljson-to-tree\")},function(e,t,r){const n=new(r(41).LoggerVoid)({}),a=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/Bus/Init\"}),s=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/Bus/Http\"}),o=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/Bus/RdfJoin\"}),i=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/Bus/RdfParse\"}),c=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-dereference/Bus/RdfDereference\"}),d=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/Bus/RdfParseHtml\"}),u=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/Bus/RdfSerialize\"}),p=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/Bus/RdfResolveQuadPattern\"}),l=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/Bus/RdfMetadata\"}),m=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/Bus/RdfMetadataExtract\"}),f=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia/Bus/RdfResolveHypermedia\"}),h=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/Bus/RdfResolveHypermediaLinks\"}),y=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/Bus/HttpInvalidate\"}),g=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/Bus/OptimizeQueryOperation\"}),b=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-sparql-parse/Bus/SparqlParse\"}),w=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-sparql-serialize/Bus/SparqlSerialize\"}),O=new(r(1).Bus)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/Bus/ContextPreprocess\"}),v=new(r(1).BusIndexed)({actorIdentifierFields:[\"operationName\"],actionIdentifierFields:[\"operation\",\"type\"],name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/Bus/QueryOperation\"}),S=new(r(22).MediatorNumber)({field:\"time\",type:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin\",ignoreErrors:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#mediatorHttp\",bus:s}),x=new(r(253).ActorHttpNative)({agentOptions:'{ \"keepAlive\": true, \"maxSockets\": 5 }',name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#myHttpFetcher\",bus:s}),q=new(r(109).ActionObserverHttp)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-sparql-serialize-stats/Actor/SparqlSerialize/Stats/httpObserver/default\",bus:s}),T=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorRdfJoin\",bus:o}),P=new(r(52).ActorRdfJoinSymmetricHash)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/join.json#myRdfJoinActor\",bus:o}),A=new(r(11).MediatorCombineUnion)({field:\"mediaTypes\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#mediatorRdfParseMediatypes\",bus:i}),j=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#mediatorRdfParseHandle\",bus:i}),_=new(r(46).ActorRdfParseN3)({mediaTypes:{\"application/n-quads\":\"1.0\",\"application/trig\":\"0.95\",\"application/n-triples\":\"0.8\",\"text/turtle\":\"0.5\",\"text/n3\":\"0.35\"},mediaTypeFormats:{\"application/n-quads\":\"http://www.w3.org/ns/formats/N-Quads\",\"application/trig\":\"http://www.w3.org/ns/formats/TriG\",\"application/n-triples\":\"http://www.w3.org/ns/formats/N-Triples\",\"text/turtle\":\"http://www.w3.org/ns/formats/Turtle\",\"text/n3\":\"http://www.w3.org/ns/formats/N3\"},priorityScale:\"1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserN3\",bus:i}),R=new(r(49).ActorRdfParseRdfXml)({mediaTypes:{\"application/rdf+xml\":\"1.0\"},mediaTypeFormats:{\"application/rdf+xml\":\"http://www.w3.org/ns/formats/RDF_XML\"},priorityScale:\"5.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserRdfXml\",bus:i}),E=new(r(50).ActorRdfParseXmlRdfa)({mediaTypes:{\"application/xml\":\"1.0\",\"text/xml\":\"1.0\",\"image/svg+xml\":\"1.0\"},mediaTypeFormats:{\"application/xml\":\"http://www.w3.org/ns/formats/RDFa\",\"text/xml\":\"http://www.w3.org/ns/formats/RDFa\",\"image/svg+xml\":\"http://www.w3.org/ns/formats/RDFa\"},priorityScale:\"3.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserXmlRdfa\",bus:i}),M=new(r(11).MediatorCombineUnion)({field:\"mediaTypes\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#mediatorRdfParseMediatypes\",bus:i}),I=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#mediatorRdfParseHandle\",bus:i}),C=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfDereference\",bus:c}),Q=new(r(57).ActorRdfParseHtml)({busRdfParseHtml:d,mediaTypes:{\"text/html\":\"1.0\",\"application/xhtml+xml\":\"0.9\"},mediaTypeFormats:{\"text/html\":\"http://www.w3.org/ns/formats/HTML\",\"application/xhtml+xml\":\"http://www.w3.org/ns/formats/HTML\"},priorityScale:\"2.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtml\",bus:i}),k=new(r(58).ActorRdfParseHtmlRdfa)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtmlRdfa\",bus:d}),N=new(r(260).ActorRdfSerializeN3)({mediaTypes:{\"application/trig\":\"1.0\",\"application/n-quads\":\"0.7\",\"text/turtle\":\"0.6\",\"application/n-triples\":\"0.3\",\"text/n3\":\"0.2\"},mediaTypeFormats:{\"application/trig\":\"http://www.w3.org/ns/formats/TriG\",\"application/n-quads\":\"http://www.w3.org/ns/formats/N-Quads\",\"text/turtle\":\"http://www.w3.org/ns/formats/Turtle\",\"application/n-triples\":\"http://www.w3.org/ns/formats/N-Triples\",\"text/n3\":\"http://www.w3.org/ns/formats/N3\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-serializers.json#myRdfSerializerN3\",bus:u}),B=new(r(264).ActorRdfSerializeJsonLd)({jsonStringifyIndentSpaces:2,mediaTypes:{\"application/ld+json\":\"1.0\"},mediaTypeFormats:{\"application/ld+json\":\"http://www.w3.org/ns/formats/JSON-LD\"},priorityScale:\"9.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-serializers.json#myRdfSerializeJsonLd\",bus:u}),D=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mediatorRdfSerialize\",bus:u}),H=new(r(11).MediatorCombineUnion)({field:\"mediaTypes\",name:\"_:b0bnode318\",bus:u}),L=new(r(11).MediatorCombineUnion)({field:\"mediaTypeFormats\",name:\"_:b1bnode318\",bus:u}),F=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorResolveQuadPattern\",bus:p}),z=new(r(60).ActorRdfResolveQuadPatternRdfJsSource)({name:\"config-sets:resolve-file.json#myRdfRdfJsSourceQuadPatternResolver\",bus:p}),U=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorMetadata\",bus:l}),Y=new(r(62).ActorRdfMetadataPrimaryTopic)({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataPrimaryTopic\",bus:l}),J=new(r(65).ActorRdfMetadataAll)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataAll\",bus:l}),X=new(r(11).MediatorCombineUnion)({field:\"metadata\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorMetadataExtract\",bus:m}),G=new(r(66).ActorRdfMetadataExtractHydraControls)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataExtractHydraControls\",bus:m}),$=new(r(71).ActorRdfMetadataExtractHydraCount)({predicates:[\"http://www.w3.org/ns/hydra/core#totalItems\",\"http://rdfs.org/ns/void#triples\"],name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataExtractHydraCount\",bus:m}),K=new(r(72).ActorRdfMetadataExtractSparqlService)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#myRdfMetadataExtractSparqlService\",bus:m}),V=new(r(73).ActorRdfResolveHypermediaNone)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaNoneResolver\",bus:f}),W=new(r(22).MediatorNumber)({field:\"filterFactor\",type:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMax\",ignoreErrors:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfResolveHypermedia\",bus:f}),Z=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfResolveHypermediaLinks\",bus:h}),ee=new(r(74).ActorRdfResolveHypermediaLinksNext)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaLinksNext\",bus:h}),te=new(r(75).ActorHttpInvalidateListenable)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-resolve-quad-pattern-hypermedia/Actor/RdfResolveQuadPattern/Hypermedia/httpInvalidator#default\",bus:y}),re=new(r(77).MediatorAll)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorHttpInvalidate\",bus:y}),ne=new(r(27).MediatorCombinePipeline)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorOptimizeQueryOperation\",bus:g}),ae=new(r(78).ActorOptimizeQueryOperationJoinBgp)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-optimize.json#myJoinBgpOptimizer\",bus:g}),se=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorSparqlParse\",bus:b}),oe=new(r(267).ActorSparqlParseGraphql)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/graphql-parsers.json#myGraphqlParser\",bus:b}),ie=new(r(79).ActorSparqlParseAlgebra)({prefixes:{rdf:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",rdfs:\"http://www.w3.org/2000/01/rdf-schema#\",owl:\"http://www.w3.org/2002/07/owl#\",xsd:\"http://www.w3.org/2001/XMLSchema#\",dc:\"http://purl.org/dc/terms/\",dcterms:\"http://purl.org/dc/terms/\",dc11:\"http://purl.org/dc/elements/1.1/\",foaf:\"http://xmlns.com/foaf/0.1/\",geo:\"http://www.w3.org/2003/01/geo/wgs84_pos#\",dbpedia:\"http://dbpedia.org/resource/\",\"dbpedia-owl\":\"http://dbpedia.org/ontology/\",dbpprop:\"http://dbpedia.org/property/\",schema:\"http://schema.org/\",skos:\"http://www.w3.org/2008/05/skos#\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-parsers.json#mySparqlParser\",bus:b}),ce=new(r(6).MediatorRace)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorSparqlSerialize\",bus:w}),de=new(r(11).MediatorCombineUnion)({field:\"mediaTypes\",name:\"_:b0bnode312\",bus:w}),ue=new(r(11).MediatorCombineUnion)({field:\"mediaTypeFormats\",name:\"_:b1bnode312\",bus:w}),pe=new(r(270).ActorSparqlSerializeJson)({mediaTypes:{\"application/json\":\"1.0\"},mediaTypeFormats:{\"application/json\":\"https://comunica.linkeddatafragments.org/#results_JSON\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myJsonSparqlSerializer\",bus:w}),le=new(r(272).ActorSparqlSerializeSimple)({mediaTypes:{simple:\"1.0\"},mediaTypeFormats:{simple:\"https://comunica.linkeddatafragments.org/#results_simple\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySimpleSparqlSerializer\",bus:w}),me=new(r(274).ActorSparqlSerializeSparqlJson)({mediaTypes:{\"application/sparql-results+json\":\"1.0\"},mediaTypeFormats:{\"application/sparql-results+json\":\"http://www.w3.org/ns/formats/SPARQL_Results_JSON\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySparqlJsonSparqlSerializer\",bus:w}),fe=new(r(276).ActorSparqlSerializeSparqlXml)({mediaTypes:{\"application/sparql-results+xml\":\"1.0\"},mediaTypeFormats:{\"application/sparql-results+xml\":\"http://www.w3.org/ns/formats/SPARQL_Results_XML\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySparqlXmlSparqlSerializer\",bus:w}),he=new(r(279).ActorSparqlSerializeTable)({columnWidth:50,mediaTypes:{table:\"1.0\"},mediaTypeFormats:{table:\"https://comunica.linkeddatafragments.org/#results_table\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myTableSparqlSerializer\",bus:w}),ye=new(r(106).ActorSparqlSerializeTree)({mediaTypes:{tree:\"0.9\"},mediaTypeFormats:{tree:\"https://comunica.linkeddatafragments.org/#results_tree\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myTreeSparqlSerializer\",bus:w}),ge=new(r(27).MediatorCombinePipeline)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorContextPreprocess\",bus:O}),be=new(r(22).MediatorNumber)({field:\"httpRequests\",type:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin\",ignoreErrors:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorQueryOperation\",bus:v}),we=new(r(81).ActorQueryOperationBgpEmpty)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myEmptyBgpQueryOperator\",bus:v}),Oe=new(r(82).ActorQueryOperationValues)({name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myValuesQueryOperator\",bus:v}),ve=new(r(98).ActorHttpMemento)({mediatorHttp:S,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http-memento.json#myHttpFetcher\",bus:s}),Se=new(r(83).ActorRdfParseJsonLd)({mediatorHttp:S,mediaTypes:{\"application/ld+json\":\"1.0\",\"application/json\":\"0.5\"},mediaTypeFormats:{\"application/ld+json\":\"http://www.w3.org/ns/formats/JSON-LD\",\"application/json\":\"http://www.w3.org/ns/formats/JSON-LD\"},priorityScale:\"9.0E-1\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserJsonLd\",bus:i}),xe=new(r(84).ActorRdfResolveHypermediaSparql)({mediatorHttp:S,checkUrlSuffix:!0,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#mySparqlQuadPatternResolver\",bus:f}),qe=new(r(85).ActorQueryOperationSparqlEndpoint)({mediatorHttp:S,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#mySparqlEndpointResolver\",bus:v}),Te=new(r(109).ActorSparqlSerializeStats)({httpObserver:q,mediaTypes:{stats:\"1.0\"},mediaTypeFormats:{stats:\"https://comunica.linkeddatafragments.org/#results_stats\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myStatsSparqlSerializer\",bus:w}),Pe=new(r(90).ActorRdfJoinMultiSmallest)({mediatorJoin:T,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/join.json#myRdfJoinMultiActor\",bus:o}),Ae=new(r(86).ActorRdfDereferenceHttpParse)({mediatorHttp:S,mediatorRdfParseMediatypes:A,mediatorRdfParseHandle:j,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,mediaMappings:{ttl:\"text/turtle\",turtle:\"text/turtle\",nt:\"application/n-triples\",ntriples:\"application/n-triples\",nq:\"application/n-quads\",nquads:\"application/n-quads\",rdf:\"application/rdf+xml\",rdfxml:\"application/rdf+xml\",owl:\"application/rdf+xml\",n3:\"text/n3\",trig:\"application/trig\",jsonld:\"application/ld+json\",json:\"application/json\",html:\"text/html\",htm:\"text/html\",xhtml:\"application/xhtml+xml\",xht:\"application/xhtml+xml\",xml:\"application/xml\",svg:\"image/svg+xml\",svgz:\"image/svg+xml\"},name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#myRdfDereferencer\",bus:c}),je=new(r(89).ActorRdfParseHtmlScript)({mediatorRdfParseMediatypes:M,mediatorRdfParseHandle:I,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtmlScript\",bus:d}),_e=new(r(281).ActorSparqlSerializeRdf)({mediatorRdfSerialize:D,mediatorMediaTypeCombiner:H,mediatorMediaTypeFormatCombiner:L,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myRdfSparqlSerializer\",bus:w}),Re=new(r(91).ActorRdfResolveQuadPatternFederated)({mediatorResolveQuadPattern:F,skipEmptyPatterns:!1,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-federated.json#myFederatedQuadPatternResolver\",bus:p}),Ee=new(r(94).ActorQueryOperationQuadpattern)({mediatorResolveQuadPattern:F,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myQuadPatternQueryOperator\",bus:v}),Me=new(r(95).ActorRdfResolveHypermediaQpf)({mediatorMetadata:U,mediatorMetadataExtract:X,mediatorRdfDereference:C,subjectUri:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject\",predicateUri:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate\",objectUri:\"http://www.w3.org/1999/02/22-rdf-syntax-ns#object\",graphUri:\"http://www.w3.org/ns/sparql-service-description#graph\",name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaQpfResolver\",bus:f}),Ie=new(r(96).ActorRdfResolveQuadPatternHypermedia)({mediatorRdfDereference:C,mediatorMetadata:U,mediatorMetadataExtract:X,mediatorRdfResolveHypermedia:W,mediatorRdfResolveHypermediaLinks:Z,cacheSize:100,httpInvalidator:te,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myQuadPatternHypermediaResolver\",bus:p}),Ce=new(r(100).ActorHttpProxy)({mediatorHttp:S,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#myHttpProxy\",bus:s,beforeActors:[x]}),Qe=new(r(34).ActorInitSparql)({mediatorOptimizeQueryOperation:ne,mediatorQueryOperation:be,mediatorSparqlParse:se,mediatorSparqlSerialize:ce,mediatorSparqlSerializeMediaTypeCombiner:de,mediatorSparqlSerializeMediaTypeFormatCombiner:ue,mediatorContextPreprocess:ge,mediatorHttpInvalidate:re,logger:n,contextKeyShortcuts:{source:\"@comunica/bus-rdf-resolve-quad-pattern:source\",sources:\"@comunica/bus-rdf-resolve-quad-pattern:sources\",initialBindings:\"@comunica/actor-init-sparql:initialBindings\",queryFormat:\"@comunica/actor-init-sparql:queryFormat\",baseIRI:\"@comunica/actor-init-sparql:baseIRI\",log:\"@comunica/core:log\",datetime:\"@comunica/actor-http-memento:datetime\",queryTimestamp:\"@comunica/actor-init-sparql:queryTimestamp\",httpProxyHandler:\"@comunica/actor-http-proxy:httpProxyHandler\",lenient:\"@comunica/actor-init-sparql:lenient\"},name:\"urn:comunica:sparqlinit\",bus:a});new(r(111).ActorQueryOperationAsk)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myAskQueryOperator\",bus:v}),new(r(112).ActorQueryOperationService)({forceSparqlEndpoint:!1,mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myServiceQueryOperator\",bus:v}),new(r(113).ActorQueryOperationSlice)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mySliceQueryOperator\",bus:v}),new(r(114).ActorQueryOperationBgpSingle)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mySingleBgpQueryOperator\",bus:v}),new(r(115).ActorQueryOperationBgpLeftDeepSmallest)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myLeftDeepSmallestBgpQueryOperator\",bus:v}),new(r(117).ActorQueryOperationConstruct)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myConstructQueryOperator\",bus:v}),new(r(118).ActorQueryOperationDescribeSubject)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myDescribeQueryOperator\",bus:v}),new(r(119).ActorQueryOperationDistinctHash)({hashAlgorithm:\"sha1\",digestAlgorithm:\"base64\",mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myDistinctQueryOperator\",bus:v}),new(r(121).ActorQueryOperationExtend)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myExtendQueryOperator\",bus:v}),new(r(122).ActorQueryOperationReducedHash)({hashAlgorithm:\"sha1\",digestAlgorithm:\"base64\",cacheSize:100,mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myReducedQueryOperator\",bus:v}),new(r(123).ActorQueryOperationFilterSparqlee)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myFilterQueryOperator\",bus:v}),new(r(124).ActorQueryOperationFromQuad)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myFromQueryOperator\",bus:v}),new(r(125).ActorQueryOperationGroup)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myGroupQueryOperator\",bus:v}),new(r(126).ActorQueryOperationJoin)({mediatorJoin:T,mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myJoinQueryOperator\",bus:v}),new(r(127).ActorQueryOperationLeftJoinLeftDeep)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myLeftJoinQueryOperator\",bus:v}),new(r(128).ActorQueryOperationOrderBySparqlee)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myOrderByQueryOperator\",bus:v}),new(r(129).ActorQueryOperationProject)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myProjectQueryOperator\",bus:v}),new(r(37).ActorQueryOperationUnion)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myUnionQueryOperator\",bus:v}),new(r(130).ActorQueryOperationMinus)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myMinusQueryOperator\",bus:v}),new(r(131).ActorQueryOperationPathAlt)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myAltPathOperator\",bus:v}),new(r(133).ActorQueryOperationPathInv)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myInvPathOperator\",bus:v}),new(r(134).ActorQueryOperationPathLink)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myLinkPathOperator\",bus:v}),new(r(135).ActorQueryOperationPathNps)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myNpsPathOperator\",bus:v}),new(r(136).ActorQueryOperationPathOneOrMore)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myOneOrMorePathOperator\",bus:v}),new(r(137).ActorQueryOperationPathSeq)({mediatorJoin:T,mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#mySeqPathOperator\",bus:v}),new(r(138).ActorQueryOperationPathZeroOrMore)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myZeroOrMorePathOperator\",bus:v}),new(r(139).ActorQueryOperationPathZeroOrOne)({mediatorQueryOperation:be,name:\"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myZeroOrOnePathOperator\",bus:v});e.exports=Qe},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(254))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(18);r(99);const a=r(255);class s extends n.ActorHttp{constructor(e){super(e),this.userAgent=s.createUserAgent(),this.requester=new a.default(e.agentOptions?JSON.parse(e.agentOptions):void 0)}static createUserAgent(){return`Comunica/actor-http-native (${\"undefined\"==typeof window?\"Node.js \"+process.version+\"; \"+process.platform:\"Browser-\"+window.navigator.userAgent})`}async test(e){return{time:1/0}}async run(e){const t={};if(e.input.url?(t.url=e.input.url,Object.assign(t,e.input)):t.url=e.input,e.init&&Object.assign(t,e.init),t.headers){const e={};t.headers.forEach((t,r)=>{e[r]=t}),t.headers=e}else t.headers={};return t.headers[\"user-agent\"]||(t.headers[\"user-agent\"]=this.userAgent),t.method=t.method||\"GET\",this.logInfo(e.context,\"Requesting \"+t.url),new Promise((e,r)=>{const n=this.requester.createRequest(t);n.on(\"error\",r),n.on(\"response\",n=>{n.on(\"error\",e=>{n=null,r(e)}),\"HEAD\"===t.method&&n.destroy(),setImmediate(()=>{if(n){n.cancel=()=>Promise.resolve(n.destroy());const r=new Headers(n.headers),a={body:n,headers:r,ok:n.statusCode<300,redirected:t.url!==n.responseUrl,status:n.statusCode,url:r.has(\"content-location\")?r.get(\"content-location\"):n.responseUrl};e(a)}})})})}}t.ActorHttpNative=s},function(e,t,r){\"use strict\";\n/*! @license MIT ©2016 Ruben Verborgh, Ghent University - imec */Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(256),a=r(105),s=r(257),o=r(108).http,i=r(108).https,c={gzip:s.createGunzip,deflate:s.createInflate};t.default=class{constructor(e){this.agents={http:new o.Agent(e||{}),https:new i.Agent(e||{})}}createRequest(e){let t;e.url&&Object.assign(e,a.parse(e.url));const r=new n.EventEmitter,s=\"http:\"===e.protocol?o:i;return e.agents=this.agents,t=s.request(e,e=>{(e=this.decode(e)).setEncoding(\"utf8\"),r.emit(\"response\",e)}),t.on(\"error\",e=>r.emit(\"error\",e)),t.end(),r}decode(e){const t=e.headers[\"content-encoding\"];if(t){if(t in c){const r=c[t]();return e.pipe(r),r.statusCode=e.statusCode,r.headers=e.headers,r}setImmediate(()=>{e.emit(\"error\",new Error(\"Unsupported encoding: \"+t))})}return e}}},function(e,t){e.exports=require(\"events\")},function(e,t){e.exports=require(\"zlib\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(1);class a extends n.ActionObserver{constructor(e){super(e),this.requests=0,this.bus.subscribeObserver(this)}onRun(e,t,r){this.requests++}}t.ActionObserverHttp=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17),a=r(10);class s extends n.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,t){if([\"bindings\",\"quads\"].indexOf(e.type)<0)throw new Error(\"This actor can only handle bindings streams or quad streams.\");return!0}pushHeader(e){const t=[\"Result\",\"Delay (ms)\",\"HTTP requests\"].join(\",\");e.push(t+\"\\n\")}pushStat(e,t,r){const n=[r,this.delay(t),this.httpObserver.requests].join(\",\");e.push(n+\"\\n\")}pushFooter(e,t){const r=[\"TOTAL\",this.delay(t),this.httpObserver.requests].join(\",\");e.push(r+\"\\n\"),e.push(null)}async runHandle(e,t,r){const n=new a.Readable;n._read=()=>{};const s=\"bindings\"===e.type?e.bindingsStream:e.quadStream,o=process.hrtime();let i=1;return this.pushHeader(n),s.on(\"error\",e=>n.emit(\"error\",e)),s.on(\"data\",()=>this.pushStat(n,o,i++)),s.on(\"end\",()=>this.pushFooter(n,o)),{data:n}}delay(e){const t=process.hrtime(e);return 1e3*t[0]+t[1]/1e6}}t.ActorSparqlSerializeStats=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(261))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(110),a=r(48),s=r(10);class o extends n.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){const n=new s.Readable({objectMode:!0});n._read=()=>{},e.quadStream.on(\"error\",e=>o.emit(\"error\",e)),e.quadStream.on(\"data\",e=>n.push(e)),e.quadStream.on(\"end\",()=>n.emit(\"end\"));const o=n.pipe(new a.StreamWriter({format:t}));return{data:o,triples:\"text/turtle\"===t||\"application/n-triples\"===t||\"text/n3\"===t}}}t.ActorRdfSerializeN3=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(23);class a extends n.ActorAbstractMediaTyped{constructor(e){super(e)}}t.ActorRdfSerialize=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(23);class a extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}t.ActorRdfSerializeFixedMediaTypes=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(265))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(110),a=r(266);class s extends n.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){return{data:new a.JsonLdSerializer({space:\" \".repeat(this.jsonStringifyIndentSpaces)}).import(e.quadStream)}}}t.ActorRdfSerializeJsonLd=s},function(e,t){e.exports=require(\"jsonld-streaming-serializer\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(268))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(80),a=r(269);class s extends n.ActorSparqlParse{constructor(e){super(e),this.graphqlToSparql=new a.Converter({requireContext:!0})}async test(e){if(\"graphql\"!==e.queryFormat)throw new Error(\"This actor can only parse GraphQL queries\");return!0}async run(e){const t=e.context&&e.context.has(\"@context\")?e.context.get(\"@context\"):{},r={singularizeVariables:e.context&&e.context.get(\"@comunica/actor-init-sparql:singularizeVariables\")};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(e.query,t,r)}}}t.ActorSparqlParseGraphql=s},function(e,t){e.exports=require(\"graphql-to-sparql\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(271))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17),a=r(5),s=r(10);class o extends n.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,t){if([\"bindings\",\"quads\",\"boolean\"].indexOf(e.type)<0)throw new Error(\"This actor can only handle bindings or quad streams.\");return!0}async runHandle(e,t,r){const n=new s.Readable;n._read=()=>{};let o=!0;if(\"bindings\"===e.type){const t=e.bindingsStream;n.push(\"[\"),t.on(\"error\",e=>n.emit(\"error\",e)),t.on(\"data\",e=>{n.push(o?\"\\n\":\",\\n\"),n.push(JSON.stringify(e.map(a.termToString))),o=!1}),t.on(\"end\",()=>{n.push(o?\"]\\n\":\"\\n]\\n\"),n.push(null)})}else if(\"quads\"===e.type){const t=e.quadStream;n.push(\"[\"),t.on(\"error\",e=>n.emit(\"error\",e)),t.on(\"data\",e=>{n.push(o?\"\\n\":\",\\n\"),n.push(JSON.stringify(a.quadToStringQuad(e))),o=!1}),t.on(\"end\",()=>{n.push(o?\"]\\n\":\"\\n]\\n\"),n.push(null)})}else try{n.push(JSON.stringify(await e.booleanResult)+\"\\n\"),n.push(null)}catch(e){setImmediate(()=>n.emit(\"error\",e))}return{data:n}}}t.ActorSparqlSerializeJson=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(273))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17),a=r(10);class s extends n.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,t){if([\"bindings\",\"quads\",\"boolean\"].indexOf(e.type)<0)throw new Error(\"This actor can only handle bindings streams, quad streams or booleans.\");return!0}async runHandle(e,t,r){const n=new a.Readable;let s;if(n._read=()=>{},\"bindings\"===e.type)s=e.bindingsStream,s.on(\"error\",e=>n.emit(\"error\",e)),s.on(\"data\",e=>n.push(e.map((e,t)=>t+\": \"+e.value).join(\"\\n\")+\"\\n\\n\")),s.on(\"end\",()=>n.push(null));else if(\"quads\"===e.type)s=e.quadStream,s.on(\"error\",e=>n.emit(\"error\",e)),s.on(\"data\",e=>n.push(\"subject: \"+e.subject.value+\"\\npredicate: \"+e.predicate.value+\"\\nobject: \"+e.object.value+\"\\ngraph: \"+e.graph.value+\"\\n\\n\")),s.on(\"end\",()=>n.push(null));else try{n.push(JSON.stringify(await e.booleanResult)+\"\\n\"),n.push(null)}catch(e){setImmediate(()=>n.emit(\"error\",e))}return{data:n}}}t.ActorSparqlSerializeSimple=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(275))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17),a=r(10);class s extends n.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToJsonBindings(e){if(\"Literal\"===e.termType){const t=e,r={value:t.value,type:\"literal\"},n=t.language,a=t.datatype;return n?r[\"xml:lang\"]=n:a&&\"http://www.w3.org/2001/XMLSchema#string\"!==a.value&&(r.datatype=a.value),r}return\"BlankNode\"===e.termType?{value:e.value,type:\"bnode\"}:{value:e.value,type:\"uri\"}}async testHandleChecked(e,t){if([\"bindings\",\"boolean\"].indexOf(e.type)<0)throw new Error(\"This actor can only handle bindings streams or booleans.\");return!0}async runHandle(e,t,r){const n=new a.Readable;n._read=()=>{};const o={};\"bindings\"===e.type&&e.variables.length&&(o.vars=e.variables.map(e=>e.substr(1))),n.push('{\"head\": '+JSON.stringify(o)+\",\\n\");let i=!0;if(\"bindings\"===e.type){const t=e.bindingsStream;t.on(\"error\",e=>{n.emit(\"error\",e)}),t.on(\"data\",e=>{i?n.push('\"results\": { \"bindings\": [\\n'):n.push(\",\\n\");const t=e.filter((e,t)=>!!e&&t.startsWith(\"?\"));n.push(JSON.stringify(t.mapEntries(([e,t])=>[e.substr(1),s.bindingToJsonBindings(t)]).toJSON())),i=!1}),t.on(\"end\",()=>{i?n.push('\"results\": { \"bindings\": [] }}\\n'):n.push(\"\\n]}}\\n\"),n.push(null)})}else try{n.push('\"boolean\":'+await e.booleanResult+\"\\n}\\n\"),n.push(null)}catch(e){setImmediate(()=>n.emit(\"error\",e))}return{data:n}}}t.ActorSparqlSerializeSparqlJson=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(277))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17),a=r(10),s=r(278);class o extends n.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToXmlBindings(e,t){let r;if(\"Literal\"===e.termType){const t=e;r={literal:t.value};const n=t.language,a=t.datatype;n?r.literal=[{_attr:{\"xml:lang\":n}},r.literal]:a&&\"http://www.w3.org/2001/XMLSchema#string\"!==a.value&&(r.literal=[{_attr:{datatype:a.value}},r.literal])}else r=\"BlankNode\"===e.termType?{bnode:e.value}:{uri:e.value};return{binding:[{_attr:{name:t.substring(1)}},r]}}async testHandleChecked(e,t){if([\"bindings\",\"boolean\"].indexOf(e.type)<0)throw new Error(\"This actor can only handle bindings streams or booleans.\");return!0}async runHandle(e,t,r){const n=new a.Readable;n._read=()=>{};const i=s.element({_attr:{xlmns:\"http://www.w3.org/2005/sparql-results#\"}});if(s({sparql:i},{stream:!0,indent:\"  \",declaration:!0}).on(\"data\",e=>n.push(e+\"\\n\")),\"bindings\"===e.type&&e.variables.length&&i.push({head:e.variables.map(e=>({variable:{_attr:{name:e.substr(1)}}}))}),\"bindings\"===e.type){const t=s.element({});i.push({results:t});const r=e.bindingsStream;r.on(\"error\",e=>{n.emit(\"error\",e)}),r.on(\"data\",e=>{const r=e.filter((e,t)=>!!e&&t.startsWith(\"?\"));t.push({result:r.map(o.bindingToXmlBindings)})}),r.on(\"end\",()=>{t.close(),i.close(),n.push(null)})}else try{i.push({boolean:await e.booleanResult}),i.close(),setImmediate(()=>n.push(null))}catch(e){setImmediate(()=>n.emit(\"error\",e))}return{data:n}}}t.ActorSparqlSerializeSparqlXml=o},function(e,t){e.exports=require(\"xml\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(280))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17),a=r(15),s=r(10);class o extends n.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e),this.padding=o.repeat(\" \",this.columnWidth)}static repeat(e,t){return new Array(t+1).join(e)}async testHandleChecked(e,t){if([\"bindings\",\"quads\"].indexOf(e.type)<0)throw new Error(\"This actor can only handle bindings or quad streams.\");return!0}pad(e){return e.length<=this.columnWidth?e+this.padding.slice(e.length):e.slice(0,this.columnWidth-1)+\"…\"}pushHeader(e,t){const r=t.map(this.pad,this).join(\" \");e.push(r+\"\\n\"+o.repeat(\"-\",r.length)+\"\\n\")}pushRow(e,t,r){e.push(t.map(e=>r.has(e)?r.get(e).value:\"\").map(this.pad,this).join(\" \")+\"\\n\")}async runHandle(e,t,r){const n=new s.Readable;let o;if(n._read=()=>{},\"bindings\"===e.type){o=e.bindingsStream;const t=e.variables;this.pushHeader(n,t),o.on(\"error\",e=>n.emit(\"error\",e)),o.on(\"data\",e=>this.pushRow(n,t,e))}else o=e.quadStream,this.pushHeader(n,a.QUAD_TERM_NAMES),o.on(\"error\",e=>n.emit(\"error\",e)),o.on(\"data\",e=>n.push(a.getTerms(e).map(e=>this.pad(e.value)).join(\" \")+\"\\n\"));return o.on(\"end\",()=>n.push(null)),{data:n}}}t.ActorSparqlSerializeTable=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(282))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(17);class a extends n.ActorSparqlSerialize{constructor(e){super(e)}async testHandle(e,t,r){if(\"quads\"!==e.type)throw new Error(\"Actor \"+this.name+\" can only handle quad streams\");const n=(await this.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0})).mediaTypes;if(!(t in n))throw new Error(\"Actor \"+this.name+\" can not handle media type \"+t+\". All available types: \"+Object.keys(n));return!0}async runHandle(e,t,r){return(await this.mediatorRdfSerialize.mediate({context:r,handle:e,handleMediaType:t})).handle}async testMediaType(e){return!0}async getMediaTypes(e){return(await this.mediatorMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}}t.ActorSparqlSerializeRdf=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"ask\")}async testOperation(e,t){return!0}async runOperation(e,t){const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),a=n.ActorQueryOperation.getSafeBindings(r);return{type:\"boolean\",booleanResult:new Promise((e,t)=>{a.bindingsStream.once(\"data\",()=>{e(!0),a.bindingsStream.close()}),a.bindingsStream.on(\"end\",()=>e(!1)),a.bindingsStream.on(\"error\",t)})}}}t.ActorQueryOperationAsk=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(14),s=r(1),o=r(8),i=r(104);class c extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"service\")}async testOperation(e,t){if(\"NamedNode\"!==e.name.termType)throw new Error(`${this.name} can only query services by IRI, while a ${e.name.termType} was given.`);return!0}async runOperation(e,t){const r=e.name.value;let c=(t=t||s.ActionContext({})).delete(a.KEY_CONTEXT_SOURCE).delete(a.KEY_CONTEXT_SOURCES);const d=this.forceSparqlEndpoint?\"sparql\":\"auto\";let u;c=c.set(a.KEY_CONTEXT_SOURCES,i.AsyncReiterableArray.fromFixedData([{type:d,value:r}]));try{u=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:c}))}catch(t){if(!e.silent)throw t;u={bindingsStream:new o.SingletonIterator(n.Bindings({})),type:\"bindings\",variables:[]}}return u}}t.ActorQueryOperationService=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"slice\")}async testOperation(e,t){return!0}async runOperation(e,t){const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),n=this.sliceMetadata(r,e);if(\"bindings\"===r.type){const t=r;return{type:\"bindings\",bindingsStream:this.sliceStream(t.bindingsStream,e),metadata:n,variables:t.variables}}if(\"quads\"===r.type){const t=r;return{type:\"quads\",quadStream:this.sliceStream(t.quadStream,e),metadata:n}}throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${r.type}'`)}sliceStream(e,t){const r=!!t.length||0===t.length;return e.range(t.start,r?t.start+t.length-1:1/0)}sliceMetadata(e,t){const r=!!t.length||0===t.length;return e.metadata?()=>e.metadata().then(e=>{let n=e.totalItems;return isFinite(n)&&(n=Math.max(0,n-t.start),r&&(n=Math.min(n,t.length))),Object.assign({},e,{totalItems:n})}):void 0}}t.ActorQueryOperationSlice=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"bgp\")}async testOperation(e,t){if(1!==e.patterns.length)throw new Error(\"Actor \"+this.name+\" can only operate on BGPs with a single pattern.\");return!0}runOperation(e,t){if(t&&t.has(n.KEY_CONTEXT_BGP_PARENTMETADATA)){const e=t.get(n.KEY_CONTEXT_BGP_PARENTMETADATA);t=(t=t.delete(n.KEY_CONTEXT_BGP_PARENTMETADATA)).set(n.KEY_CONTEXT_PATTERN_PARENTMETADATA,e[0])}return this.mediatorQueryOperation.mediate({operation:e.patterns[0],context:t})}}t.ActorQueryOperationBgpSingle=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(8),s=r(16),o=r(5),i=r(15);class c extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"bgp\")}static createLeftDeepStream(e,t,r){const n=new a.MultiTransformIterator(e);return n._createTransformer=e=>{const n=t=>t.merge(e);return new s.PromiseProxyIterator(async()=>(await r(c.materializePatterns(t,e))).map(n),{autoStart:!0,maxBufferSize:128})},n}static getCombinedVariables(e){return r(116)([].concat.apply([],e.map(e=>e.variables)))}static getSmallestPatternId(e){let t=-1,r=1/0;for(let n=0;n<e.length;n++){const a=e[n],s=c.getTotalItems(a);s<=r&&(r=s,t=n)}return t}static estimateCombinedTotalItems(e,t){const r=c.getTotalItems(e);return t.map(e=>r*c.getTotalItems(e)).reduce((e,t)=>e+t,0)}static getTotalItems(e){const t=(e||{}).totalItems;return t||0===t?t:1/0}static materializePatterns(e,t){return e.map(e=>c.materializePattern(e,t))}static materializePattern(e,t){const r={};return{pattern:Object.assign(i.mapTerms(e,(e,n)=>{const a=c.materializeTerm(e,t);return e!==a&&(r[n]=e),a}),{type:\"pattern\",context:e.context}),bindings:r}}static materializeTerm(e,t){if(\"Variable\"===e.termType){const r=t.get(o.termToString(e));if(r)return r}return e}static async hasOneEmptyPatternOutput(e){for(const t of e)if(t.metadata){const e=await t.metadata();if(!c.getTotalItems(e))return!0}return!1}async testOperation(e,t){if(e.patterns.length<2)throw new Error(\"Actor \"+this.name+\" can only operate on BGPs with at least two patterns.\");return!0}async runOperation(e,t){const r=(await Promise.all(e.patterns.map(e=>this.mediatorQueryOperation.mediate({operation:e,context:t})))).map(n.ActorQueryOperation.getSafeBindings);if(await c.hasOneEmptyPatternOutput(r))return{bindingsStream:new a.EmptyIterator,metadata:()=>Promise.resolve({totalItems:0}),type:\"bindings\",variables:c.getCombinedVariables(r)};const s=await Promise.all(r.map(async e=>e.metadata?await e.metadata():{})),o=c.getSmallestPatternId(s);this.logDebug(t,\"Smallest pattern: \",{pattern:e.patterns[o],metadata:s[o]});for(let e=0;e<r.length;e++)e!==o&&r[e].bindingsStream.close();const i=r.slice(o)[0],d=e.patterns.concat([]);d.splice(o,1);const u=s.concat([]);u.splice(o,1),n.ActorQueryOperation.validateQueryOutput(i,\"bindings\");const p=t&&t.set(n.KEY_CONTEXT_BGP_CURRENTMETADATA,s[o]).set(n.KEY_CONTEXT_BGP_PARENTMETADATA,u);return{type:\"bindings\",bindingsStream:c.createLeftDeepStream(i.bindingsStream,d,async e=>{const t={type:\"bgp\",patterns:e.map(e=>e.pattern)},r=e.map(e=>e.bindings);return n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:t,context:p.set(n.KEY_CONTEXT_BGP_PATTERNBINDINGS,r)})).bindingsStream}),variables:c.getCombinedVariables(r),metadata:()=>Promise.resolve({totalItems:c.estimateCombinedTotalItems(s[o],s.slice(o))})}}}t.ActorQueryOperationBgpLeftDeepSmallest=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(15),s=r(289);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"construct\")}static getVariables(e){return a.uniqTerms([].concat.apply([],e.map(e=>a.getVariables(a.getTerms(e)))))}async testOperation(e,t){return!0}async runOperation(e,t){const r=o.getVariables(e.template),a={type:\"project\",input:e.input,variables:r},i=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a,context:t})),c=new s.BindingsToQuadsIterator(e.template,i.bindingsStream);let d;return i.metadata&&(d=()=>i.metadata().then(t=>t.totalItems?Object.assign({},t,{totalItems:t.totalItems*e.template.length}):t)),{metadata:d,quadStream:c,type:\"quads\"}}}t.ActorQueryOperationConstruct=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(3),a=r(8),s=r(15);class o extends a.MultiTransformIterator{constructor(e,t){super(t),this.template=e,this.blankNodeCounter=0}static bindTerm(e,t){return\"Variable\"===t.termType?e.get(\"?\"+t.value):t}static bindQuad(e,t){try{return s.mapTerms(t,t=>{const r=o.bindTerm(e,t);if(!r)throw new Error(\"Unbound term\");return r})}catch(e){return}}static localizeBlankNode(e,t){return\"BlankNode\"===t.termType?n.blankNode(t.value+e):t}static localizeQuad(e,t){return s.mapTerms(t,t=>o.localizeBlankNode(e,t))}static bindTemplate(e,t,r){return t.map(o.bindQuad.bind(null,e)).filter(e=>!!e).map(o.localizeQuad.bind(null,r))}_createTransformer(e){return new a.ArrayIterator(o.bindTemplate(e,this.template,this.blankNodeCounter++))}}t.BindingsToQuadsIterator=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(37),a=r(2),s=r(3),o=r(28);class i extends a.ActorQueryOperationTypedMediated{constructor(e){super(e,\"describe\")}async testOperation(e,t){return!0}async runOperation(e,t){const r=e.terms.filter(e=>\"Variable\"!==e.termType).map(e=>{const t=[s.triple(e,s.variable(\"__predicate\"),s.variable(\"__object\"))];t.forEach(e=>e.type=\"pattern\");return{input:{type:\"bgp\",patterns:t},template:t,type:\"construct\"}});if(r.length!==e.terms.length){let t=[];e.terms.filter(e=>\"Variable\"===e.termType).forEach((e,r)=>{const n=[s.triple(e,s.variable(\"__predicate\"+r),s.variable(\"__object\"+r))];n.forEach(e=>e.type=\"pattern\"),t=t.concat(n)}),r.push({input:{type:\"join\",left:e.input,right:{type:\"bgp\",patterns:t}},template:t,type:\"construct\"})}const i=(await Promise.all(r.map(e=>this.mediatorQueryOperation.mediate({operation:e,context:t})))).map(a.ActorQueryOperation.getSafeQuads);return{type:\"quads\",quadStream:new o.RoundRobinUnionIterator(i.map(e=>e.quadStream)),metadata:()=>Promise.all(i.map(a.getMetadata)).then(n.ActorQueryOperationUnion.unionMetadata)}}}t.ActorQueryOperationDescribeSubject=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(28);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"union\")}static unionVariables(e){return r(56).apply({},e)}static unionMetadata(e){let t=0;for(const r of e){if(!r.totalItems||!isFinite(r.totalItems)){t=1/0;break}t+=r.totalItems}return{totalItems:t}}async testOperation(e,t){return!0}async runOperation(e,t){const r=(await Promise.all([this.mediatorQueryOperation.mediate({operation:e.left,context:t}),this.mediatorQueryOperation.mediate({operation:e.right,context:t})])).map(n.ActorQueryOperation.getSafeBindings);return{type:\"bindings\",bindingsStream:new a.RoundRobinUnionIterator(r.map(e=>e.bindingsStream)),metadata:r[0].metadata&&r[1].metadata?()=>Promise.all([r[0].metadata(),r[1].metadata()]).then(s.unionMetadata):void 0,variables:s.unionVariables(r.map(e=>e.variables))}}}t.ActorQueryOperationUnion=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(38);class a extends n.AbstractBindingsHash{constructor(e){super(e,\"distinct\")}newHashFilter(e,t){const r={};return a=>{const s=n.AbstractFilterHash.hash(e,t,a);return!(s in r)&&(r[s]=!0)}}}t.ActorQueryOperationDistinctHash=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(120);class s extends n.ActorQueryOperationTypedMediated{constructor(e,t){if(super(e,t),!a.AbstractFilterHash.doesHashAlgorithmExist(this.hashAlgorithm))throw new Error(\"The given hash algorithm is not present in this version of Node: \"+this.hashAlgorithm);if(!a.AbstractFilterHash.doesDigestAlgorithmExist(this.digestAlgorithm))throw new Error(\"The given digest algorithm is not present in this version of Node: \"+this.digestAlgorithm)}async testOperation(e,t){return!0}async runOperation(e,t){const r=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:t}));return{type:\"bindings\",bindingsStream:r.bindingsStream.filter(this.newHashFilter(this.hashAlgorithm,this.digestAlgorithm)),metadata:r.metadata,variables:r.variables}}}t.AbstractBindingsHash=s},function(e,t){e.exports=require(\"crypto\")},function(e,t){e.exports=require(\"json-stable-stringify\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(5),a=r(25),s=r(2);class o extends s.ActorQueryOperationTypedMediated{constructor(e){super(e,\"extend\")}async testOperation(e,t){new a.AsyncEvaluator(e.expression);return!0}async runOperation(e,t){const{expression:r,input:o,variable:i}=e,c=s.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:o,context:t})),d=n.termToString(i),u=Object.assign({},s.ActorQueryOperation.getExpressionContext(t,this.mediatorQueryOperation)),p=new a.AsyncEvaluator(r,u),l=c.variables.concat([d]),m=c.bindingsStream.transform({transform:async(e,r)=>{try{const t=await p.evaluate(e),r=e.set(d,t);m._push(r)}catch(r){a.isExpressionError(r)?(m._push(e),this.logWarn(t,`Expression error for extend operation with bindings '${JSON.stringify(e)}'`)):m.emit(\"error\",r)}r()}}),f=c.metadata;return{type:\"bindings\",bindingsStream:m,metadata:f,variables:l}}}t.ActorQueryOperationExtend=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(38),a=r(33);class s extends n.AbstractBindingsHash{constructor(e){super(e,\"reduced\")}newHashFilter(e,t){const r=new a({max:this.cacheSize});return a=>{const s=n.AbstractFilterHash.hash(e,t,a);return!r.has(s)&&r.set(s,!0)}}}t.ActorQueryOperationReducedHash=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(25),a=r(2);class s extends a.ActorQueryOperationTypedMediated{constructor(e){super(e,\"filter\")}async testOperation(e,t){new n.AsyncEvaluator(e.expression,a.ActorQueryOperation.getExpressionContext(t,this.mediatorQueryOperation));return!0}async runOperation(e,t){const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),s=a.ActorQueryOperation.getSafeBindings(r);a.ActorQueryOperation.validateQueryOutput(s,\"bindings\");const{variables:o,metadata:i}=s,c=a.ActorQueryOperation.getExpressionContext(t,this.mediatorQueryOperation),d=new n.AsyncEvaluator(e.expression,c),u=s.bindingsStream.transform({transform:async(e,t)=>{try{await d.evaluateAsEBV(e)&&u._push(e)}catch(e){n.isExpressionError(e)||u.emit(\"error\",e)}t()}});return{type:\"bindings\",bindingsStream:u,metadata:i,variables:o}}}t.ActorQueryOperationFilterSparqlee=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(7);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"from\")}static copyOperation(e,t){const r={};for(const n of Object.keys(e))Array.isArray(e[n])?r[n]=\"variables\"===n?e[n]:e[n].map(t):s.ALGEBRA_TYPES.indexOf(e[n].type)>=0?r[n]=t(e[n]):r[n]=e[n];return r}static applyOperationDefaultGraph(e,t){if(\"bgp\"===e.type&&e.patterns.length||\"path\"===e.type){if(\"bgp\"===e.type)return s.joinOperations(e.patterns.map(e=>{if(\"DefaultGraph\"!==e.graph.termType)return s.FACTORY.createBgp([e]);const r=t.map(t=>s.FACTORY.createBgp([s.FACTORY.createPattern(e.subject,e.predicate,e.object,t)]));return s.unionOperations(r)}));{if(\"DefaultGraph\"!==e.graph.termType)return e;const r=t.map(t=>s.FACTORY.createPath(e.subject,e.predicate,e.object,t));return s.joinOperations(r)}}return s.copyOperation(e,e=>this.applyOperationDefaultGraph(e,t))}static applyOperationNamedGraph(e,t,n){if(\"bgp\"===e.type&&e.patterns.length||\"path\"===e.type){let a;if(a=\"bgp\"===e.type?e.patterns[0].graph:e.graph,\"DefaultGraph\"===a.termType)return{type:\"bgp\",patterns:[]};if(\"Variable\"===a.termType){if(1===t.length){const r=t[0],n={};n[\"?\"+a.value]=r;const o=s.FACTORY.createValues([a],[n]);let i;return i=\"bgp\"===e.type?s.FACTORY.createBgp(e.patterns.map(e=>s.FACTORY.createPattern(e.subject,e.predicate,e.object,r))):s.FACTORY.createPath(e.subject,e.predicate,e.object,r),s.FACTORY.createJoin(o,i)}return s.unionOperations(t.map(t=>s.applyOperationNamedGraph(e,[t],n)))}return r(300)(t.concat(n),e=>e.equals(a))?e:{type:\"bgp\",patterns:[]}}return s.copyOperation(e,e=>this.applyOperationNamedGraph(e,t,n))}static joinOperations(e){if(1===e.length)return e[0];if(2===e.length)return s.FACTORY.createJoin(e[0],e[1]);if(e.length>2)return s.FACTORY.createJoin(e.shift(),this.joinOperations(e));throw new Error(\"A join can only be applied on at least one operation\")}static unionOperations(e){if(1===e.length)return e[0];if(2===e.length)return s.FACTORY.createUnion(e[0],e[1]);if(e.length>2)return s.FACTORY.createUnion(e.shift(),this.unionOperations(e));throw new Error(\"A union can only be applied on at least one operation\")}static createOperation(e){let t=e.input;return e.default.length&&(t=s.applyOperationDefaultGraph(t,e.default)),e.named.length&&(t=s.applyOperationNamedGraph(t,e.named,e.default)),t}async testOperation(e,t){return!0}async runOperation(e,t){const r=s.createOperation(e);return this.mediatorQueryOperation.mediate({operation:r,context:t})}}t.ActorQueryOperationFromQuad=s,s.FACTORY=new a.Factory,s.ALGEBRA_TYPES=Object.keys(a.Algebra.types).map(e=>a.Algebra.types[e])},function(e,t){e.exports=require(\"lodash.find\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(8),a=r(5),s=r(25),o=r(2),i=r(302);class c extends o.ActorQueryOperationTypedMediated{constructor(e){super(e,\"group\")}async testOperation(e,t){for(const t in e.aggregates){new s.SyncEvaluator(e.aggregates[t].expression)}return!0}async runOperation(e,t){const{input:r,aggregates:s}=e,c=await this.mediatorQueryOperation.mediate({operation:r,context:t}),d=o.ActorQueryOperation.getSafeBindings(c),u=e.variables.map(a.termToString).concat(s.map(e=>a.termToString(e.variable))),p=Object.assign({},o.ActorQueryOperation.getExpressionContext(t));return new Promise((t,r)=>{const a=new i.GroupsState(e,p);d.bindingsStream.on(\"end\",()=>{try{const e=new n.ArrayIterator(a.collectResults()),r=d.metadata;t({type:\"bindings\",bindingsStream:e,metadata:r,variables:u})}catch(e){r(e)}}),d.bindingsStream.on(\"error\",r),d.bindingsStream.on(\"data\",e=>{try{a.consumeBindings(e)}catch(e){r(e)}})})}}t.ActorQueryOperationGroup=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(5),a=r(25),s=r(38),o=r(2);t.GroupsState=class{constructor(e,t){this.pattern=e,this.sparqleeConfig=t,this.groups=new Map,this.groupVariables=new Set(this.pattern.variables.map(n.termToString)),this.distinctHashes=e.aggregates.some(({distinct:e})=>e)?new Map:null}consumeBindings(e){const t=e.filter((e,t)=>this.groupVariables.has(t)).toMap(),r=this.hashBindings(t);let s=this.groups.get(r);if(s)for(const t in this.pattern.aggregates){const a=this.pattern.aggregates[t];if(a.distinct){const t=this.hashBindings(e);if(this.distinctHashes.get(r).has(t))continue;this.distinctHashes.get(r).add(t)}const o=n.termToString(a.variable);s.aggregators[o].put(e)}else{const o={};for(const t in this.pattern.aggregates){const r=this.pattern.aggregates[t],s=n.termToString(r.variable);o[s]=new a.AggregateEvaluator(r,this.sparqleeConfig),o[s].put(e)}if(s={aggregators:o,bindings:t},this.groups.set(r,s),this.distinctHashes){const t=this.hashBindings(e);this.distinctHashes.set(r,new Set([t]))}}}collectResults(){let e=Array.from(this.groups,([e,t])=>{const{bindings:r,aggregators:n}=t,a={};for(const e in n){const t=n[e].result();void 0!==t&&(a[e]=t)}return r.merge(a)});if(0===e.length){const t={};for(const e in this.pattern.aggregates){const r=this.pattern.aggregates[e],s=n.termToString(r.variable),o=a.AggregateEvaluator.emptyValue(r);void 0!==o&&(t[s]=o)}e=[o.Bindings(t)]}return e}hashBindings(e){return s.AbstractFilterHash.hash(\"sha1\",\"hex\",e)}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"join\")}async testOperation(e,t){return!0}async runOperation(e,t){const r=this.mediatorQueryOperation.mediate({operation:e.left,context:t}),a=this.mediatorQueryOperation.mediate({operation:e.right,context:t});return this.mediatorJoin.mediate({entries:[n.ActorQueryOperation.getSafeBindings(await r),n.ActorQueryOperation.getSafeBindings(await a)]})}}t.ActorQueryOperationJoin=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(29),s=r(8),o=r(7),i=r(16);class c extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"leftjoin\")}static createLeftDeepStream(e,t,r){const a=new s.MultiTransformIterator(e,{optional:!0});return a._createTransformer=e=>{const a=t=>t.merge(e);return new i.PromiseProxyIterator(async()=>(await r(n.materializeOperation(t,e))).map(a),{autoStart:!0,maxBufferSize:128})},a}async testOperation(e,t){return!0}async runOperation(e,t){const r=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.left,context:t})),s=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.right,context:t}));s.bindingsStream.close();const o=e.expression?c.FACTORY.createFilter(e.right,e.expression):e.right,i=c.createLeftDeepStream(r.bindingsStream,o,async e=>n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e,context:t})).bindingsStream),d=a.ActorRdfJoin.joinVariables({entries:[r,s]});return n.getMetadata(r).catch(()=>{}),{type:\"bindings\",bindingsStream:i,metadata:()=>Promise.all([r,s].map(n.getMetadata)).then(e=>e.reduce((e,t)=>e*t.totalItems,1)).catch(()=>1/0).then(e=>({totalItems:e})),variables:d}}}t.ActorQueryOperationLeftJoinLeftDeep=c,c.FACTORY=new o.Factory},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(5),a=r(7),s=r(25),o=r(2),i=r(306);class c extends o.ActorQueryOperationTypedMediated{constructor(e){super(e,\"orderby\"),this.window=e.window||1/0}async testOperation(e,t){for(let t of e.expressions){t=this.extractSortExpression(t);new s.AsyncEvaluator(t)}return!0}async runOperation(e,t){const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),a=o.ActorQueryOperation.getSafeBindings(r),c={window:this.window},d=Object.assign({},o.ActorQueryOperation.getExpressionContext(t));let u=a.bindingsStream;for(let t of e.expressions){const e=this.isAscending(t);t=this.extractSortExpression(t);const r=new s.AsyncEvaluator(t,d),a=async(e,t)=>{try{const t=await r.evaluate(e);o._push({bindings:e,result:t})}catch(t){s.isExpressionError(t)||u.emit(\"error\",t),o._push({bindings:e,result:void 0})}t()},o=u.transform({transform:a}),p=new i.SortIterator(o,(t,r)=>{const a=n.termToString(t.result),s=n.termToString(r.result);return a&&s?a>s===e?1:-1:0},c);u=p.map(({bindings:e,result:t})=>e)}return{type:\"bindings\",bindingsStream:u,metadata:a.metadata,variables:a.variables}}extractSortExpression(e){const{expressionType:t,operator:r}=e;return t!==a.Algebra.expressionTypes.OPERATOR?e:\"desc\"===r?e.args[0]:e}isAscending(e){const{expressionType:t,operator:r}=e;return t!==a.Algebra.expressionTypes.OPERATOR||\"desc\"!==r}}t.ActorQueryOperationOrderBySparqlee=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(8);class a extends n.TransformIterator{constructor(e,t,r){super(e,r);const n=r&&r.window;this.windowLength=isFinite(n)&&n>0?n:1/0,this.sort=t,this.sorted=[]}_read(e,t){let r,n=this.sorted.length;for(;n!==this.windowLength&&(r=this.source.read(),null!==r);){let e,t,a=0,s=n-1;for(;a<=s;)e=Math.trunc((a+s)/2),t=this.sort(r,this.sorted[e]),t<0?a=e+1:t>0?s=e-1:(a=e,s=-1);this.sorted.splice(a,0,r),n++}n===this.windowLength&&this._push(this.sorted.pop()),t()}_flush(e){let t=this.sorted.length;for(;t--;)this._push(this.sorted.pop());e()}}t.SortIterator=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(93),s=r(3),o=r(5);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"project\")}async testOperation(e,t){return!0}async runOperation(e,t){const r=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:t})),i=e.variables.map(o.termToString),c=r.variables.filter(e=>i.indexOf(e)<0),d=i.filter(e=>r.variables.indexOf(e)<0);if(d.length>0)throw new Error(`Variables '${d}' are used in the projection result, but are not assigned.`);let u=c.length?r.bindingsStream.map(e=>{for(const t of c)e=e.delete(t);return e}):r.bindingsStream,p=0;return u=u.map(e=>(p++,e.map(e=>e&&\"BlankNode\"===e.termType?e instanceof a.BlankNodeScoped?new a.BlankNodeScoped(e.value+p,e.skolemized):s.blankNode(e.value+p):e))),{type:\"bindings\",bindingsStream:u,metadata:r.metadata,variables:i}}}t.ActorQueryOperationProject=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2),a=r(16),s=r(309);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,\"minus\")}async testOperation(e,t){return!0}async runOperation(e,t){const r=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.right,context:t})),o=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.left,context:t})),i=this.getCommonVariables(r.variables,o.variables);if(0!==i.length){const e=new s.BindingsIndex(i);return{type:\"bindings\",bindingsStream:new a.PromiseProxyIterator(async()=>(await new Promise(t=>{r.bindingsStream.on(\"data\",t=>e.add(t)),r.bindingsStream.on(\"end\",t)}),o.bindingsStream.filter(t=>!e.contains(t)))),variables:o.variables,metadata:o.metadata}}return o}getCommonVariables(e,t){return Object.keys(e.filter(e=>-1!==t.indexOf(e)).reduce((e,t)=>(e[t]=!0,e),{}))}}t.ActorQueryOperationMinus=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(5);class a{constructor(e){this.data={},this.keys=e}static hashTerm(e){return e&&\"Variable\"!==e.termType?n.termToString(e):\"\"}add(e){if(this.isBindingsValid(e)){let t=this.data;for(const r of this.keys){const n=a.hashTerm(e.get(r));let s=t[n];s||(s=t[n]={}),t=s}}}contains(e){return!!this.isBindingsValid(e)&&this.containsRecursive(e,this.keys,[this.data])}isBindingsValid(e){let t=!1;for(const r of this.keys)if(e.get(r)){t=!0;break}return t}containsRecursive(e,t,r){if(0===t.length)return!0;let n;[n,...t]=t;for(const s of r){const r=a.hashTerm(e.get(n));if(r){const n=[s[r],s[\"\"]].filter(e=>!!e);if(0===n.length)continue;if(this.containsRecursive(e,t,n))return!0}else{let r=Object.keys(s).map(e=>s[e]);if(0===r.length&&(r=[{}]),this.containsRecursive(e,t,r))return!0}}return!1}}t.BindingsIndex=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(19),a=r(2),s=r(28),o=r(7);class i extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.ALT)}async runOperation(e,t){const o=e.predicate,i=(await Promise.all([this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,o.left,e.object,e.graph)}),this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,o.right,e.object,e.graph)})])).map(e=>a.ActorQueryOperation.getSafeBindings(e));return{type:\"bindings\",bindingsStream:new s.RoundRobinUnionIterator(i.map(e=>e.bindingsStream)),variables:r(116)([].concat.apply([],i.map(e=>e.variables)))}}}t.ActorQueryOperationPathAlt=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(19),a=r(7);class s extends n.ActorAbstractPath{constructor(e){super(e,a.Algebra.types.INV)}async runOperation(e,t){const r=e.predicate,a=n.ActorAbstractPath.FACTORY.createPath(e.object,r.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:a,context:t})}}t.ActorQueryOperationPathInv=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(19),a=r(7);class s extends n.ActorAbstractPath{constructor(e){super(e,a.Algebra.types.LINK)}async runOperation(e,t){const r=e.predicate,a=n.ActorAbstractPath.FACTORY.createPattern(e.subject,r.iri,e.object,e.graph);return this.mediatorQueryOperation.mediate({operation:a,context:t})}}t.ActorQueryOperationPathLink=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(19),a=r(2),s=r(5),o=r(7);class i extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.NPS)}async runOperation(e,t){const r=e.predicate,o=this.generateBlankNode(e),i=s.termToString(o),c=n.ActorAbstractPath.FACTORY.createPattern(e.subject,o,e.object,e.graph),d=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:c,context:t})),u=d.bindingsStream.transform({filter:e=>!r.iris.some(t=>t.equals(e.get(i))),transform:(e,t)=>{u._push(e.delete(i)),t()}});return{type:\"bindings\",bindingsStream:u,variables:d.variables}}}t.ActorQueryOperationPathNps=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(19),a=r(2),s=r(8),o=r(16),i=r(5),c=r(7);class d extends n.ActorAbstractPath{constructor(e){super(e,c.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(e,t){const r=e.predicate,c=\"Variable\"===e.subject.termType,d=\"Variable\"===e.object.termType;if(!c&&d){const c=n.ActorAbstractPath.FACTORY.createPath(e.subject,r.path,e.object,e.graph),d=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:c})),u=i.termToString(e.object),p={},l=new s.MultiTransformIterator(d.bindingsStream);return l._createTransformer=e=>{const n=e.get(u);return new o.PromiseProxyIterator(async()=>{const e=new s.BufferedIterator;return await this.ALP(n,r.path,t,p,e,{count:0}),e.transform({transform:(e,t)=>{l._push(a.Bindings({[u]:e})),t()}})},{autoStart:!0,maxBufferSize:128})},{type:\"bindings\",bindingsStream:l,variables:[u]}}if(c&&d)throw new Error(\"ZeroOrMore path expressions with 2 variables not supported yet\");if(c&&!d)return this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.object,n.ActorAbstractPath.FACTORY.createOneOrMorePath(n.ActorAbstractPath.FACTORY.createInv(r.path)),e.subject,e.graph)});{const s=this.generateBlankNode(),o=i.termToString(s),c=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r,s,e.graph)})).bindingsStream.transform({filter:t=>t.get(o).equals(e.object),transform:(e,t)=>{c._push(a.Bindings({})),t()}});return{type:\"bindings\",bindingsStream:c,variables:[]}}}}t.ActorQueryOperationPathOneOrMore=d},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(19),a=r(2),s=r(5),o=r(7);class i extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.SEQ)}async runOperation(e,t){const r=e.predicate,o=this.generateBlankNode(e),i=s.termToString(o),c=(await Promise.all([this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r.left,o,e.graph)}),this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(o,r.right,e.object,e.graph)})])).map(e=>a.ActorQueryOperation.getSafeBindings(e)),d=a.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({entries:c})),u=d.bindingsStream.transform({transform:(e,t)=>{u._push(e.delete(i)),t()}});return{type:\"bindings\",bindingsStream:u,variables:d.variables}}}t.ActorQueryOperationPathSeq=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(19),a=r(2),s=r(5),o=r(7);class i extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(e,t){const r=e.predicate,o=\"Variable\"===e.subject.termType,i=\"Variable\"===e.object.termType;if(o&&i)throw new Error(\"ZeroOrMore path expressions with 2 variables not supported yet\");if(o||i){const i=s.termToString(o?e.subject:e.object),c=o?n.ActorAbstractPath.FACTORY.createInv(r.path):r.path,d=(await this.ALPeval(o?e.object:e.subject,c,t)).transform({transform:(e,t)=>{d._push(a.Bindings({[i]:e})),t()}});return{type:\"bindings\",bindingsStream:d,variables:[i]}}{const n=(await this.ALPeval(e.subject,r.path,t)).transform({filter:t=>t.equals(e.object),transform:(e,t)=>{n._push(a.Bindings({})),t()}});return{type:\"bindings\",bindingsStream:n,variables:[]}}}}t.ActorQueryOperationPathZeroOrMore=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(132),a=r(2),s=r(8),o=r(5),i=r(7);class c extends n.ActorAbstractPath{constructor(e){super(e,i.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(e,t){const r=e.predicate,i=\"Variable\"===e.subject.termType,c=\"Variable\"===e.object.termType,d=[];if(!i&&!c&&e.subject.equals(e.object))return{type:\"bindings\",bindingsStream:new s.SingletonIterator(a.Bindings({})),variables:[]};if(i&&c)throw new Error(\"ZeroOrOne path expressions with 2 variables not supported yet\");i&&d.push(a.Bindings({[o.termToString(e.subject)]:e.object})),c&&d.push(a.Bindings({[o.termToString(e.object)]:e.subject}));const u=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r.path,e.object,e.graph)}));return{type:\"bindings\",bindingsStream:u.bindingsStream.prepend(d),variables:u.variables}}}t.ActorQueryOperationPathZeroOrOne=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(319);t.newEngineDynamicArged=function(e,t,r){e.mainModulePath||(e.mainModulePath=t);const a=e.configResourceUrl||r,s=e.instanceUri||\"urn:comunica:sparqlinit\",o=e.runnerInstanceUri||\"urn:comunica:my\";return n.Setup.instantiateComponent(a,o,e).then(e=>e.collectActors({engine:s}).engine)}},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(320)),n(r(321))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.Runner=class{constructor(e){if(r(21)(this,e),!this.busInit)throw new Error('A valid \"busInit\" argument must be provided.');if(!this.actors)throw new Error('A valid \"actors\" argument must be provided.')}async run(e){const t=await Promise.all(this.busInit.publish(e));return Promise.all(t.map(t=>t.actor.runObservable(e)))}initialize(){return Promise.all(this.actors.map(e=>e.initialize())).then(()=>!0)}async deinitialize(){return Promise.all(this.actors.map(e=>e.deinitialize())).then(()=>!0)}collectActors(e){const t={};for(const r in e)for(const n of this.actors)n.name===e[r]&&(t[r]=n);for(const r in e)if(!(r in t))throw new Error(`No actor for key ${r} was found for IRI ${e[r]}.`);return t}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(322);class a{constructor(){throw new Error(\"The Setup class may not be constructed\")}static async run(e,t,r,n){r||(r=\"urn:comunica:my\");const s=await a.instantiateComponent(e,r,n);let o;await s.initialize();try{o=await s.run(t)}catch(e){throw await s.deinitialize(),e}return await s.deinitialize(),o}static async instantiateComponent(e,t,a){a||(a={}),r(45)(a,{mainModulePath:process.cwd()});const s=new n.Loader(a);return await s.registerAvailableModuleResources(),await s.instantiateFromUrl(t,e)}}t.Setup=a},function(e,t){e.exports=require(\"componentsjs\")},function(e,t,r){\"use strict\";r.r(t);var n=r(13),a=r.n(n),s=r(4),o=r(0),i=r(9),c=r(20);class d extends i.DeleteFunctionHandler{async extractObjects(e,t,r){const n=await super.extractObjects(e,t,r),a=[];for await(const e of t)\"BlankNode\"!==e.termType&&a.push(e);return n?a.filter(e=>n.some(t=>t.equals(e))):a}}var u=r(3);const{as:p}=c[\"@context\"];class l{constructor({activitiesPath:e=\"/public/activities\"}={}){this.requireUser=!0,this.activitiesPath=e}handle(e,t){const r=this,{root:n}=t,{settings:{queryEngine:a}}=e;return(e=p+\"Like\")=>Object(i.toIterablePromise)((async function*(){let s;try{s=await n.user}catch(e){if(r.requireUser)throw e;return}const o=await n.user.pim$storage,i=new URL(r.activitiesPath,o||s).href,c=[],d=Object(u.namedNode)(s);e=Object(u.namedNode)(e);for await(const n of t)if(\"NamedNode\"===n.termType){const t={actor:d,type:e,object:n};for await(const e of r.createResults(t,i,a))c.push(e)}for(const e of await r.processResults(c,i,a))yield n[e.value]}))}async processResults(e){return e}}const{termToString:m}=i.SparqlHandler.prototype;function f(e,t){for(const r in t)e=e.replace(new RegExp(\"_:\"+r,\"g\"),m(t[r]));return e}function h(...e){return{size:e.length,values:()=>({next:()=>({value:e.shift()})})}}var y=r(140);const{xsd:g}=c[\"@context\"];const b=[\"?subject\",\"?predicate\",\"?object\"];class w{constructor(e,t){this._paths=e,this._source=t}supports(e){return\"string\"==typeof e}resolve(e,{settings:t}){return this._createSubjectPath(Object(u.namedNode)(e),t)}_createSubjectPath(e,{createQueryEngine:t}){const r=t(this._source||Promise.resolve(e).catch(()=>null));return this._paths.create({queryEngine:r},{subject:e})}}class O{constructor(e){this._paths=e}handle({settings:e}){return t=>new i.PathFactory({handlers:{...i.defaultHandlers},resolvers:[new w(this._paths,t)]}).create(e,{})}}class v extends w{handle({settings:e}){const t=this.getWebId().then(u.namedNode);return this._createSubjectPath(t,e)}async getWebId(){const e=await a.a.currentSession();if(!e)throw new Error(\"Cannot resolve user path: no user logged in\");return e.webId}}class S extends i.JSONLDResolver{constructor(e){super(e);const t=this._exposedContext=Object.create(e[\"@context\"]);Object.defineProperty(t,\"extend\",{value:(...e)=>this.extendContext(...e)}),Object.defineProperty(t,\"then\",{value:(e,t)=>this._context.then(e=>e.contextRaw).then(e,t)})}handle(){return this._exposedContext}}const{as:x}=c[\"@context\"],q=new S(c),T={...i.defaultHandlers,put:new class{handle(e,t){const{root:r}=t;return(e=\"\",n=\"text/turtle\")=>Object(i.toIterablePromise)((async function*(){const s=new Set;for await(const e of t){const t=/^https?:\\/\\/[^#]+/.exec(e?e.value:\"\");t&&s.add(t[0])}const o=[...s].map(t=>a.a.fetch(t,{method:\"PUT\",headers:{\"Content-Type\":n},body:e}));await Promise.all(o);for(const e of s)yield r[e]}))}},delete:new d,findActivity:new class extends l{constructor(...e){super(...e),this.requireUser=!1}async*createResults(e,t,r){const n=f(\"SELECT ?activity WHERE {\\n  ?activity a _:type;\\n      <https://www.w3.org/ns/activitystreams#actor> _:actor;\\n      <https://www.w3.org/ns/activitystreams#object> _:object.\\n}\\n\",e);for await(const e of r.execute(n,t))yield e.values().next().value}},likes:(e,t)=>t.findActivity(x+\"Like\"),dislikes:(e,t)=>t.findActivity(x+\"Dislike\"),follows:(e,t)=>t.findActivity(x+\"Follow\"),createActivity:new class extends l{async*createResults(e,t){const r=Object(u.namedNode)(new URL(\"#\"+Object(y.v4)(),t).href),n=f(\"_:id a _:type;\\n    <https://www.w3.org/ns/activitystreams#actor> _:actor;\\n    <https://www.w3.org/ns/activitystreams#object> _:object;\\n    <https://www.w3.org/ns/activitystreams#published> _:published.\\n\",e={id:r,published:Object(u.literal)((new Date).toISOString(),g+\"dateTime\"),...e});yield{id:r,insert:n}}async processResults(e,t,r){const n=`INSERT {\\n${e.map(e=>e.insert).join(\"\")}}`;return await r.executeUpdate(n,t).next(),e.map(e=>e.id)}},like:(e,t)=>()=>t.createActivity(x+\"Like\"),dislike:(e,t)=>()=>t.createActivity(x+\"Dislike\"),follow:(e,t)=>()=>t.createActivity(x+\"Follow\"),deleteActivity:new class extends l{async*createResults(e,t,r){const n=f(\"SELECT ?subject ?predicate ?object WHERE {\\n  ?subject a _:type;\\n      <https://www.w3.org/ns/activitystreams#actor> _:actor;\\n      <https://www.w3.org/ns/activitystreams#object> _:object.\\n  ?subject ?predicate ?object.\\n}\\n\",e);for await(const e of r.execute(n,t)){const t=b.map(t=>m(e.get(t)));yield t.join(\" \")+\".\\n\"}}async processResults(e,t,r){const n=`DELETE {\\n${e.join(\"\")}}`;return await r.executeUpdate(n,t).next(),[]}},unlike:(e,t)=>()=>t.deleteActivity(x+\"Like\"),undislike:(e,t)=>()=>t.deleteActivity(x+\"Dislike\"),unfollow:(e,t)=>()=>t.deleteActivity(x+\"Follow\")};class P{constructor(e,t){this._source=this.getUpdateSource(e),this._source.catch(()=>null),this._engine=t}async*execute(e,t){yield*/^\\s*(?:INSERT|DELETE)/i.test(e)?this.executeUpdate(e,t):this._engine.execute(e,t)}executeUpdate(e,t){let r=!1;return{next:async()=>{if(r)return{done:r};r=!0;const n=await(t?this.getUpdateSource(t):this._source),{ok:s,status:o,statusText:i}=await a.a.fetch(n,{method:\"PATCH\",headers:{\"Content-Type\":\"application/sparql-update\"},body:e});if(!s)throw new Error(`Update query failed (${o}): ${i}`);return await this.clearCache(n),{value:h({ok:s})}},return:A,throw:A,[Symbol.asyncIterator](){return this}}}async getUpdateSource(e){let t=await e;if(t instanceof URL?t=t.href:t&&\"string\"==typeof t.value&&(t=t.value),\"string\"==typeof t){if(!/^https?:\\/\\//.test(t))throw new Error(\"Can only update an HTTP(S) document.\");return t.replace(/#.*/,\"\")}if(Array.isArray(t)){if(t=await Promise.all(t.map(e=>this.getUpdateSource(e))),t=[].concat(...t).filter(e=>!!e),1!==t.length)throw new Error(\"Can only update a single source.\");return t[0]}throw new Error(\"Unsupported source: \"+t)}clearCache(e){return this._engine.clearCache(e)}}function A(){}var j=r(141),_=r.n(j);var R=class{constructor(e){this._engine=_.a,this._sources=this.parseSources(e),this._sources.catch(()=>null)}async*execute(e,t){/^\\s*(?:INSERT|DELETE)/i.test(e)&&(yield*this.executeUpdate(e,t));const r=await(t?this.parseSources(t):this._sources);if(0!==r.length){const t=await this._engine.query(e,{sources:r});yield*this.streamToAsyncIterable(t.bindingsStream)}}async*executeUpdate(e,t){throw new Error(\"SPARQL UPDATE queries are unsupported, received: \"+e)}async parseSources(e){let t=await e;if(!t)return[];if(t instanceof URL?t=t.href:\"NamedNode\"===t.termType&&(t=t.value),\"string\"==typeof t)t=[t.replace(/#.*/,\"\")];else if(Array.isArray(t))t=await async function(e){return[].concat(...await Promise.all(e))}(t.map(e=>this.parseSources(e)));else if(\"function\"==typeof t.match)t=[Object.assign({type:\"rdfjsSource\"},t)];else{if(\"string\"!=typeof e.value)throw new Error(\"Unsupported source: \"+e);t=[t]}return t.map(e=>({value:e.value||e,type:e.type}))}streamToAsyncIterable(e){let t;return e.once(\"error\",e=>t=e),{next:()=>new Promise(r),[Symbol.asyncIterator](){return this}};function r(r,n){if(t)return n(t);if(e.ended)return r({done:!0});function a(e){s(null,e,!0)}function s(t,o,i){return e.removeListener(\"data\",a),e.removeListener(\"end\",s),e.removeListener(\"error\",s),t?n(t):r({value:o,done:!i})}e.on(\"data\",a),e.on(\"end\",s),e.on(\"error\",s)}}async clearCache(e){await this._engine.invalidateHttpCache(e)}},E=new function(e){let t=null;const r=new i.PathFactory({handlers:{...T,root:()=>t},resolvers:[q]});return t=new i.PathFactory({handlers:{...i.defaultHandlers,from:new O(r),user:new v(r),clearCache:({settings:e})=>t=>e.createQueryEngine().clearCache(t),context:q},resolvers:[new w(r)],...e}).create(),t}({createQueryEngine:e=>new P(e,new R(e))}),M=r(26),I=r(12);const C=r(147).Docker;var Q=\"https://chang.inrupt.net/registerlist/requestlist.ttl\",k=\"https://chang.inrupt.net/inbox/triggermessage.ttl\",N=\"https://chang.inrupt.net/profile/card#me\",B=\"https://chang.inrupt.net/settings/registerIndex.ttl\",D=\"https://chang.inrupt.net/registerlist/userregister.ttl\";const H=document.querySelectorAll(\".listen.button\"),L=document.querySelectorAll(\".login.button\"),F=document.querySelectorAll(\".link\");var z=window.location.pathname.split(\"/\").pop();if(\"participate.html\"===z)Z(Q).then(e=>{(async function(e){const t=e.findSubjects(),r=[],n=[],a=[],i=[];for(let e=0;e<t.length;e++){const c=t[e].getRef(o.schema.recordedAs);if(!n.includes(c)){const d=t[e].getRef(o.schema.creator);try{const e=await Object(s.fetchDocument)(c);r.push({fetchedRequestID:c,fetchedRequestDoc:e}),i.push(d);const t=await Object(s.fetchDocument)(d);a.push(t),n.push(c)}catch{console.log(c,\": cannot retrieve this data request!\")}}}return[r,a,i]})(e).then(e=>{const t=e[0];ae(e[1],e[2],t,\"fromPageEntrance\",\"participant\").then(e=>{se(e[0],e[1])})})});else if(\"yourRequest.html\"===z)J().then(e=>{V(e).then(t=>{const r=t.findSubjects(o.rdf.type,\"http://schema.org/AskAction\");Z(e).then(t=>{ae(t,e,r,\"fromWebID\",\"requester\").then(e=>{se(e[0],e[1])})})}).catch(e=>{alert(e.message)})});else if(\"podProvider.html\"===z){let e=setTimeout((function t(){J().then(r=>{r===N&&async function(e){const t=(await Object(s.fetchDocument)(e)).findSubjects(o.rdf.type,o.schema.ActivateAction);if(0==t.length)return\"No analysis trigger message needs to be processed!\";for(let e=0;e<t.length;e++){const r=t[e].getRef(o.schema.target),n=t[e].getRef(o.schema.creator),a=\"https://chang.inrupt.net/registerlist/participationlist/\"+r.split(\"#\")[1]+\".ttl\";Z(r.split(\"#\")[0]).then(e=>{ie(e,r,n).then(s=>{if(!s)return\"Request validation is failed. Process is interrupted!\";{let s=0,i=[];const c=e.getSubject(r).getRef(o.schema.DataFeedItem);Z(a).then(e=>{const a=e.findSubjects(),d=[];for(let e=0;e<a.length;e++)d.includes(a[e])||d.push(a[e]);for(let e=0;e<d.length;e++)if(d[e].getRef(\"http://schema.org/RsvpResponseYes\")===r){const a=d[e].getRef(o.schema.participant);if(!(d[e].getDateTime(o.schema.endDate)>new Date(Date.now())))return\"Participation period of \"+d[e].toString+\" has expired!\";Z(a.split(\"profile\")[0]+\"private/healthrecord.ttl\").then(a=>{const o=a.getTriples();for(let a=0;a<o.length;a++)if(o[a].predicate.id===c&&(s+=parseInt(o[a].object.value),i.push(parseInt(o[a].object.value)),e==d.length-1&&a==o.length-1)){const a=s/i.length;console.log(a),Y(n,r,t[e],a).then(e=>e)}}).catch(e=>e.message)}})}})})}}(k).then(r=>{alert(r),e=setTimeout(t,3e3)})})}),3e3)}else if(\"dockerTest.html\"===z){const e=new C({socketPath:\"/var/run/docker.sock\"});console.log(e.info())}async function U(e,t,r){await E[e][t].add(r)}async function Y(e,t,r,n){await E[r.asRef()][o.rdf.type].set(Object(u.namedNode)(o.schema.DeactivateAction));const a=e.split(\"profile/card#me\")[0]+\"inbox/\"+t.split(\"#\")[1]+\".ttl\";E[a].put(),await E[a][o.rdf.type].add(Object(u.namedNode)(o.schema.resultComment));const s=new Date(Date.now());return await E[a][o.schema.dateCreated].add(Object(u.literal)(s.toISOString(),\"http://www.w3.org/2001/XMLSchema#dateTime\")),await E[a][o.schema.result].add(Object(u.literal)(n)),\"Sending results is successful!\"}async function J(){let e=await a.a.currentSession();if(e)return e.webId;{const e=await new Promise((e,t)=>{H.forEach((function(t){t.addEventListener(\"click\",(function(t){t.preventDefault();const r=t.currentTarget.classList;r.contains(\"inrupt\")?(e(\"https://inrupt.net\"),console.log(\"Login Inrupt\")):r.contains(\"solid\")&&(e(\"https://solid.community\"),console.log(\"Login Solid Community\"))}))}))});a.a.login(e)}}async function X(e,t,r,n){try{await Object(s.fetchDocument)(e)}catch(e){alert(e.message)}finally{const a=await Object(s.fetchDocument)(e);if(n){return a.getTriples()}{const e=a.getSubject(t);if(r){return e.getAllLiterals(r).concat(e.getAllRefs(r))}return e.getTriples()}}}function G(e,t,r){let n=Object.keys(t[0]);if(!r)for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.hasChildNodes()||function(e,t){let r=e.createTHead().insertRow();for(let e of t){let t=document.createElement(\"th\"),n=document.createTextNode(e);t.appendChild(n),r.appendChild(t)}}(e,n),function(e,t){for(let r of t){let t=e.insertRow();for(let e in r){let n=t.insertCell(),a=document.createTextNode(r[e]);n.appendChild(a)}}}(e,t)}async function $(e,t,r){const n=e+\"profile/card#me\",a=(await Object(s.fetchDocument)(n)).getSubject(n);if(t.includes(\"public\"))var i=a.getRef(o.solid.publicTypeIndex),c=\"public/\"+r;else if(t.includes(\"private\"))i=a.getRef(o.solid.privateTypeIndex),c=\"private/\"+r;const d=await Object(s.fetchDocument)(i),u=d.findSubject(o.solid.instance,e+c);if(null===u)return async function(e,t,r){const n=e.getRef(o.space.storage)+r,a=Object(s.createDocument)(n);await a.save();const i=t.addSubject();return i.addRef(o.rdf.type,o.solid.TypeRegistration),i.addRef(o.solid.instance,a.asRef()),i.addRef(o.solid.forClass,o.schema.dataFeedElement),await t.save([i]),a}(a,d,c).then(()=>alert(\"New file \"+c+\" is created!\"));const p=u.getRef(o.solid.instance);return await Object(s.fetchDocument)(p)}async function K(e,t,r){const n=(await Object(s.fetchDocument)(e)).getSubject(e),a=n.getRef(o.solid.privateTypeIndex),i=await Object(s.fetchDocument)(a);if(0!=i.findSubjects(o.solid.forClass,o.schema.RegisterAction).length)return\"You have registered already!\";(async function(e,t,r,n){const a=M.sign.keyPair(),i=Object(I.encodeBase64)(a.publicKey),c=Object(I.encodeBase64)(a.secretKey),d=e.getRef(o.space.storage),p=Object(s.createDocument)(d+\"private/registration.ttl\"),l=p.addSubject();l.addRef(o.rdf.type,o.schema.RegisterAction),l.addString(o.schema.name,r),l.addString(o.schema.affiliation,n),l.addString(\"http://schema.org/hasCredential\",c),await p.save([l]),await E[D+\"#\"+d+\"profile/card#me\"][\"http://schema.org/hasCredential\"].add(Object(u.literal)(i));const m=t.addSubject();return m.addRef(o.rdf.type,o.solid.TypeRegistration),m.addRef(o.solid.instance,p.asRef()),m.addRef(o.solid.forClass,o.schema.RegisterAction),await t.save([m]),\"Successfully registered!\"})(n,i,t,r).then(e=>(alert(e),e))}async function V(e){const t=(await Object(s.fetchDocument)(e)).getSubject(e),r=t.getRef(o.solid.publicTypeIndex),n=await Object(s.fetchDocument)(r),a=n.findSubjects(o.solid.forClass,\"http://schema.org/AskAction\");if(a.length>0)for(let t=0;t<a.length;t++){const r=a[t].getRef(o.solid.instance);if(r&&r.toString()===e.slice(0,e.length-15)+\"public/request.ttl\")return await Object(s.fetchDocument)(r)}return async function(e,t){const r=e.getRef(o.space.storage),n=r+\"public/request.ttl\",a=Object(s.createDocument)(n);await a.save();const i=t.addSubject();i.addRef(o.rdf.type,o.solid.TypeRegistration),i.addRef(o.solid.instance,a.asRef()),i.addRef(o.solid.forClass,\"http://schema.org/AskAction\"),await t.save([i]);return document.getElementById(\"firstRequestMessage\").textContent=\"New file 'public/request.ttl' is created and initialized in your Solid Pod. -> \"+r+\"public/request.ttl\",a}(t,n).then(()=>{alert(\"New file 'public/request.ttl'is created!\")})}async function W(e,t,r){const n=\"https://\"+e.substring(e.lastIndexOf(\"https://\")+8,e.lastIndexOf(\"/profile/card#me\"))+\"/private/registration.ttl\",a=(await Object(s.fetchDocument)(n)).getTriples();let i=\"\";for(let e=0;e<a.length;e++)\"http://schema.org/hasCredential\"==a[e].predicate.id&&(i=Object(I.decodeBase64)(a[e].object.value));if(0!=i.length){var c=r.addSubject();if(c.addRef(o.rdf.type,\"http://schema.org/AskAction\"),c.addRef(o.schema.creator,e),t.purpose&&c.addString(\"http://schema.org/purpose\",t.purpose),t.data)for(let e=0;e<t.data.length;e++)c.addRef(o.schema.DataFeedItem,t.data[e]);t.period&&c.addDateTime(o.schema.endDate,t.period),t.numInstance&&c.addInteger(\"http://schema.org/collectionSize\",parseInt(t.numInstance)),t.model&&c.addString(\"http://schema.org/algorithm\",t.model);const n=new Date(Date.now());c.addDateTime(o.schema.dateCreated,n),await r.save([c]);const a=await Object(s.fetchDocument)(Q),d=a.addSubject();d.addRef(o.schema.recordedAs,c.asRef()),d.addRef(o.schema.creator,e);const u=function(e,t,r,n){const a=e.asRef();let s=`<${a}> <${o.rdf.type}> <http://schema.org/AskAction>.\\n`;if(s+=`<${a}> <http://schema.org/algorithm> \"${t.model}\".\\n`,s+=`<${a}> <http://schema.org/collectionSize> ${t.numInstance}.\\n`,s+=`<${a}> <${o.schema.creator}> <${r}>.\\n`,s+=`<${a}> <${o.schema.dateCreated}> \"${n.toString().split(\" (\")[0]}\".\\n`,s+=`<${a}> <${o.schema.endDate}> \"${t.period.toString().split(\" (\")[0]}\".\\n`,s+=`<${a}> <http://schema.org/purpose> \"${t.purpose}\".\\n`,t.data)for(let e=0;e<t.data.length;e++)s+=`<${a}> <${o.schema.DataFeedItem}> <${t.data[e]}>.\\n`;return s}(c,t,e,n),p=M.sign.detached(Object(I.decodeUTF8)(u),i);return d.addString(o.schema.validIn,Object(I.encodeBase64)(p)),await a.save([d]),\"Thank you for posting a new data request!\"}alert(\"Cannot find valid credential. Please register first!\")}async function Z(e){return await Object(s.fetchDocument)(e)}async function ee(e){const t=(await Object(s.fetchDocument)(e)).getSubject(e),r=t.getRef(o.solid.privateTypeIndex),n=await Object(s.fetchDocument)(r),a=n.findSubjects(o.solid.forClass,\"http://schema.org/JoinAction\");if(0==a.length)(async function(e,t){const r=e.getRef(o.space.storage)+\"private/participation.ttl\",n=Object(s.createDocument)(r);await n.save();const a=t.addSubject();return a.addRef(o.rdf.type,o.solid.TypeRegistration),a.addRef(o.solid.instance,n.asRef()),a.addRef(o.solid.forClass,o.schema.JoinAction),await t.save([a]),n})(t,n).then(e=>(alert(\"As this is your first time to participate in a data request, we have created 'private/participation.ttl'is for you! Please approve the request again. \"),e));else for(let t=0;t<a.length;t++){const r=a[t].getRef(o.solid.instance);if(r&&r.toString()===e.slice(0,e.length-15)+\"private/participation.ttl\")return await Object(s.fetchDocument)(r)}}async function te(e,t,r,n,a,i,c,d,p){const l=t.findSubjects(o.rdf.type,o.schema.JoinAction).length,m=new Date(Date.now()),f=n.findSubjects(o.schema.participant,e);let h=!1;for(let e=0;e<f.length;e++)f[e].getRef(\"http://schema.org/RsvpResponseYes\")==r&&(h=!0);if(l<=i)if(m<=c)if(h)alert(\"You are in the participates list already.\");else{if(d>=new Date(Date.now())){if(p){if(p[0]){const a=t.addSubject();a.addRef(o.rdf.type,o.schema.JoinAction),a.addInteger(p[1],p[2]),a.addRef(\"http://schema.org/RsvpResponseYes\",r),a.addDateTime(o.schema.dateCreated,new Date(Date.now())),await t.save([a]);const s=n.addSubject();s.addRef(o.rdf.type,o.schema.JoinAction),s.addRef(o.schema.participant,e),s.addRef(\"http://schema.org/RsvpResponseYes\",r),s.addDateTime(o.schema.dateCreated,new Date(Date.now())),await n.save([s])}}else{const t=\"https://\"+e.substring(e.lastIndexOf(\"https://\")+8,e.lastIndexOf(\"/profile/card#me\"))+\"/private/registration.ttl\",i=(await Object(s.fetchDocument)(t)).getTriples();let c=\"\";for(let e=0;e<i.length;e++)\"http://schema.org/hasCredential\"==i[e].predicate.id&&(c=Object(I.decodeBase64)(i[e].object.value));if(0==c.length)alert(\"Cannot find valid credential. Please register first!\");else{const t=n.addSubject();t.addRef(o.rdf.type,o.schema.JoinAction),t.addRef(o.schema.participant,e),t.addRef(\"http://schema.org/RsvpResponseYes\",r),t.addDateTime(o.schema.dateCreated,new Date(Date.now())),t.addDateTime(o.schema.endDate,d);const i=\"https://chang.inrupt.net/registerlist/participationlist/\"+r.split(\"#\")[1]+\".ttl\";(await Object(s.fetchDocument)(B)).getSubject(i).getRef(o.rdf.type)||(E[i].put(),await E[B+\"#\"+r.split(\"#\")[1]][\"http://schema.org/RegisterAction\"].add(Object(u.namedNode)(i)));const p=t.asRef().split(\"#\")[1];await E[i+\"#\"+p][o.rdf.type].add(Object(u.namedNode)(o.schema.JoinAction)),await E[i+\"#\"+p][o.schema.participant].add(Object(u.namedNode)(e)),await E[i+\"#\"+p][\"http://schema.org/RsvpResponseYes\"].add(Object(u.namedNode)(r));const l=new Date(Date.now());await E[i+\"#\"+p][o.schema.dateCreated].add(Object(u.literal)(l.toISOString(),\"http://www.w3.org/2001/XMLSchema#dateTime\")),await E[i+\"#\"+p][o.schema.endDate].add(Object(u.literal)(d.toISOString(),\"http://www.w3.org/2001/XMLSchema#dateTime\"));const m=M.sign.detached(Object(I.decodeUTF8)(r.split(\"#\")[1]),c);await E[i+\"#\"+p][o.schema.validIn].add(Object(u.literal)(Object(I.encodeBase64)(m))),await n.save([t]);const f=a.addSubject(\"Read\");f.addRef(o.rdf.type,o.acl.Authorization),f.addRef(o.acl.accessTo,\"healthrecord.ttl\"),f.addRef(o.acl.agent,N),f.addRef(o.acl.mode,o.acl.Read),f.addDateTime(o.schema.endDate,d);await a.save([f])}}return!0}alert(\"Participation end date has to be later than today.\")}else alert(\"Sorry, request end date has expired.\");else alert(\"Sorry, request has enough participants.\")}function re(e,t,r){return Object.keys(r).forEach((function(n){-1!==n.indexOf(t)&&e.push({Text:n,FoundURI:r[n]})})),e}function ne(e,t,r){let n=Object(),a=[];for(let s=0;s<t.length;s++)t[s].subject.id===r&&(n.webid=e.asRef(),n.name=e.getString(o.foaf.name),n.organization=e.getString(\"http://www.w3.org/2006/vcard/ns#organization-name\"),n.image=e.getRef(o.vcard.hasPhoto),n.url=r,\"http://schema.org/purpose\"===t[s].predicate.id&&(n.purpose=\"Purpose: \"+t[s].object.value),t[s].predicate.id===o.schema.endDate&&(n.period=\"End date: \"+t[s].object.value),\"http://schema.org/algorithm\"===t[s].predicate.id&&(n.analysis=\"Analysis: \"+t[s].object.value),\"http://schema.org/DataFeedItem\"===t[s].predicate.id&&a.push(t[s].object.value)),n.dataElement=\"Requested data: \"+a;return Object.keys(n).length<2&&(n=!1),n}async function ae(e,t,r,n,a){var s=[];if(\"fromPageEntrance\"===n)for(let n=0;n<r.length;n++){const a=ne(e[n].getSubject(t[n]),r[n].fetchedRequestDoc.getTriples(),r[n].fetchedRequestID);a&&s.push(a)}else if(\"fromWebID\"===n){const n=e.getSubject(t);for(let e=0;e<r.length;e++){const t=ne(n,r[e].getTriples(),r[e].asRef());t&&s.push(t)}}else{const a=ne(e.getSubject(t),r,n);a&&s.push(a)}s=await async function(e,t){document.getElementById(\"Container\").innerHTML=\"\";const r=document.createElement(\"div\");r.className=\"ui cards\",r.id=\"cardsContainer\",document.getElementById(\"Container\").appendChild(r);for(var n=0;n<e.length;n++){const r=document.createElement(\"div\");r.className=\"card\",r.id=\"cardID\"+n.toString(),document.getElementById(\"cardsContainer\").appendChild(r);const a=document.createElement(\"a\");a.href=e[n].url,a.className=\"content\",a.id=\"contentID\"+n.toString(),document.getElementById(\"cardID\"+n.toString()).appendChild(a);const s=document.createElement(\"img\");s.className=\"right floated mini ui image\",s.src=e[n].image,s.id=\"imgID\"+n.toString(),document.getElementById(\"contentID\"+n.toString()).appendChild(s);const o=document.createElement(\"div\");o.className=\"header\",o.id=\"headerID\"+n.toString(),o.textContent=e[n].name,document.getElementById(\"contentID\"+n.toString()).appendChild(o);const i=document.createElement(\"div\");i.className=\"meta\",i.id=\"metaID\"+n.toString(),i.textContent=e[n].organization,document.getElementById(\"contentID\"+n.toString()).appendChild(i);const c=document.createElement(\"div\");c.className=\"description\",c.id=\"descriptionID\"+n.toString(),c.textContent=e[n].purpose,document.getElementById(\"contentID\"+n.toString()).appendChild(c);const d=document.createElement(\"div\");d.style=\"word-wrap: break-word\",d.className=\"description\",d.id=\"dataElementID\"+n.toString(),d.textContent=e[n].dataElement,document.getElementById(\"contentID\"+n.toString()).appendChild(d);const u=document.createElement(\"div\");u.className=\"description\",u.id=\"periodID\"+n.toString(),u.textContent=e[n].period,document.getElementById(\"contentID\"+n.toString()).appendChild(u);const p=document.createElement(\"div\");p.className=\"description\",p.id=\"analysisID\"+n.toString(),p.textContent=e[n].analysis,document.getElementById(\"contentID\"+n.toString()).appendChild(p);const l=document.createElement(\"div\");if(l.className=\"extra content\",l.id=\"extraID\"+n.toString(),document.getElementById(\"cardID\"+n.toString()).appendChild(l),\"participant\"===t){const e=document.createElement(\"div\");e.className=\"ui transparent input\",e.id=\"forDate\"+n.toString(),document.getElementById(\"extraID\"+n.toString()).appendChild(e);const t=document.createElement(\"input\");t.type=\"date\",t.id=\"untilDate\"+n.toString(),document.getElementById(\"forDate\"+n.toString()).appendChild(t);const r=document.createElement(\"div\");r.className=\"ui two buttons\",r.id=\"buttonsID\"+n.toString(),document.getElementById(\"extraID\"+n.toString()).appendChild(r);const a=document.createElement(\"button\");a.className=\"ui basic red Decline button answer index_\"+n.toString(),a.id=\"redButtonID\"+n.toString(),a.textContent=\"Decline\",document.getElementById(\"buttonsID\"+n.toString()).appendChild(a);const s=document.createElement(\"button\");s.className=\"ui basic green Approve button answer index_\"+n.toString(),s.id=\"greenButtonID\"+n.toString(),s.textContent=\"Approve\",document.getElementById(\"buttonsID\"+n.toString()).appendChild(s)}else{const e=(10*Math.floor(10*Math.random())).toString(),r=document.createElement(\"div\");r.className=\"ui indicating progress\",r.dataset.percent=e,r.id=\"progressID\"+n.toString(),document.getElementById(\"extraID\"+n.toString()).appendChild(r);const a=document.createElement(\"div\");a.className=\"bar\",a.style.width=e+\"%\",a.style.transitionDuration=\"300ms\",a.id=\"progressBarID\"+n.toString(),document.getElementById(\"progressID\"+n.toString()).appendChild(a);const s=document.createElement(\"div\");s.className=\"label\",s.id=\"progressLabelID\"+n.toString(),s.textContent=\"Data collection progress - \"+e+\"%\",document.getElementById(\"progressID\"+n.toString()).appendChild(s);const o=document.createElement(\"div\");if(o.className=\"ui two buttons\",o.id=\"buttonsID\"+n.toString(),document.getElementById(\"extraID\"+n.toString()).appendChild(o),\"requester\"===t){const e=document.createElement(\"button\");e.className=\"ui grey stopCollection button answer index_\"+n.toString(),e.id=\"stopCollectionButtonID\"+n.toString(),e.textContent=\"Stop collection\",document.getElementById(\"buttonsID\"+n.toString()).appendChild(e);const t=document.createElement(\"button\");t.className=\"ui blue triggerAnalysis button answer index_\"+n.toString(),t.id=\"triggerAnalysisButtonID\"+n.toString(),t.textContent=\"Trigger analysis\",document.getElementById(\"buttonsID\"+n.toString()).appendChild(t)}else if(\"podProvider\"===t){const e=document.createElement(\"button\");e.className=\"ui grey ppLearning button answer index_\"+n.toString(),e.id=\"privacyButtonID\"+n.toString(),e.textContent=\"Abortion\",document.getElementById(\"buttonsID\"+n.toString()).appendChild(e);const t=document.createElement(\"button\");t.className=\"ui blue proceed button answer index_\"+n.toString(),t.id=\"regularButtonID\"+n.toString(),t.textContent=\"Proceed\",document.getElementById(\"buttonsID\"+n.toString()).appendChild(t)}}}return e}(s,a),document.getElementById(\"loader\").style.display=\"none\";return[document.querySelectorAll(\".answer.button\"),s]}function se(e,t){e.forEach((function(e){e.addEventListener(\"click\",(function(e){e.preventDefault();const r=e.currentTarget.classList,n=r.value.split(\" \").pop().split(\"_\")[1],a=t[n];if(r.contains(\"Approve\")){const e=a.url,t=new Date(document.getElementById(\"untilDate\"+n).value);J().then(r=>{Z(e).then(n=>{const a=n.getSubject(e).getInteger(o.schema.collectionSize),s=n.getSubject(e).getDateTime(o.schema.endDate),i=n.getSubject(e).getString(\"http://schema.org/algorithm\");ee(r).then(c=>{if(i.includes(\"Regular\")){Z(r.split(\"profile\")[0]+\"private/healthrecord.ttl.acl\").then(o=>{te(r,n,e,c,o,a,s,t,i.includes(\"Privacy\")).then(e=>{e&&alert(\"Your participation is recorded. Access to your 'healthrecord.ttl' is granted to your Pod provider.'\")})}).catch(()=>{alert(\"If you have given this SOLID App 'Control' Access, please turn on specific sharing for your 'healthrecord.ttl' file .\")})}else i.includes(\"Privacy\")&&Z(e).then(i=>{const d=i.getSubject(e).getRef(o.schema.DataFeedItem);Z(r.split(\"profile\")[0]+\"private/healthrecord.ttl\").then(o=>{const i=o.getTriples();for(let o=0;o<i.length;o++)if(i[o].predicate.id===d){const u=parseInt(i[o].object.value);te(r,n,e,c,null,a,s,t,[!0,d,u]).then(e=>{e&&alert(\"Your participation is in privacy-preserving analysis. Nothing has been recorded except the requested data.\")})}}).catch(e=>{alert(e.message)})}).catch(e=>{alert(e.message)})})})})}else if(r.contains(\"triggerAnalysis\")){const e=a.url,t=e.split(\"#\")[1];U(k+\"#\"+t,o.rdf.type,Object(u.namedNode)(o.schema.ActivateAction)),U(k+\"#\"+t,o.schema.target,Object(u.namedNode)(e)),U(k+\"#\"+t,o.schema.creator,Object(u.namedNode)(a.webid));const r=new Date(Date.now());U(k+\"#\"+t,o.schema.dateCreated,Object(u.literal)(r.toISOString(),\"http://www.w3.org/2001/XMLSchema#dateTime\")),U(e,o.schema.status,Object(u.namedNode)(o.schema.ActivateAction)),alert(\"Got it! Your analysis request has been sent to the Pod Serve!\")}else r.contains(\"proceed\")&&alert(\"Proceed function is paused!\")}))}))}function oe(e,t){const r=e.getSubject(t),n=r.asRef();let a=`<${n}> <${o.rdf.type}> <${r.getRef(o.rdf.type)}>.\\n`;a+=`<${n}> <http://schema.org/algorithm> \"${r.getString(\"http://schema.org/algorithm\")}\".\\n`,a+=`<${n}> <http://schema.org/collectionSize> ${r.getInteger(o.schema.collectionSize)}.\\n`,a+=`<${n}> <${o.schema.creator}> <${r.getRef(o.schema.creator)}>.\\n`,a+=`<${n}> <${o.schema.dateCreated}> \"${r.getDateTime(o.schema.dateCreated).toString().split(\" (\")[0]}\".\\n`,a+=`<${n}> <${o.schema.endDate}> \"${r.getDateTime(o.schema.endDate).toString().split(\" (\")[0]}\".\\n`,a+=`<${n}> <http://schema.org/purpose> \"${r.getString(\"http://schema.org/purpose\")}\".\\n`;const s=r.getAllRefs(o.schema.DataFeedItem);if(s)for(let e=0;e<s.length;e++)a+=`<${n}> <${o.schema.DataFeedItem}> <${s[e]}>.\\n`;return a}async function ie(e,t,r){const n=(await Object(s.fetchDocument)(Q)).findSubject(o.schema.recordedAs,t).getString(o.schema.validIn),a=(await Object(s.fetchDocument)(D)).getTriples();for(let s=0;s<a.length;s++)if(a[s].subject.id.split(\".ttl#\")[1]==r)if(\"http://schema.org/hasCredential\"==a[s].predicate.id){const r=a[s].object.value;if(n){const a=oe(e,t);return M.sign.detached.verify(Object(I.decodeUTF8)(a),Object(I.decodeBase64)(n),Object(I.decodeBase64)(r))}alert(\"Lack of a valid signature! Execution interrupted!\")}else alert(\"This requester does not have a credential. Execution interrupted!\")}J().then(e=>{const t=document.getElementById(\"homeMessage\");e?(\"/dist/login.html\"==window.location.pathname&&(window.location.href=\"homepage.html\"),t&&(t.textContent=\"Welcome! \"+e),document.getElementById(\"logStatusPage\").textContent=\"Log Out\",document.getElementById(\"logStatusFollowing\").textContent=\"Log Out\",L.forEach((function(e){e.addEventListener(\"click\",(function(e){e.preventDefault();e.currentTarget.classList.contains(\"login\")&&(a.a.logout().then(()=>alert(\"See you soon!\")),window.location.href=\"homepage.html\")}))}))):(t&&(t.textContent=\"Contribute your data in SOLID to research with full control and privacy preserved.\"),document.getElementById(\"logStatusPage\").textContent=\"Log In\",document.getElementById(\"logStatusFollowing\").textContent=\"Log In\")}),F.forEach((function(e){e.addEventListener(\"click\",(function(e){e.preventDefault();const t=e.currentTarget.classList,r=document.querySelectorAll(\".table\");if(t.contains(\"predicateSuggestion\"))var n=document.getElementById(\"addTriplePredicate\").value;else if(t.contains(\"objectSuggestion\"))n=document.getElementById(\"addTripleObject\").value;var a=[];if(n){let e=[o.schema,o.foaf,o.rdf,o.skos,o.dc,o.dct];for(let t=0;t<e.length;t++){let r=e[t];a=re(a,n,r)}}0==a.length&&a.push({Text:n,FoundURI:\"Sorry, we couldn't find matched identifiers(URI).\"}),r.forEach((function(e){e.classList.contains(\"searchTable\")&&G(e,a,!1)}))}))})),H.forEach((function(e){e.addEventListener(\"click\",(function(e){e.preventDefault();const t=e.currentTarget.classList;if(t.contains(\"userRegisterbtn\")){const e=document.getElementById(\"userName\").value,t=document.getElementById(\"affiliance\").value;J().then(r=>{K(r,e,t).then(e=>{const t=document.getElementById(\"tokenMessage\");t.setAttribute(\"style\",\"word-wrap: break-word\"),t.textContent=e})})}if(t.contains(\"bcTokenLogin\")){const e=document.getElementById(\"bcTokenUser\").value,t=document.getElementById(\"bcTokenPassword\").value,r=document.getElementById(\"tokenMessage\");r.setAttribute(\"style\",\"word-wrap: break-word\");fetch(`https://blockchain7.kmi.open.ac.uk/rdf/users/signin?username=${e}&password=${t}`,{method:\"POST\",redirect:\"follow\"}).then(e=>e.text()).then(e=>{if(e.includes(\"token\")){const t=e.substring(e.lastIndexOf('{\"token\":\"')+10,e.lastIndexOf('\"'));r.textContent=\" Please save the token and it lasts for 5 hours. \\n Your token is \"+t,console.log(e)}else alert(\"Username or password is incorrect!\")}).catch(e=>alert(\"error\",e))}else if(t.contains(\"fetchObjects\")||t.contains(\"fetchTriples\")){if(t.contains(\"fetchTriples\"))var r=document.getElementById(\"fetchFromTriples\").value;else r=document.getElementById(\"fetchFromObjects\").value;const e=document.getElementById(\"fetchSubject\").value,n=document.getElementById(\"fetchPredicate\").value,a=t.contains(\"fetchTriples\");X(r,e,n,a).then(r=>{const a=document.querySelectorAll(\".table\");let s=[];if(t.contains(\"fetchTriples\")){for(let e=0;e<r.length;e++)s.push({Subject:r[e].subject.id,Predicate:r[e].predicate.id,Object:r[e].object.id});a.forEach((function(e){e.classList.contains(\"triples\")&&G(e,s,!1)}))}else if(t.contains(\"fetchObjects\")&&e){for(let e=0;e<r.length;e++)n?s.push({Object:r[e]}):s.push({Predicate:r[e].predicate.id,Object:r[e].object.id});a.forEach((function(e){e.classList.contains(\"objects\")&&G(e,s,!1)}))}})}else if(t.contains(\"createModel\")){const e=document.getElementById(\"fileLocation\").value,t=\"https://\"+e.substring(e.lastIndexOf(\"https://\")+8,e.lastIndexOf(\"/\"))+\"/\",r=document.getElementById(\"fileName\").value,n=document.querySelectorAll(\".table\");$(t,e,r).then(e=>{var t=e.getTriples();const r=document.getElementById(\"createMessage\");document.querySelector(\"table\");let a=[];for(let e=0;e<t.length;e++)a.push({Subject:t[e].subject.id,Predicate:t[e].predicate.id,Object:t[e].object.id});a.length>0?(r.textContent=\"Your file already exists with some triples\",n.forEach((function(e){e.classList.contains(\"fetchedTable\")&&G(e,a,!1)}))):r.textContent=\"Your file exists but nothing is inside!\",alert(\"Your file already exists!\")}).catch(e=>{document.getElementById(\"createMessage\").textContent=e.message})}else if(t.contains(\"addSingleTriple\")){let e=[];const t=document.querySelectorAll(\".table\"),r=document.getElementById(\"addTriplePredicate\").value,n=document.getElementById(\"addTripleObject\").value;e.push({Predicate:r,Object:n}),t.forEach((function(t){t.classList.contains(\"addedTable\")&&G(t,e,!0)}))}else if(t.contains(\"addData\")){const e=document.getElementById(\"fileLocation\").value,t=\"https://\"+e.substring(e.lastIndexOf(\"https://\")+8,e.lastIndexOf(\"/\"))+\"/\",r=document.getElementById(\"fileName\").value;var n=[];const i=document.getElementById(\"addedTable\");var a=i.rows.length;for(let e=1;e<a;e++){var s=i.rows.item(e).cells;n.push({Predicate:s.item(0).innerHTML,Object:s.item(1).innerHTML})}$(t,e,r).then(e=>{(async function(e,t,r){const n=e+\"profile/card#me\",a=r.addSubject();a.addRef(o.rdf.type,o.schema.dataFeedElement),a.addDateTime(o.schema.dateCreated,new Date(Date.now())),a.addRef(o.schema.creator,n);for(let e=0;e<t.length;e++){let r=t[e].Predicate,n=t[e].Object;if(Number(n))Number(n)===parseInt(n,10)?a.addInteger(r,parseInt(n)):a.addDecimal(r,parseFloat(n));else if(n.includes(\"http://\")||n.includes(\"https://\"))a.addRef(r,n);else try{a.addDateTime(r,new Date(n))}catch{a.addString(r,n)}}return await r.save([a])})(t,n,e).then(e=>{document.getElementById(\"addTableMessage\").textContent=\"Above triples are saved in \"+r,alert(\"Your editing is successful!\")}).catch(e=>{document.getElementById(\"addTableMessage\").textContent=e.message})})}else if(t.contains(\"checkExtRequest\"))J().then(e=>{V(e).then(e=>{document.getElementById(\"firstRequestMessage\").textContent=\"Your have 'public/request.ttl' in your Solid Pod already. Ready to submit a data request!\"})});else if(t.contains(\"addRequestedData\")){const e=document.getElementById(\"addRequestedDataMessage\"),t=e.textContent.split(\"\\r\\n\");e.setAttribute(\"style\",\"white-space: pre;\");const r=document.getElementById(\"addTriplePredicate\").value;!t.includes(r)&&r.length>0&&(t.push(r),e.textContent+=r+\"\\r\\n\");e.textContent.split(\"\\r\\n\").pop()}else if(t.contains(\"submitRequest\"))J().then(e=>{const t=e,r=document.getElementById(\"input_purpose\").value,n=document.getElementById(\"addRequestedDataMessage\").textContent.split(\"\\r\\n\");n.pop();const a=new Date(document.getElementById(\"input_period\").value),s=document.getElementById(\"input_numInstance\").value,o=document.getElementById(\"input_model\"),i={purpose:r,data:n,period:a,numInstance:s,model:o.options[o.selectedIndex].text,token:document.getElementById(\"input_token\").value};V(t).then(e=>{W(t,i,e).then(e=>{alert(e)})})});else if(t.contains(\"queryRequest\")){const e=document.getElementById(\"fetchRequest\").value;e.slice(-15).includes(\"profile/card\")?V(e).then(t=>{const r=t.findSubjects(o.rdf.type,\"http://schema.org/AskAction\"),n=e;Z(n).then(e=>{ae(e,n,r,\"fromWebID\",\"participant\").then(e=>{se(e[0],e[1])})})}).catch(e=>{alert(e.message)}):X(e,null,null,!0).then(t=>{const r=\"https://\"+e.substring(e.lastIndexOf(\"https://\")+8,e.lastIndexOf(\"/public\"))+\"/profile/card#me\";Z(r).then(n=>{ae(n,r,t,e,\"participant\").then(e=>{se(e[0],e[1])})})}).catch(e=>{alert(e.message)})}}))}))}]);","extractedComments":[]}